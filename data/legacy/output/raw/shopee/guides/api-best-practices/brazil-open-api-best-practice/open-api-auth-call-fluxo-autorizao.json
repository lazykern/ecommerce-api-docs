{
  "category_name": "API Best Practices / Brazil Open API Best Practice",
  "category_id": 2067,
  "document_id": 385,
  "release_time": 1721793950,
  "update_time": 1721793950,
  "operator": "grace.li@shopee.com",
  "title": "Open API auth call | Fluxo autorização ",
  "raw_content": "[{\"name\":\"heading2\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Autorização de loja\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Na Shopee, para que um App (criado no\"},{\"attributes\":{\"linkHref\":\"https://open.shopee.com/myconsole/management/app\"},\"data\":\" \"},{\"attributes\":{\"bold\":true,\"linkHref\":\"https://open.shopee.com/myconsole/management/app\"},\"data\":\"Open Platform Console\"},{\"data\":\") possa ter acesso aos dados de uma loja pela API, é preciso que ela dê autorização à esse App.\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Para isso, \"},{\"attributes\":{\"bold\":true},\"data\":\"crie um link de autorização seguindo as regras abaixo\"},{\"data\":\", forneça ele ao vendedor e oriente ele a autorizar. Este link deve ser colocado na interface do seu sistema para a conveniência do vendedor\"}]},{\"name\":\"paragraph\"},{\"name\":\"heading2\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"1.1) Como criar a URL de autorização de loja?\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\".A URL deve ser criada seguindo o padrão: \"},{\"attributes\":{\"bold\":true},\"data\":\"host + path + partner id + timestamp + redirect url + sign\"},{\"data\":\".\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Host\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"italic\":true},\"data\":\"Ambiente Live: 'https://partner.shopeemobile.com'\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"italic\":true},\"data\":\"Ambiente de Teste: 'https://partner.test-stable.shopeemobile.com'\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Path: \"},{\"data\":\"'/api/v2/shop/auth_partner'\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Partner id:\"},{\"data\":\" id encontrado nos\"},{\"attributes\":{\"linkHref\":\"https://open.shopee.com/myconsole/management/app\"},\"data\":\" \"},{\"attributes\":{\"bold\":true,\"linkHref\":\"https://open.shopee.com/myconsole/management/app\"},\"data\":\"detalhes\"},{\"data\":\" do seu App;\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Timestamp: \"},{\"data\":\"uint32, válido por 5 minutos;\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Redirect url: \"},{\"data\":\"essa será a página em que o vendedor será redirecionado depois de completar a autorização;\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Sign: \"},{\"data\":\"string criptografada gerada seguindo as regras do próximo item.\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Confira o exemplo abaixo: \"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Ambiente Live\"},{\"data\":\":\"},{\"attributes\":{\"linkHref\":\"https://partner.shopeemobile.com/api/v2/shop/auth_partner?partner_id=844010&timestamp=1615240504&sign=5f60ea34c2c395d3c9de03f8c3b23d4ddfce9ab237f3dd8ec1273492b0574056&redirect=https://shopee.com.br\"},\"data\":\" \"},{\"attributes\":{\"bold\":true,\"linkHref\":\"https://partner.shopeemobile.com/api/v2/shop/auth_partner?partner_id=844010&timestamp=1615240504&sign=5f60ea34c2c395d3c9de03f8c3b23d4ddfce9ab237f3dd8ec1273492b0574056&redirect=https://shopee.com.br\"},\"data\":\"https://partner.shopeemobile.com/api/v2/shop/auth_partner?partner_id=844010&timestamp=1615240504&redirect=https://shopee.com.br&sign=5f60ea34c2c395d3c9de03f8c3b23d4ddfce9ab237f3dd8ec1273492b0574056\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Ambiente de Teste:\"},{\"attributes\":{\"linkHref\":\"https://partner.shopeemobile.com/api/v2/shop/auth_partner?partner_id=844010&timestamp=1615240504&sign=5f60ea34c2c395d3c9de03f8c3b23d4ddfce9ab237f3dd8ec1273492b0574056&redirect=https://shopee.com.br\"},\"data\":\" \"},{\"attributes\":{\"bold\":true,\"linkHref\":\"https://partner.shopeemobile.com/api/v2/shop/auth_partner?partner_id=844010&timestamp=1615240504&sign=5f60ea34c2c395d3c9de03f8c3b23d4ddfce9ab237f3dd8ec1273492b0574056&redirect=https://shopee.com.br\"},\"data\":\"https://partner.test-stable.shopeemobile.com/api/v2/shop/auth_partner?partner_id=844010&timestamp=1615240504&redirect=https://test-stable.shopee.com.br&sign=5f60ea34c2c395d3c9de03f8c3b23d4ddfce9ab237f3dd8ec1273492b0574056\"}]},{\"name\":\"heading2\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"1.2) Como gerar o sign de autorização de loja?\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Para calcular o Sign, crie uma string com 'partner_id+ path+timestamp' (nessa ordem e os mesmos usados na construção da url)  - Ex: XXX/api/v2/shop/auth_partner1659992253\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Criptografe essa string usando HMAC-SHA256 e o partner key encontrado nos detalhes do seu App como chave.\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Exemplo:\"},{\"data\":\" Ferramenta online que consegue encriptar a mensagem com algoritmo HMAC-SHA256:\"},{\"attributes\":{\"linkHref\":\"https://codebeautify.org/hmac-generator\"},\"data\":\" \"},{\"attributes\":{\"bold\":true,\"linkHref\":\"https://codebeautify.org/hmac-generator\"},\"data\":\"https://codebeautify.org/hmac-generator\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Basta preencher os campos de forma correta.\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Exemplo de código em Python:: \"},{\"data\":\"Código utilizado no \\\"pre-request\\\" do Postman, para gerar o sign:\"}]},{\"attributes\":{\"language\":\"java\"},\"name\":\"codeBlock\",\"children\":[{\"data\":\"// Define partner_id\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"pm.environment.set(\\\"partnerId\\\",XXXX);\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"//set timestamp\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"vardate=newDate(); //generate timestamp\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"vartime=parseInt(date.getTime()/1000); //decrease the size of timestamp\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"pm.environment.set(\\\"currentTime\\\", time); //set timestamp on environment variable\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"//define path\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"pm.environment.set(\\\"path\\\",'/api/v2/shop/auth_partner');\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"//define secret key to encrypt\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"pm.environment.set(\\\"key\\\",bc123339c962718c49dc8362c9eb73836bc881d5f0fbf1002b89947bf738dc55);\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"// string_base = partnerId+path+timestamp - define string encrypt\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"varstring_base=pm.environment.get(\\\"partnerId\\\")+pm.environment.get(\\\"path\\\")+pm.environment.get(\\\"currentTime\\\");\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"//call library\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"varCryptoJS=require(\\\"crypto-js\\\");\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"//hmac encrypt partnerId+path+timestamp and set it as \\\"sign\\\" variable\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"varsign=CryptoJS.HmacSHA256(encrypt,pm.environment.get(\\\"key\\\")).toString(CryptoJS.enc.Hex);\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\" Apos isso, é possivel gerar o link de autorização utilizando os seguintes parâmetros: host + path + partner_id + redirect url + timestamp + sign:\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\",\"linkHref\":\"https://partner.shopeemobile.com/api/v2/shop/auth_partner\"},\"data\":\"https://partner.shopeemobile.com/api/v2/shop/auth_partner\"},{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"?partner_id=XXXX&&redirect=\"},{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\",\"linkHref\":\"https://www.google.com/\"},\"data\":\"https://www.shopee.com.br/\"},{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\",\"linkHref\":\"https://www.baidu.com/&timestamp=1594897040&sign=90c12d3932f3826f0c72242e1ec6492eec9a1298658f41f7a9469664801c4e5a\"},\"data\":\"&timestamp=1659992253&sign=bc123339c962718c49dc8362c9eb73836bc881d5f0fbf1002b89947bf738dc55\"}]},{\"name\":\"paragraph\"},{\"name\":\"heading2\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"1.3) Fazendo a autorização de loja\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"A URL de autorização expira em 5 minutos (devido à expiração do timestamp), após o qual você precisa gerar uma nova URL. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Depois de clicar na URL de autorização, o vendedor terá 3 minutos para selecionar 'BR' e inserir o username e senha da loja na Shopee.\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"⚠️ Atenção!\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"data\":\"Se ele não fizer login a tempo, será retornado um erro de \\\"operation overtime\\\" e o vendedor precisará abrir uma nova url (ao invés de atualizar a página).\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Depois de fazer login, o vendedor será redirecionado para uma tela de confirmação de todos os acessos que o seu App terá na loja dele. O vendedor deverá clicar em 'Confirm Authorization'.\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Em seguida, o vendedor será redirecionado para a url que você colocou no parâmetro 'redirect'. \"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Code:\"},{\"data\":\" usado para obter o access token, só pode ser usado uma vez e é válido por 10 minutos. Caso o access token não seja obtido em 10 minutos, é preciso que o vendedor faça esse processo de novo para gerar outro code;\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Shop id:\"},{\"data\":\" id da loja que autorizou o seu App.\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Exemplo: \"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Ambiente Live\"},{\"data\":\":\"},{\"attributes\":{\"linkHref\":\"https://shopee.com.br/?code=b5207f56565418145879f76398498&shop_id=399772507\"},\"data\":\" \"},{\"attributes\":{\"bold\":true,\"linkHref\":\"https://shopee.com.br/?code=b5207f56565418145879f76398498&shop_id=399772507\"},\"data\":\"https://sua_url.com.br/?code=b5207f56565418145879f76398498&shop_id=399772507\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Ambiente de Teste\"},{\"data\":\":\"},{\"attributes\":{\"bold\":true,\"linkHref\":\"https://test-stable.shopee.com.br/?code=b5207f56565418145879f7637d54684&shop_id=1258\"},\"data\":\" https://test-stable.sua_url.com.br/ code=b5207f56565418145879f7637d54684&shop_id=1258\"}]},{\"name\":\"paragraph\"},{\"name\":\"heading2\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"2)GetAccessToken\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Use essa chamada POST com o code e shop_id recebido na autorização de loja para obter o access_token e o refresh_token.\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\" O access_token é dinâmico e válido por 4 horas, para atualizar o access_token, basta utilizar a chamada ao RefreshAccessToken. A imagem abaixo demonstra como funciona fluxo de criação e uso do Access Token.\"}]},{\"attributes\":{\"src\":\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=3WhXEEybQEkbDHUyXoiPhvOjVc3MO8P%2FELaW9NhT2QXNZnFqfjWtZCREkirCwKDOZkDopxaJS%2B%2BBNkBGdqTdGg%3D%3D&image_type=jpg\",\"width\":\"841px\"},\"name\":\"imageBlock\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"1 - Informação necessária para a chamada ao GetAccessToken:\"}]},{\"name\":\"table\",\"children\":[{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Parâmetro\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Exemplo\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Descrição/Detalhes\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"attributes\":{\"rowspan\":2},\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Host\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"linkHref\":\"https://partner.shopeemobile.com/\"},\"data\":\"https://partner.shopeemobile.com\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Live environment\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"linkHref\":\"https://partner.test-stable.shopeemobile.com/\"},\"data\":\"https://partner.test-stable.shopeemobile.com\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Test-stable/Sandbox environment\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Partner_id\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"XXXX\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Informação disponível na Open Platform > Console > APP\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Shop_id\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"XXXX\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Shop_id da loja que autorizou o APP.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Path\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"/api/v2/auth/token/get\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\"}]}]},{\"name\":\"tableRow\",\"children\":[{\"attributes\":{\"rowspan\":2},\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Secret Key\"}]},{\"name\":\"paragraph\",\"children\":[{\"name\":\"softBreak\"},{\"data\":\" \"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Live Key\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Live environment. Informação disponível na Open Platform > Console > APP - Live key\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Test Key\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Test-Stable/Sandbox environment. Informação disponível na Open Platform > Console > APP - Test key\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Sign\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"bc123339c962718c49dc8362c9eb73836bc881d5f0fbf1002b89947bf738dc55\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"String criptografada: HMAC-SHA256\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Code\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"6c4b4f544f7a416c6x4b6e6e734b7168\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Gerado após a autorização da loja ao APP.\"}]}]}]}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"2 - Criar a string base para gerar o sign com a seguinte sequência de valores: partner_id + path + timestamp\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Ex: XXX/api/v2/auth/token/get1659992253\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"3 - Exemplo de cURL para chamada ao GetAccessToken (ambiente de teste/sandbox):\"}]},{\"attributes\":{\"language\":\"java\"},\"name\":\"codeBlock\",\"children\":[{\"data\":\"curl --location --request POST\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"'https://partner.test-stable.shopeemobile.com/api/v2/auth/token/get?partner_id=XXXX&timestamp=1659992253&sign=bc123339c962718c49dc8362c9eb73836bc881d5f0fbf1002b89947bf738dc55 \\\\\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"--header 'Content-Type: application/json' \\\\\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"--data-raw '{\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"\\\"code\\\": \\\"6c4b4f544f7a416c6x4b6e6e734b7168\\\",\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"\\\"shop_id\\\": XXXX,\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"\\\"partner_id\\\": XXXX\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"}'\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Code\"},{\"data\":\": usado para obter o access token, só pode ser usado uma vez e é válido por 10 minutos. Caso o access token não seja obtido em 10 minutos, é preciso que o vendedor faça esse processo de novo para gerar outro code;\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Shop id\"},{\"data\":\": id da loja que autorizou o seu App;\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Partner id\"},{\"data\":\": id encontrado nos\"},{\"attributes\":{\"linkHref\":\"https://open.shopee.com/myconsole/management/app\"},\"data\":\" \"},{\"attributes\":{\"bold\":true,\"linkHref\":\"https://open.shopee.com/myconsole/management/app\"},\"data\":\"detalhes\"},{\"data\":\" do seu App.\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"4 - Exemplo de resposta para a chamada ao GetAccessToken:\"}]},{\"attributes\":{\"language\":\"java\"},\"name\":\"codeBlock\",\"children\":[{\"data\":\"{\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"\\\"refresh_token\\\":\\\"525745615465726cxxx1444d416c5859\\\",\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"\\\"access_token\\\":\\\"6a555055544c7974xxxx0616e79664e73\\\",\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"\\\"expire_in\\\":14384,\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"\\\"request_id\\\":\\\"9930ba006b1153xxxxxx4b34aae0e52\\\",\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"\\\"error\\\":\\\"\\\",\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"\\\"message\\\":\\\"\\\"\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"}\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"access_token\"},{\"data\":\": pode ser usado mais de uma vez, válido por 4 horas;\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"expire_in\"},{\"data\":\": depois de quantos segundos o access_token deixará de ser válido;\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"refresh_token\"},{\"data\":\": só pode ser usado uma vez e é válido por 30 dias. É usado na chamada RefreshAccessToken para atualizar o access_token.\"}]},{\"name\":\"heading2\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"3.1)RefreshAccessToken\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Depois que o access_token expirar, atualize utilizando a chamada ao RefreshAccessToken, a chamada irá gerar um novo set de access_token e refresh_token válidos. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"O novo refresh_token deve ser utilizado na próxima chamada para essa API para que um novo set de tokens seja gerado. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Além disso, o refresh_token pode ser utilizado, apenas, uma única vez e tem v\"},{\"attributes\":{\"bold\":true},\"data\":\"alidade de 30 dias\"},{\"data\":\". Caso o novo refresh_token seja perdido ou tenha passado de sua validade, deverá realizar a autorização da loja novamente.\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"1 - Informação necessária para a chamada ao RefreshAccessToken:\"}]},{\"name\":\"table\",\"children\":[{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Parâmetro\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Exemplo\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Descrição/Detalhes\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"attributes\":{\"rowspan\":2},\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Host\"}]},{\"name\":\"paragraph\",\"children\":[{\"name\":\"softBreak\"},{\"data\":\" \"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"linkHref\":\"https://partner.shopeemobile.com/\"},\"data\":\"https://partner.shopeemobile.com\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Live environment\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"linkHref\":\"https://partner.test-stable.shopeemobile.com/\"},\"data\":\"https://partner.test-stable.shopeemobile.com\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Test-stable/Sandbox environment\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Partner_id\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"XXXX\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Informação disponível na Open Platform > Console > APP\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Shop_id\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"XXXX\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Shop_id da loja que autorizou o APP.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Path\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"/api/v2/auth/access_token/get\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\"}]}]},{\"name\":\"tableRow\",\"children\":[{\"attributes\":{\"rowspan\":2},\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Secret Key\"}]},{\"name\":\"paragraph\",\"children\":[{\"name\":\"softBreak\"},{\"data\":\" \"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Live Key\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Live environment.Informação disponível na Open Platform > Console > APP - Live key\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Test Key\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Test-Stable/Sandbox environment. Informação disponível na Open Platform > Console > APP - Test key\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"attributes\":{\"rowspan\":2},\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"refresh_token\"}]},{\"name\":\"paragraph\",\"children\":[{\"name\":\"softBreak\"},{\"data\":\" \"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"bc123339c962718c49dc8362c9eb73836bc881d5f0fbf1002b89947bf738dc55\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"String criptografada: HMAC-SHA256\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"525745615465726cxxx1444d416c5859\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Gerado na chamada do GetAccessToken, ou na última chamada ao RefreshAccessToken.\"}]}]}]}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"2 - Criar a string base para gerar o sign com a seguinte sequência de valores: partner_id + path + timestamp\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Ex: XXX/api/v2/auth/access_token/get1659992253\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"3 - Exemplo de URL para chamada ao RefreshAccessToken (ambiente de teste/sandbox):\"}]},{\"attributes\":{\"language\":\"java\"},\"name\":\"codeBlock\",\"children\":[{\"data\":\"curl --location --request POST\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"'https://partner.test-stable.shopeemobile.com/api/v2/auth/access_token/get?partner_id=XXXX&timestamp=1659992253&sign=bc123339c962718c49dc8362c9eb73836bc881d5f0fbf1002b89947bf738dc55 \\\\\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"--header 'Content-Type: application/json' \\\\\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"--data-raw '{\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"\\\"refresh_token\\\": \\\"525745615465726cxxx1444d416c5859\\\",\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"\\\"shop_id\\\": XXXX,\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"\\\"partner_id\\\": XXXX\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"}\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Refresh token\"},{\"data\":\": só pode ser usado uma vez e é válido por 30 dias.\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Shop id\"},{\"data\":\": id da loja que autorizou o seu App.\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Partner id\"},{\"data\":\": id encontrado nos\"},{\"attributes\":{\"linkHref\":\"https://open.shopee.com/myconsole/management/app\"},\"data\":\" \"},{\"attributes\":{\"bold\":true,\"linkHref\":\"https://open.shopee.com/myconsole/management/app\"},\"data\":\"detalhes\"},{\"data\":\" do seu App.\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"4 - Exemplo de resposta para a chamada ao RefreshAccessToken:\"}]},{\"attributes\":{\"language\":\"java\"},\"name\":\"codeBlock\",\"children\":[{\"data\":\"{\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"\\\"partner_id\\\":XXXX,\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"\\\"refresh_token\\\":\\\"724a5045557axxx42704d774d4e4b62\\\",\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"\\\"access_token\\\":\\\"686b624c737xxx171774c6f75677046\\\",\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"\\\"expire_in\\\":14400,\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"\\\"request_id\\\":\\\"XXXX\\\",\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"\\\"error\\\":\\\"\\\",\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"\\\"message\\\":\\\"\\\",\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"\\\"shop_id\\\":XXXX\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"}\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"access_token\"},{\"data\":\": pode ser usado mais de uma vez, válido por 4 horas;\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"expire_in\"},{\"data\":\": depois de quantos segundos o access_token deixará de ser válido;\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"refresh_token\"},{\"data\":\": só pode ser usado uma vez e é válido por 30 dias.\"}]},{\"name\":\"heading2\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Entenda os erros mais comuns retornados na chamada ao GetAccessToken\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"1 - Error message: \\\"Invalid code\\\".\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"a. Motivo: Ocorre, geralmente, quando o código enviado já foi utilizado antes. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"b. Parâmetro: code\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"c. Solução: Gerar um novo código através do processo de autorização, ou utilizar o código correto.\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"2 - Error message: \\\"Invalid partner id\\\".\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"a. Motivo: Ocorre quando o partner id utilizado não é válido. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"b. Parâmetro: partner_id\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"c. Solução: Verificar o partner id que está sendo utilizado na chamada.\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"3 - Error message: \\\"Invalid shop id\\\".\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"a. Motivo: Ocorre quando o shop id utilizado não corresponde com a loja que gerou o código. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"b. Parâmetro: shop_id\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"c. Solução: Verificar o shop id que está sendo utilizado na chamada.\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"4 - Error message: \\\"Invalid timestamp\\\".\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"a. Motivo: Timestamp já passou da validade de 5 minutos. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"b. Parâmetro: timestamp\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"c. Solução: Utilizar um timestamp dentro da sua validade (5 minutos).\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"5 - Error message: \\\"Wrong sign.\\\".\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"a. Motivo: O sign gerado está incorreto, geralmente o path na hora de gerar o sign está incorreto. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"b. Parâmetro: sign\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"c. Solução: Verificar se o path na montagem da string do sign está correto: \\\"/api/v2/auth/token/get\\\".\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"6 - Error message: \\\"No permission. Please inform seller to complete the Seller Registration on Shopee Seller Center first, then this shop can call for this API.\\\".\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"a. Motivo: O vendedor ainda não finalizou o cadastro na Central do Vendedor. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"b. Parâmetro: N/A\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"c. Solução: Solicitar ao vendedor que finalize o cadastro correspondente ao shop id na Central do Vendedor.\"}]},{\"name\":\"heading2\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Erros mais comuns retornados na chamada ao RefreshAccessToken\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"1 - Error message: \\\"Your refresh_token expired.\\\"\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"a. Motivo: Ocorre, geralmente, quando o refresh_token já expirou, ele tem validade de 30 dias. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"b. Parâmetro: refresh_token\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"c. Solução: Caso não tenha um refresh_token novo, deverá realizar o procedimento de autorização novamente.\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"2 - Error message: \\\"Invalid refresh_token.\\\"\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"a. Motivo: Ocorre quando o refresh_token utilizado não é válido, geralmente o refresh_token já foi utilizado anteriormente, ele é um token de uso único.\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"b. Parâmetro: refresh_token\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"c. Solução: Verificar se o refresh_token utilizado é o token gerado mais recente. Deve sempre utilizar o último gerado.\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"3 - Error message: \\\"Partner and shop has no linked.\\\"\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"a. Motivo: Ocorre quando o shop_id utilizado na chamada não está conectado com o partner_id. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"b. Parâmetro: shop_id e partner_id\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"c. Solução: Verificar o shop id e o partner id que estão sendo utilizados na chamada.\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"4 - Error message: \\\"This shop account has been banned. Permissions for shop authorization and API calls have been suspended until the shop account is restored.\\\"\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"a. Motivo: Loja está banida. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"b. Parâmetro: N/A\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"c. Solução: Verificar status da loja com o seller.\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"5 - Error message: \\\"Wrong sign.\\\"\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"a. Motivo: O sign gerado está incorreto, geralmente o path na hora de gerar o sign está incorreto. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"b. Parâmetro: sign\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"c. Solução: Verificar se o path na montagem da string do sign está correto: \\\"/api/v2/auth/access_token/get\\\".\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"6 - Error message: \\\"No permission. Please inform seller to complete the Seller Registration on Shopee Seller Center first, then this shop can call for this API.\\\"\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"a. Motivo: O vendedor ainda não finalizou o cadastro na Central do Vendedor. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"b. Parâmetro: N/A\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"c. Solução: Solicitar ao vendedor que finalize o cadastro correspondente ao shop id na Central do Vendedor.\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"7 - Error message: \\\"error params\\\".\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"a. Motivo: Request body/payload com nome de parâmetro incorreto. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"b. Parâmetro: refresh_token, shop_id, partner_id\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"c. Solução: Verificar qual dos parâmetros utilizado no request está incorreto e corrigir.\"}]},{\"name\":\"paragraph\"}]",
  "content": "<h2><strong>Autorização de loja</strong></h2><p>Na Shopee, para que um App (criado no<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://open.shopee.com/myconsole/management/app\"> <strong>Open Platform Console</strong></a>) possa ter acesso aos dados de uma loja pela API, é preciso que ela dê autorização à esse App.</p><p>Para isso, <strong>crie um link de autorização seguindo as regras abaixo</strong>, forneça ele ao vendedor e oriente ele a autorizar. Este link deve ser colocado na interface do seu sistema para a conveniência do vendedor</p><p>&nbsp;</p><h2><strong>1.1) Como criar a URL de autorização de loja?</strong></h2><p>.A URL deve ser criada seguindo o padrão: <strong>host + path + partner id + timestamp + redirect url + sign</strong>.</p><ul><li><strong>Host</strong></li><li><i>Ambiente Live: 'https://partner.shopeemobile.com'</i></li><li><i>Ambiente de Teste: 'https://partner.test-stable.shopeemobile.com'</i></li><li><strong>Path: </strong>'/api/v2/shop/auth_partner'</li><li><strong>Partner id:</strong> id encontrado nos<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://open.shopee.com/myconsole/management/app\"> <strong>detalhes</strong></a> do seu App;</li><li><strong>Timestamp: </strong>uint32, válido por 5 minutos;</li><li><strong>Redirect url: </strong>essa será a página em que o vendedor será redirecionado depois de completar a autorização;</li><li><strong>Sign: </strong>string criptografada gerada seguindo as regras do próximo item.</li></ul><p>Confira o exemplo abaixo:&nbsp;</p><ul><li><strong>Ambiente Live</strong>:<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://partner.shopeemobile.com/api/v2/shop/auth_partner?partner_id=844010&amp;timestamp=1615240504&amp;sign=5f60ea34c2c395d3c9de03f8c3b23d4ddfce9ab237f3dd8ec1273492b0574056&amp;redirect=https://shopee.com.br\"> <strong>https://partner.shopeemobile.com/api/v2/shop/auth_partner?partner_id=844010&amp;timestamp=1615240504&amp;redirect=https://shopee.com.br&amp;sign=5f60ea34c2c395d3c9de03f8c3b23d4ddfce9ab237f3dd8ec1273492b0574056</strong></a></li><li><strong>Ambiente de Teste:</strong><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://partner.shopeemobile.com/api/v2/shop/auth_partner?partner_id=844010&amp;timestamp=1615240504&amp;sign=5f60ea34c2c395d3c9de03f8c3b23d4ddfce9ab237f3dd8ec1273492b0574056&amp;redirect=https://shopee.com.br\"> <strong>https://partner.test-stable.shopeemobile.com/api/v2/shop/auth_partner?partner_id=844010&amp;timestamp=1615240504&amp;redirect=https://test-stable.shopee.com.br&amp;sign=5f60ea34c2c395d3c9de03f8c3b23d4ddfce9ab237f3dd8ec1273492b0574056</strong></a></li></ul><h2><strong>1.2) Como gerar o sign de autorização de loja?</strong></h2><p>Para calcular o Sign, crie uma string com 'partner_id+ path+timestamp' (nessa ordem e os mesmos usados na construção da url)&nbsp; - Ex: XXX/api/v2/shop/auth_partner1659992253</p><p>Criptografe essa string usando HMAC-SHA256 e o partner key encontrado nos detalhes do seu App como chave.</p><p>&nbsp;</p><p><strong>Exemplo:</strong> Ferramenta online que consegue encriptar a mensagem com algoritmo HMAC-SHA256:<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://codebeautify.org/hmac-generator\"> <strong>https://codebeautify.org/hmac-generator</strong></a></p><p>Basta preencher os campos de forma correta.</p><p><strong>Exemplo de código em Python:: </strong>Código utilizado no \"pre-request\" do Postman, para gerar o sign:</p><pre><code class=\"java hljs\">// Define partner_id\n\npm.environment.set(\"partnerId\",XXXX);\n\n\n\n\n//set timestamp\n\nvardate=newDate(); //generate timestamp\n\nvartime=parseInt(date.getTime()/1000); //decrease the size of timestamp\n\npm.environment.set(\"currentTime\", time); //set timestamp on environment variable\n\n\n\n\n//define path\n\npm.environment.set(\"path\",'/api/v2/shop/auth_partner');\n\n\n\n\n//define secret key to encrypt\n\npm.environment.set(\"key\",bc123339c962718c49dc8362c9eb73836bc881d5f0fbf1002b89947bf738dc55);\n\n\n\n\n// string_base = partnerId+path+timestamp - define string encrypt\n\nvarstring_base=pm.environment.get(\"partnerId\")+pm.environment.get(\"path\")+pm.environment.get(\"currentTime\");\n\n\n\n\n//call library\n\nvarCryptoJS=require(\"crypto-js\");\n\n\n\n\n//hmac encrypt partnerId+path+timestamp and set it as \"sign\" variable\n\nvarsign=CryptoJS.HmacSHA256(encrypt,pm.environment.get(\"key\")).toString(CryptoJS.enc.Hex);\n\n\n</code></pre><p>&nbsp;</p><p>&nbsp;Apos isso, é possivel gerar o link de autorização utilizando os seguintes parâmetros: host + path + partner_id + redirect url + timestamp + sign:</p><p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://partner.shopeemobile.com/api/v2/shop/auth_partner\"><span style=\"background-color:rgb(255,255,255);\">https://partner.shopeemobile.com/api/v2/shop/auth_partner</span></a><span style=\"background-color:rgb(255,255,255);\">?partner_id=XXXX&amp;&amp;redirect=</span><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://www.google.com/\"><span style=\"background-color:rgb(255,255,255);\">https://www.shopee.com.br/</span></a><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://www.baidu.com/&amp;timestamp=1594897040&amp;sign=90c12d3932f3826f0c72242e1ec6492eec9a1298658f41f7a9469664801c4e5a\"><span style=\"background-color:rgb(255,255,255);\">&amp;timestamp=1659992253&amp;sign=bc123339c962718c49dc8362c9eb73836bc881d5f0fbf1002b89947bf738dc55</span></a></p><p>&nbsp;</p><h2><strong>1.3) Fazendo a autorização de loja</strong></h2><p>A URL de autorização expira em 5 minutos (devido à expiração do timestamp), após o qual você precisa gerar uma nova URL.&nbsp;</p><p>Depois de clicar na URL de autorização, o vendedor terá 3 minutos para selecionar 'BR' e inserir o username e senha da loja na Shopee.</p><p><strong>⚠️ Atenção!</strong></p><ul><li>Se ele não fizer login a tempo, será retornado um erro de \"operation overtime\" e o vendedor precisará abrir uma nova url (ao invés de atualizar a página).</li></ul><p>Depois de fazer login, o vendedor será redirecionado para uma tela de confirmação de todos os acessos que o seu App terá na loja dele. O vendedor deverá clicar em 'Confirm Authorization'.</p><p>Em seguida, o vendedor será redirecionado para a url que você colocou no parâmetro 'redirect'.&nbsp;</p><ul><li><strong>Code:</strong> usado para obter o access token, só pode ser usado uma vez e é válido por 10 minutos. Caso o access token não seja obtido em 10 minutos, é preciso que o vendedor faça esse processo de novo para gerar outro code;</li><li><strong>Shop id:</strong> id da loja que autorizou o seu App.</li></ul><p>Exemplo:&nbsp;</p><ul><li><strong>Ambiente Live</strong>:<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://shopee.com.br/?code=b5207f56565418145879f76398498&amp;shop_id=399772507\"> <strong>https://sua_url.com.br/?code=b5207f56565418145879f76398498&amp;shop_id=399772507</strong></a></li><li><strong>Ambiente de Teste</strong>:<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://test-stable.shopee.com.br/?code=b5207f56565418145879f7637d54684&amp;shop_id=1258\"><strong> https://test-stable.sua_url.com.br/ code=b5207f56565418145879f7637d54684&amp;shop_id=1258</strong></a></li></ul><p>&nbsp;</p><h2><strong>2)GetAccessToken</strong></h2><p>Use essa chamada POST com o code e shop_id recebido na autorização de loja para obter o access_token e o refresh_token.</p><p>&nbsp;O access_token é dinâmico e válido por 4 horas, para atualizar o access_token, basta utilizar a chamada ao RefreshAccessToken. A imagem abaixo demonstra como funciona fluxo de criação e uso do Access Token.</p><figure class=\"image image_resized\" style=\"width:841px;\"><img src=\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=3WhXEEybQEkbDHUyXoiPhvOjVc3MO8P%2FELaW9NhT2QXNZnFqfjWtZCREkirCwKDOZkDopxaJS%2B%2BBNkBGdqTdGg%3D%3D&amp;image_type=jpg\"></figure><p>1 - Informação necessária para a chamada ao GetAccessToken:</p><figure class=\"table\"><table><tbody><tr><td><strong>Parâmetro</strong></td><td><strong>Exemplo</strong></td><td><strong>Descrição/Detalhes</strong></td></tr><tr><td rowspan=\"2\">Host</td><td><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://partner.shopeemobile.com/\">https://partner.shopeemobile.com</a></td><td>Live environment</td></tr><tr><td><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://partner.test-stable.shopeemobile.com/\">https://partner.test-stable.shopeemobile.com</a></td><td>Test-stable/Sandbox environment</td></tr><tr><td>Partner_id</td><td>XXXX</td><td>Informação disponível na Open Platform &gt; Console &gt; APP</td></tr><tr><td>Shop_id</td><td>XXXX</td><td>Shop_id da loja que autorizou o APP.</td></tr><tr><td>Path</td><td>/api/v2/auth/token/get</td><td>&nbsp;</td></tr><tr><td rowspan=\"2\"><p>Secret Key</p><p><br>&nbsp;</p></td><td>Live Key</td><td>Live environment. Informação disponível na Open Platform &gt; Console &gt; APP - Live key</td></tr><tr><td>Test Key</td><td>Test-Stable/Sandbox environment. Informação disponível na Open Platform &gt; Console &gt; APP - Test key</td></tr><tr><td>Sign</td><td>bc123339c962718c49dc8362c9eb73836bc881d5f0fbf1002b89947bf738dc55</td><td>String criptografada: HMAC-SHA256</td></tr><tr><td>Code</td><td>6c4b4f544f7a416c6x4b6e6e734b7168</td><td>Gerado após a autorização da loja ao APP.</td></tr></tbody></table></figure><p>2 - Criar a string base para gerar o sign com a seguinte sequência de valores: partner_id + path + timestamp</p><p>Ex: XXX/api/v2/auth/token/get1659992253</p><p>3 - Exemplo de cURL para chamada ao GetAccessToken (ambiente de teste/sandbox):</p><pre><code class=\"java hljs\">curl --location --request POST\n\n'https://partner.test-stable.shopeemobile.com/api/v2/auth/token/get?partner_id=XXXX&amp;timestamp=1659992253&amp;sign=bc123339c962718c49dc8362c9eb73836bc881d5f0fbf1002b89947bf738dc55 \\\n\n--header 'Content-Type: application/json' \\\n\n--data-raw '{\n\n\"code\": \"6c4b4f544f7a416c6x4b6e6e734b7168\",\n\n\"shop_id\": XXXX,\n\n\"partner_id\": XXXX\n\n}'</code></pre><ul><li><strong>Code</strong>: usado para obter o access token, só pode ser usado uma vez e é válido por 10 minutos. Caso o access token não seja obtido em 10 minutos, é preciso que o vendedor faça esse processo de novo para gerar outro code;</li><li><strong>Shop id</strong>: id da loja que autorizou o seu App;</li><li><strong>Partner id</strong>: id encontrado nos<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://open.shopee.com/myconsole/management/app\"> <strong>detalhes</strong></a> do seu App.</li></ul><p>&nbsp;</p><p>4 - Exemplo de resposta para a chamada ao GetAccessToken:</p><pre><code class=\"java hljs\">{\n\n\"refresh_token\":\"525745615465726cxxx1444d416c5859\",\n\n\"access_token\":\"6a555055544c7974xxxx0616e79664e73\",\n\n\"expire_in\":14384,\n\n\"request_id\":\"9930ba006b1153xxxxxx4b34aae0e52\",\n\n\"error\":\"\",\n\n\"message\":\"\"\n\n}</code></pre><ul><li><strong>access_token</strong>: pode ser usado mais de uma vez, válido por 4 horas;</li><li><strong>expire_in</strong>: depois de quantos segundos o access_token deixará de ser válido;</li><li><strong>refresh_token</strong>: só pode ser usado uma vez e é válido por 30 dias. É usado na chamada RefreshAccessToken para atualizar o access_token.</li></ul><h2><strong>3.1)RefreshAccessToken</strong></h2><p>&nbsp;</p><p>Depois que o access_token expirar, atualize utilizando a chamada ao RefreshAccessToken, a chamada irá gerar um novo set de access_token e refresh_token válidos.&nbsp;</p><p>O novo refresh_token deve ser utilizado na próxima chamada para essa API para que um novo set de tokens seja gerado.&nbsp;</p><p>Além disso, o refresh_token pode ser utilizado, apenas, uma única vez e tem v<strong>alidade de 30 dias</strong>. Caso o novo refresh_token seja perdido ou tenha passado de sua validade, deverá realizar a autorização da loja novamente.</p><p>&nbsp;</p><p>1 - Informação necessária para a chamada ao RefreshAccessToken:</p><figure class=\"table\"><table><tbody><tr><td><strong>Parâmetro</strong></td><td><strong>Exemplo</strong></td><td><strong>Descrição/Detalhes</strong></td></tr><tr><td rowspan=\"2\"><p>Host</p><p><br>&nbsp;</p></td><td><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://partner.shopeemobile.com/\">https://partner.shopeemobile.com</a></td><td>Live environment</td></tr><tr><td><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://partner.test-stable.shopeemobile.com/\">https://partner.test-stable.shopeemobile.com</a></td><td>Test-stable/Sandbox environment</td></tr><tr><td>Partner_id</td><td>XXXX</td><td>Informação disponível na Open Platform &gt; Console &gt; APP</td></tr><tr><td>Shop_id</td><td>XXXX</td><td>Shop_id da loja que autorizou o APP.</td></tr><tr><td>Path</td><td>/api/v2/auth/access_token/get</td><td>&nbsp;</td></tr><tr><td rowspan=\"2\"><p>Secret Key</p><p><br>&nbsp;</p></td><td>Live Key</td><td>Live environment.Informação disponível na Open Platform &gt; Console &gt; APP - Live key</td></tr><tr><td>Test Key</td><td>Test-Stable/Sandbox environment. Informação disponível na Open Platform &gt; Console &gt; APP - Test key</td></tr><tr><td rowspan=\"2\"><p>refresh_token</p><p><br>&nbsp;</p></td><td>bc123339c962718c49dc8362c9eb73836bc881d5f0fbf1002b89947bf738dc55</td><td>String criptografada: HMAC-SHA256</td></tr><tr><td>525745615465726cxxx1444d416c5859</td><td>Gerado na chamada do GetAccessToken, ou na última chamada ao RefreshAccessToken.</td></tr></tbody></table></figure><p>2 - Criar a string base para gerar o sign com a seguinte sequência de valores: partner_id + path + timestamp</p><p>Ex: XXX/api/v2/auth/access_token/get1659992253</p><p>&nbsp;</p><p>3 - Exemplo de URL para chamada ao RefreshAccessToken (ambiente de teste/sandbox):</p><pre><code class=\"java hljs\">curl --location --request POST\n\n'https://partner.test-stable.shopeemobile.com/api/v2/auth/access_token/get?partner_id=XXXX&amp;timestamp=1659992253&amp;sign=bc123339c962718c49dc8362c9eb73836bc881d5f0fbf1002b89947bf738dc55 \\\n\n--header 'Content-Type: application/json' \\\n\n--data-raw '{\n\n\"refresh_token\": \"525745615465726cxxx1444d416c5859\",\n\n\"shop_id\": XXXX,\n\n\"partner_id\": XXXX\n\n}</code></pre><ul><li><strong>Refresh token</strong>: só pode ser usado uma vez e é válido por 30 dias.</li><li><strong>Shop id</strong>: id da loja que autorizou o seu App.</li><li><strong>Partner id</strong>: id encontrado nos<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://open.shopee.com/myconsole/management/app\"> <strong>detalhes</strong></a> do seu App.</li></ul><p>&nbsp;</p><p>4 - Exemplo de resposta para a chamada ao RefreshAccessToken:</p><pre><code class=\"java hljs\">{\n\n\"partner_id\":XXXX,\n\n\"refresh_token\":\"724a5045557axxx42704d774d4e4b62\",\n\n\"access_token\":\"686b624c737xxx171774c6f75677046\",\n\n\"expire_in\":14400,\n\n\"request_id\":\"XXXX\",\n\n\"error\":\"\",\n\n\"message\":\"\",\n\n\"shop_id\":XXXX\n\n}</code></pre><ul><li><strong>access_token</strong>: pode ser usado mais de uma vez, válido por 4 horas;</li><li><strong>expire_in</strong>: depois de quantos segundos o access_token deixará de ser válido;</li><li><strong>refresh_token</strong>: só pode ser usado uma vez e é válido por 30 dias.</li></ul><h2><strong>Entenda os erros mais comuns retornados na chamada ao GetAccessToken</strong></h2><p><strong>1 - Error message: \"Invalid code\".</strong></p><p>a. Motivo: Ocorre, geralmente, quando o código enviado já foi utilizado antes.&nbsp;</p><p>b. Parâmetro: code</p><p>c. Solução: Gerar um novo código através do processo de autorização, ou utilizar o código correto.</p><p><strong>2 - Error message: \"Invalid partner id\".</strong></p><p>a. Motivo: Ocorre quando o partner id utilizado não é válido.&nbsp;</p><p>b. Parâmetro: partner_id</p><p>c. Solução: Verificar o partner id que está sendo utilizado na chamada.</p><p><strong>3 - Error message: \"Invalid shop id\".</strong></p><p>a. Motivo: Ocorre quando o shop id utilizado não corresponde com a loja que gerou o código.&nbsp;</p><p>b. Parâmetro: shop_id</p><p>c. Solução: Verificar o shop id que está sendo utilizado na chamada.</p><p><strong>4 - Error message: \"Invalid timestamp\".</strong></p><p>a. Motivo: Timestamp já passou da validade de 5 minutos.&nbsp;</p><p>b. Parâmetro: timestamp</p><p>c. Solução: Utilizar um timestamp dentro da sua validade (5 minutos).</p><p><strong>5 - Error message: \"Wrong sign.\".</strong></p><p>a. Motivo: O sign gerado está incorreto, geralmente o path na hora de gerar o sign está incorreto.&nbsp;</p><p>b. Parâmetro: sign</p><p>c. Solução: Verificar se o path na montagem da string do sign está correto: \"/api/v2/auth/token/get\".</p><p><strong>6 - Error message: \"No permission. Please inform seller to complete the Seller Registration on Shopee Seller Center first, then this shop can call for this API.\".</strong></p><p>a. Motivo: O vendedor ainda não finalizou o cadastro na Central do Vendedor.&nbsp;</p><p>b. Parâmetro: N/A</p><p>c. Solução: Solicitar ao vendedor que finalize o cadastro correspondente ao shop id na Central do Vendedor.</p><h2><strong>Erros mais comuns retornados na chamada ao RefreshAccessToken</strong></h2><p><strong>1 - Error message: \"Your refresh_token expired.\"</strong></p><p>a. Motivo: Ocorre, geralmente, quando o refresh_token já expirou, ele tem validade de 30 dias.&nbsp;</p><p>b. Parâmetro: refresh_token</p><p>c. Solução: Caso não tenha um refresh_token novo, deverá realizar o procedimento de autorização novamente.</p><p><strong>2 - Error message: \"Invalid refresh_token.\"</strong></p><p>a. Motivo: Ocorre quando o refresh_token utilizado não é válido, geralmente o refresh_token já foi utilizado anteriormente, ele é um token de uso único.</p><p>b. Parâmetro: refresh_token</p><p>c. Solução: Verificar se o refresh_token utilizado é o token gerado mais recente. Deve sempre utilizar o último gerado.</p><p><strong>3 - Error message: \"Partner and shop has no linked.\"</strong></p><p>a. Motivo: Ocorre quando o shop_id utilizado na chamada não está conectado com o partner_id.&nbsp;</p><p>b. Parâmetro: shop_id e partner_id</p><p>c. Solução: Verificar o shop id e o partner id que estão sendo utilizados na chamada.</p><p><strong>4 - Error message: \"This shop account has been banned. Permissions for shop authorization and API calls have been suspended until the shop account is restored.\"</strong></p><p>a. Motivo: Loja está banida.&nbsp;</p><p>b. Parâmetro: N/A</p><p>c. Solução: Verificar status da loja com o seller.</p><p><strong>5 - Error message: \"Wrong sign.\"</strong></p><p>a. Motivo: O sign gerado está incorreto, geralmente o path na hora de gerar o sign está incorreto.&nbsp;</p><p>b. Parâmetro: sign</p><p>c. Solução: Verificar se o path na montagem da string do sign está correto: \"/api/v2/auth/access_token/get\".</p><p><strong>6 - Error message: \"No permission. Please inform seller to complete the Seller Registration on Shopee Seller Center first, then this shop can call for this API.\"</strong></p><p>a. Motivo: O vendedor ainda não finalizou o cadastro na Central do Vendedor.&nbsp;</p><p>b. Parâmetro: N/A</p><p>c. Solução: Solicitar ao vendedor que finalize o cadastro correspondente ao shop id na Central do Vendedor.</p><p><strong>7 - Error message: \"error params\".</strong></p><p>a. Motivo: Request body/payload com nome de parâmetro incorreto.&nbsp;</p><p>b. Parâmetro: refresh_token, shop_id, partner_id</p><p>c. Solução: Verificar qual dos parâmetros utilizado no request está incorreto e corrigir.</p><p>&nbsp;</p>",
  "status": 1,
  "language_code": "en",
  "language_list": [
    "en"
  ]
}