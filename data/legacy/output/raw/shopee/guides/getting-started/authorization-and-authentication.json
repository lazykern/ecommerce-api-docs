{
  "category_name": "Getting Started",
  "category_id": 50,
  "document_id": 20,
  "release_time": 1660804210,
  "update_time": 1760688052,
  "operator": "grace.li@shopee.com",
  "title": "Authorization and Authentication",
  "raw_content": "[{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Authorization is an important step to using Open API. You need to be authorized by the seller in order for your App to call non-public APIs required for shop management.\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"You will be authenticated based on the public parameters passed to Open API. If the authentication fails, your call will fail and an error will be returned.\"}]},{\"name\":\"table\",\"children\":[{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"⚠️\"},{\"attributes\":{\"bold\":true},\"data\":\" Note \"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Authorization Validity\"}]},{\"attributes\":{\"blockIndent\":\"indent-1\",\"blockIndentLevel\":1},\"name\":\"paragraph\",\"children\":[{\"data\":\"Each authorization can be set for a period of up to \"},{\"attributes\":{\"bold\":true},\"data\":\"365 days\"},{\"data\":\". Once the authorization expires, you will need to contact the seller to re-authorize your App.\"}]},{\"attributes\":{\"blockIndent\":\"indent-1\",\"blockIndentLevel\":1},\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Note:\"},{\"data\":\" The validity period is optional, but cannot exceed 365 days.\"}]},{\"name\":\"paragraph\"},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"SIP Shops Authorization\"}]},{\"attributes\":{\"blockIndent\":\"indent-1\",\"blockIndentLevel\":1},\"name\":\"paragraph\",\"children\":[{\"data\":\"When a SIP Primary shop grants authorization to an App, all its SIP Affiliate shops will automatically be granted authorization as well.\"}]},{\"attributes\":{\"blockIndent\":\"indent-1\",\"blockIndentLevel\":1},\"name\":\"paragraph\",\"children\":[{\"data\":\"Please note that SIP Affiliate shops have \"},{\"attributes\":{\"underline\":true,\"linkHref\":\"https://open.shopee.com/faq?top=162&sub=166&page=1&faq=214\"},\"data\":\"limited API calling permissions\"},{\"data\":\" compared to the Primary shop.\"}]}]}]}]},{\"name\":\"heading1\",\"children\":[{\"attributes\":{\"fontColor\":\"#2B2C2D\"},\"data\":\"The authorization process\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"There are 4 steps to complete authorization: \"},{\"attributes\":{\"bold\":true},\"data\":\"Generating the authorization link\"},{\"data\":\", \"},{\"attributes\":{\"bold\":true},\"data\":\"acquiring authorizations from shop(s)\"},{\"data\":\", \"},{\"attributes\":{\"bold\":true},\"data\":\"using the authorization code\"},{\"data\":\", and \"},{\"attributes\":{\"bold\":true},\"data\":\"getting and refreshing the access_token\"},{\"data\":\". \"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"These will be explained in detail below, along with information on what to prepare before authorization, details of the authorization process, and how to use the information returned after authorization to pass the authentication of the platform. \"}]},{\"name\":\"heading2\",\"children\":[{\"attributes\":{\"fontColor\":\"#2B2C2D\"},\"data\":\"Generating the authorization link\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontColor\":\"#2B2C2D\"},\"data\":\"For Seller in House System App, you can log in Open Platform> App list> click Authorize> fill in Redirect URL to generate an authorization link. \"}]},{\"attributes\":{\"src\":\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=AwcI9KDq2kAasxHvc5J41P2%2FdxfAcI3okQeHbiqAUNk94RGGSxJB0feXlyNMS8S9YERegWzV4ki4AMlGULhn3Q%3D%3D&image_type=png\",\"width\":\"864px\"},\"name\":\"imageBlock\"},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"For all type of App, you need to create an authorization link with the following specifications. The authorization link comprises a \"},{\"attributes\":{\"bold\":true},\"data\":\"fixed authorization URL\"},{\"data\":\" and \"},{\"attributes\":{\"bold\":true},\"data\":\"other required parameters\"},{\"data\":\".\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Fixed authorization URL:\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Production Environment：\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"https://partner.shopeemobile.com/api/v2/shop/auth_partner\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"（Chinese Mainland）https://openplatform.shopee.cn/api/v2/shop/auth_partner\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Sandbox test environment: \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"https://openplatform.sandbox.test-stable.shopee.sg/api/v2/shop/auth_partner \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"（Chinese Mainland） https://openplatform.sandbox.test-stable.shopee.cn/api/v2/shop/auth_partner\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Other required parameters:\"}]},{\"attributes\":{\"headingRows\":1},\"name\":\"table\",\"children\":[{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Parameter name\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Type\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Description\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"sign\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"string\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"The signature obtained by sign base string (order: partner_id, api path, timestamp...) HMAC-SHA256 hashing with the partner_key.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"partner_id\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"int\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"partner_id obtained from the App.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"timestamp\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"int\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"This needs to be the same as the timestamp used in the sign base string. The timestamp is only valid for 5 minutes.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"redirect\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"string\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"The URL to which the webpage redirects to after authorization is completed. This can be any URL, such as your company's official website.\"}]}]}]}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Calculating the sign parameter\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"The sign parameter is not only a component of the authorization link, but also a parameter used for authentication each time it is called. This section will explain how to create a sign base string and calculate the authentication signature through HMAC-SHA256.\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Creating a sign base string\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"There are 3 types of APIs that require the use of different parameters to create the sign base string. (consistent with its common parameters).\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"Concatenate the API path (without host) and the common parameters below into a single sign base string in the following order:\"}]},{\"name\":\"paragraph\"},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"For Shop APIs\"},{\"data\":\": partner_id, api path, timestamp, access_token, shop_id\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"For Merchant APIs\"},{\"data\":\": partner_id, api path, timestamp, access_token, merchant_id\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"For Public APIs\"},{\"data\":\": partner_id, api path, timestamp\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Calculating the authentication signature\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Use HMAC-SHA256 to hash the sign base string, and use the partner key as the encryption key. The hexadecimal all-lowercase hash value is the authentication signature.\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Python Code Demo:\"}]},{\"attributes\":{\"language\":\"python\"},\"name\":\"codeBlock\",\"children\":[{\"data\":\"import hmac\"},{\"name\":\"softBreak\"},{\"data\":\"import json\"},{\"name\":\"softBreak\"},{\"data\":\"import time\"},{\"name\":\"softBreak\"},{\"data\":\"import requests\"},{\"name\":\"softBreak\"},{\"data\":\"import hashlib\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"def shop_auth():\"},{\"name\":\"softBreak\"},{\"data\":\"    timest = int(time.time())\"},{\"name\":\"softBreak\"},{\"data\":\"    host = \\\"https://partner.shopeemobile.com\\\"\"},{\"name\":\"softBreak\"},{\"data\":\"    path = \\\"/api/v2/shop/auth_partner\\\"\"},{\"name\":\"softBreak\"},{\"data\":\"    redirect_url = \\\"https://www.baidu.com/\\\"\"},{\"name\":\"softBreak\"},{\"data\":\"    partner_id = 80001\"},{\"name\":\"softBreak\"},{\"data\":\"    tmp = \\\"test....\\\"\"},{\"name\":\"softBreak\"},{\"data\":\"    partner_key = tmp.encode()\"},{\"name\":\"softBreak\"},{\"data\":\"    tmp_base_string = \\\"%s%s%s\\\" % (partner_id, path, timest)\"},{\"name\":\"softBreak\"},{\"data\":\"    base_string = tmp_base_string.encode()\"},{\"name\":\"softBreak\"},{\"data\":\"    sign = hmac.new(partner_key, base_string, hashlib.sha256).hexdigest()\"},{\"name\":\"softBreak\"},{\"data\":\"    ##generate api\"},{\"name\":\"softBreak\"},{\"data\":\"    url = host + path + \\\"?partner_id=%s&timestamp=%s&sign=%s&redirect=%s\\\" % (partner_id, timest, sign, redirect_url)\"},{\"name\":\"softBreak\"},{\"data\":\"    print(url)\"},{\"name\":\"softBreak\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Go Code Demo:\"}]},{\"attributes\":{\"language\":\"go\"},\"name\":\"codeBlock\",\"children\":[{\"data\":\"func auth_shop(){\"},{\"name\":\"softBreak\"},{\"data\":\"\\ttimest := strconv.FormatInt(time.Now().Unix(),10)\"},{\"name\":\"softBreak\"},{\"data\":\"\\thost := \\\"https://openplatform.sandbox.test-stable.shopee.sg\\\"\"},{\"name\":\"softBreak\"},{\"data\":\"\\tpath := \\\"/api/v2/shop/auth_partner\\\"\"},{\"name\":\"softBreak\"},{\"data\":\"\\tredirectUrl := \\\"https://www.baidu.com/\\\"\"},{\"name\":\"softBreak\"},{\"data\":\"\\tpartnerId := strconv.Itoa(2006566)\"},{\"name\":\"softBreak\"},{\"data\":\"\\tpartnerKey := \\\"1391fd986fe8ec7569bebed75b0c33ee35eb5a305bed7038657a5cd5f75b1c88\\\"\"},{\"name\":\"softBreak\"},{\"data\":\"\\tbaseString := fmt.Sprintf(\\\"%s%s%s\\\", partnerId,path,timest)\"},{\"name\":\"softBreak\"},{\"data\":\"\\th := hmac.New(sha256.New,[]byte(partnerKey))\"},{\"name\":\"softBreak\"},{\"data\":\"\\th.Write([]byte(baseString))\"},{\"name\":\"softBreak\"},{\"data\":\"\\tsign := hex.EncodeToString(h.Sum(nil))\"},{\"name\":\"softBreak\"},{\"data\":\"\\turl := fmt.Sprintf(host+path+\\\"?partner_id=%s&timestamp=%s&sign=%s&redirect=%s\\\", partnerId,timest,sign, redirectUrl)\"},{\"name\":\"softBreak\"},{\"data\":\"\\tfmt.Println(url)\"},{\"name\":\"softBreak\"},{\"data\":\"}\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Java Code Demo:\"}]},{\"attributes\":{\"language\":\"java\"},\"name\":\"codeBlock\",\"children\":[{\"data\":\"    //generate auth url\"},{\"name\":\"softBreak\"},{\"data\":\"    public static void shop_auth(){\"},{\"name\":\"softBreak\"},{\"data\":\"        long timest = System.currentTimeMillis() / 1000L;\"},{\"name\":\"softBreak\"},{\"data\":\"        String host = \\\"https://partner.shopeemobile.com\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"        String path = \\\"/api/v2/shop/auth_partner\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"        String redirect_url = \\\"https://www.baidu.com/\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"        long partner_id = 123456L;\"},{\"name\":\"softBreak\"},{\"data\":\"        String tmp_partner_key = \\\"...\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"        String tmp_base_string = String.format(\\\"%s%s%s\\\", partner_id, path, timest);\"},{\"name\":\"softBreak\"},{\"data\":\"        byte[] partner_key;\"},{\"name\":\"softBreak\"},{\"data\":\"        byte[] base_string;\"},{\"name\":\"softBreak\"},{\"data\":\"        String sign = \\\"\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"        try {\"},{\"name\":\"softBreak\"},{\"data\":\"            base_string = tmp_base_string.getBytes(\\\"UTF-8\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            partner_key = tmp_partner_key.getBytes(\\\"UTF-8\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            Mac mac = Mac.getInstance(\\\"HmacSHA256\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            SecretKeySpec secret_key = new SecretKeySpec(partner_key, \\\"HmacSHA256\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            mac.init(secret_key);\"},{\"name\":\"softBreak\"},{\"data\":\"            sign = String.format(\\\"%064x\\\",new BigInteger(1,mac.doFinal(base_string)));\"},{\"name\":\"softBreak\"},{\"data\":\"        } catch (Exception e) {\"},{\"name\":\"softBreak\"},{\"data\":\"            e.printStackTrace();\"},{\"name\":\"softBreak\"},{\"data\":\"        }\"},{\"name\":\"softBreak\"},{\"data\":\"        String url = host + path + String.format(\\\"?partner_id=%s&timestamp=%s&sign=%s&redirect=%s\\\", partner_id,timest, sign, redirect_url);\"},{\"name\":\"softBreak\"},{\"data\":\"        System.out.println(url);\"},{\"name\":\"softBreak\"},{\"data\":\"    }\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"PHP Code Demo:\"}]},{\"attributes\":{\"language\":\"php\"},\"name\":\"codeBlock\",\"children\":[{\"data\":\"<?php \"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"function authShop($partnerId, $partnerKey) {   \"},{\"name\":\"softBreak\"},{\"data\":\"    global $host;\"},{\"name\":\"softBreak\"},{\"data\":\"    $path = \\\"/api/v2/shop/auth_partner\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"    $redirectUrl = \\\"https://www.baidu.com/\\\";\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"    $timest = time();\"},{\"name\":\"softBreak\"},{\"data\":\"    $baseString = sprintf(\\\"%s%s%s\\\", $partnerId, $path, $timest);\"},{\"name\":\"softBreak\"},{\"data\":\"    $sign = hash_hmac('sha256', $baseString, $partnerKey);\"},{\"name\":\"softBreak\"},{\"data\":\"    $url = sprintf(\\\"%s%s?partner_id=%s&timestamp=%s&sign=%s&redirect=%s\\\", $host, $path, $partnerId, $timest, $sign, $redirectUrl);\"},{\"name\":\"softBreak\"},{\"data\":\"    return $url;\"},{\"name\":\"softBreak\"},{\"data\":\"}\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"$host=\\\"https://openplatform.sandbox.test-stable.shopee.sg\\\";\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"$partnerId = 847892;\"},{\"name\":\"softBreak\"},{\"data\":\"$partnerKey = \\\"57615053704d6470644f554a78656d50484143644964436a5568777544524579\\\";\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"echo authShop($partnerId, $partnerKey);\"},{\"name\":\"softBreak\"},{\"data\":\"?>\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Examples of authorization links\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Here are examples of authorization links in the production and sandbox test environments for your reference.\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Production Environment:\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"underline\":true},\"data\":\"https://partner.shopeemobile.com/api/v2/shop/auth_partner?partner_id=10090&redirect=https://open.shopee.com&timestamp=1594897040&sign=90c12d3932f3826f0c72242e1ec6492eec9a1298658f41f7a9469664801c4e5a\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\",\"fontColor\":\"rgb(51,51,51)\"},\"data\":\"（Chinese Mainland）\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"underline\":true},\"data\":\"https://\"},{\"attributes\":{\"underline\":true,\"fontBackgroundColor\":\"rgb(255,255,255)\",\"fontColor\":\"rgb(51,51,51)\"},\"data\":\"openplatform.shopee.cn/\"},{\"attributes\":{\"underline\":true},\"data\":\"api/v2/shop/auth_partner?partner_id=10090&redirect=https://open.shopee.com&timestamp=1594897040&sign=90c12d3932f3826f0c72242e1ec6492eec9a1298658f41f7a9469664801c4e5a\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Sandbox test environment:\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"underline\":true},\"data\":\"https://openplatform.sandbox.test-stable.shopee.sg/api/v2/shop/auth_partner?partner_id=1000016&redirect=https://open.shopee.com&timestamp=1657254106&sign=47e8712bb89dbc7c7f71eb690310d089b951801cb104763981de5b3dacc3f07c\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\",\"fontColor\":\"rgb(51,51,51)\"},\"data\":\"（Chinese Mainland）\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"underline\":true,\"fontBackgroundColor\":\"rgb(255,255,255)\",\"fontColor\":\"rgb(51,51,51)\"},\"data\":\"https://openplatform.sandbox.test-stable.shopee.cn/\"},{\"attributes\":{\"underline\":true},\"data\":\"api/v2/shop/auth_partner?partner_id=10090&redirect=https://open.shopee.com&timestamp=1594897040&sign=90c12d3932f3826f0c72242e1ec6492eec9a1298658f41f7a9469664801c4e5a\"}]},{\"name\":\"table\",\"children\":[{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"⚠️\"},{\"attributes\":{\"bold\":true},\"data\":\" Note\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"The timestamp used to calculate the sign is only valid for 5 minutes. After the timestamp and the sign expire, the authorization link will no longer be valid, and you need to generate a new link.\"}]}]}]}]},{\"name\":\"heading2\",\"children\":[{\"attributes\":{\"fontColor\":\"#2B2C2D\"},\"data\":\"Acquiring authorizations from shop(s)\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"After you share the authorization link with the seller, the seller needs to log in to their account, fill in the verification code sent to their mobile phone, and enter the authorization page.\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"The seller can use a \"},{\"attributes\":{\"bold\":true},\"data\":\"shop account\"},{\"data\":\" to authorize a single shop or a \"},{\"attributes\":{\"bold\":true},\"data\":\"main account\"},{\"data\":\" to authorize multiple merchants/shops. Sub-accounts cannot be used to log in to the authorization page.\"}]},{\"name\":\"table\",\"children\":[{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"⚠️\"},{\"attributes\":{\"bold\":true},\"data\":\" Note\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Seller In-house System\"},{\"data\":\" App types can only be authorized to access data from the seller’s own shop. You must also log in to the developer account too.\"}]}]}]}]},{\"name\":\"heading3\",\"children\":[{\"attributes\":{\"bold\":true,\"fontColor\":\"#2B2C2D\"},\"data\":\"Authorizing from a shop account \"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"1. The seller fills in their login details and selects \"},{\"attributes\":{\"bold\":true},\"data\":\"Log In\"},{\"data\":\".\"}]},{\"attributes\":{\"src\":\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=KBASnrCAFko2mX9S0T89U%2FSoT4CJMyAjC1M1ZSkJQ1ZNGsMzm0ze%2F7IWwW0sm2fwR4Oe0IYvVEzUYBwXbEwctA%3D%3D&image_type=png\",\"width\":\"811px\"},\"name\":\"imageBlock\"},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"2. The seller fills in the verification code sent to their mobile phone and selects \"},{\"attributes\":{\"bold\":true,\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"Verify\"},{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\".\"}]},{\"attributes\":{\"src\":\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=UCU7KvaUzAaB2HKVcZFMWNv%2F%2BQ5uquLHwmjRaybfr8fXkrjrGmyT37Nf4MbtS7bbV2Ac5hCEZLXfPrlPFBAf2Q%3D%3D&image_type=png\",\"width\":\"740px\"},\"name\":\"imageBlock\"},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"3. Upon logging in, the seller selects \"},{\"attributes\":{\"bold\":true},\"data\":\"Confirm Authorization\"},{\"data\":\".\"}]},{\"attributes\":{\"src\":\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=m%2FSS%2FEpwlZ3gfVkoRF1djvREdKCwVR9jmnlr%2F27y6Di2GBlc4SLS6to8TZpplR%2BcgzYukxpFREyhox1zH5ZdvA%3D%3D&image_type=png\",\"width\":\"944px\"},\"name\":\"imageBlock\"},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"4. After authorization, the front-end page will redirect to the redirect URL in your authorization link:\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"underline\":true,\"linkHref\":\"https://open.shopee.com/?code=xxxxxxxxxx&shop_id=xxxxxx\"},\"data\":\"https://open.shopee.com/?code=xxxxxxxxxx&shop_id=xxxxxx\"}]},{\"name\":\"heading3\",\"children\":[{\"attributes\":{\"bold\":true,\"fontColor\":\"#2B2C2D\"},\"data\":\"Authorizing from a main account\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"1. To log in to a main account, the seller selects \"},{\"attributes\":{\"bold\":true},\"data\":\"Switch to Sub Account\"},{\"data\":\" on the login page.\"}]},{\"attributes\":{\"src\":\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=LYatUvT%2Fl8dbnhsm%2BMmkTQmzN%2F5EtrHRXU1xvTFwDYiY9j4Nbvs6%2FZas7rxt5tOp57UEYs3r%2BCU2uYIDPd90sA%3D%3D&image_type=png\",\"width\":\"759px\"},\"name\":\"imageBlock\"},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"2. The seller can then fill in their login details and select \"},{\"attributes\":{\"bold\":true},\"data\":\"Log In\"},{\"data\":\".\"}]},{\"attributes\":{\"src\":\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=54kRFFgx%2FwQKfDOSLWx%2FxA%2FS8gkeyp2%2FxZ%2BYlQdiBeaSNwpe%2BhFefIE0jzeh%2Fh1a15BGXOB7v%2BliFgZVKPA5%2BA%3D%3D&image_type=png\",\"width\":\"841px\"},\"name\":\"imageBlock\"},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"3. The seller selects the shops that need to be authorized.\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Note: For cross border sellers, If you need to call the merchant’s API, please remind the seller to select the \"},{\"attributes\":{\"bold\":true},\"data\":\"Auth Merchant\"},{\"data\":\" checkbox.\"}]},{\"attributes\":{\"src\":\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=clJ%2FGp14b1rbcJubC%2FO9DPSOfrTNvHIdy9PaV%2FdiRYEjg3LGHYATF5k%2BgKl9ljsVyCrHhnnJa69TKjIRDUXKNA%3D%3D&image_type=png\",\"width\":\"912px\"},\"name\":\"imageBlock\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Local main account authorization: \"}]},{\"attributes\":{\"src\":\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=sU6aM4h8CpO5ULk%2FFPPkwoDldBRTslGuYAAjPFyeVOHjeyHsPcpV8JFjLqg0FGlBSvF%2FyYG2KECYJfphOUxDcw%3D%3D&image_type=png\",\"width\":\"941px\"},\"name\":\"imageBlock\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"4. The seller selects \"},{\"attributes\":{\"bold\":true},\"data\":\"Confirm Authorization\"},{\"data\":\" to confirm their selection.\"}]},{\"attributes\":{\"src\":\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=M1jgkj8787sKyfBsBvnvHTQ26QPOPmse%2FMAGZSnZNGsFmvCvHYC0HajOw9bEIPJu7pHgo2dyrwFJqhrP1%2BWMXQ%3D%3D&image_type=png\"},\"name\":\"imageBlock\"},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"5. After authorization, the front-end page will redirect to the redirect URL in your authorization link:\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"underline\":true,\"linkHref\":\"https://open.shopee.com/?code=xxxxxx&main_account_id=xxxxxx\"},\"data\":\"https://open.shopee.com/?code=xxxxxx&main_account_id=xxxxxx\"}]},{\"name\":\"heading2\",\"children\":[{\"attributes\":{\"fontColor\":\"#2B2C2D\"},\"data\":\"Using the authorization code\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"After the seller has granted authorization, Open Platform will return the authorization code to the callback address redirect URL. You can then use the code to get access_token for the first time.\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"If authorization was done on a \"},{\"attributes\":{\"bold\":true},\"data\":\"shop account\"},{\"data\":\", a code and shop_id will be returned in the redirect URL.\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"If authorization was done on a \"},{\"attributes\":{\"bold\":true},\"data\":\"main account\"},{\"data\":\", a code and main_account_id will be returned in the redirect URL.\"}]},{\"name\":\"paragraph\"},{\"attributes\":{\"headingRows\":1},\"name\":\"table\",\"children\":[{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Parameter name\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Type\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Description\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"code\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"string\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Returned when the call is successful. This code is used to obtain access_token and refresh_token. It is valid for only once and expires after 10 minutes.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"shop_id\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"int\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"The ID of the shop that just granted authorization to your App. Returned after authorization was done on a shop account. \"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"main_account_id\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"int\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"The ID of the main account that just granted authorization to your shop. . Returned after authorization was done on a main account.\"}]}]}]}]},{\"name\":\"heading2\",\"children\":[{\"attributes\":{\"fontColor\":\"#2B2C2D\"},\"data\":\"Getting and refreshing the access_token\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"The access_token is a dynamic token, and you need to pass access_token to call non-public APIs. Each access_token is valid for 4 hours and can be used multiple times within 4 hours. However, you need to refresh the access token by calling RefreshAccessToken before it expires in order to obtain a new access_token.\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Refresh_token is a parameter used to refresh access_token. Each refresh_token is valid for 30 days.\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"⚠️\"},{\"attributes\":{\"bold\":true},\"data\":\" Note\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"The access_token and refresh_token of each shop_id and merchant_id need to be saved separately.\"}]},{\"name\":\"heading3\",\"children\":[{\"attributes\":{\"bold\":true,\"fontColor\":\"#2B2C2D\"},\"data\":\"GetAccesstoken\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"After successful authorization, use the code and shop_id or main_account_id in the redirect URL to call this API. This helps you obtain the shop_id, merchant_id, access_token and refresh_token.\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Path:\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Production environment:\"},{\"attributes\":{\"linkHref\":\"https://partner.shopeemobile.com/api/v1/shop/auth_partner\"},\"data\":\" \"},{\"attributes\":{\"underline\":true},\"data\":\"https://partner.shopeemobile.com/api/v2/auth/token/get\"},{\"data\":\" \"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\",\"fontColor\":\"rgb(51,51,51)\"},\"data\":\"（Chinese Mainland）：\"},{\"attributes\":{\"underline\":true},\"data\":\"https://\"},{\"attributes\":{\"underline\":true,\"fontBackgroundColor\":\"rgb(255,255,255)\",\"fontColor\":\"rgb(51,51,51)\"},\"data\":\"openplatform.shopee.cn\"},{\"attributes\":{\"underline\":true},\"data\":\"/api/v2/auth/token/get \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Sandbox environment: \"},{\"attributes\":{\"underline\":true},\"data\":\"https://openplatform.sandbox.test-stable.shopee.sg/api/v2/auth/token/get\"},{\"data\":\" \"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\",\"fontColor\":\"rgb(51,51,51)\"},\"data\":\"（Chinese Mainland）：\"},{\"attributes\":{\"underline\":true,\"fontBackgroundColor\":\"rgb(255,255,255)\",\"fontColor\":\"rgb(51,51,51)\"},\"data\":\"https://openplatform.sandbox.test-stable.shopee.cn\"},{\"attributes\":{\"underline\":true},\"data\":\"/api/v2/auth/token/get \"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Request method: \"},{\"attributes\":{\"bold\":true},\"data\":\"POST\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Common parameters:\"}]},{\"attributes\":{\"headingRows\":1},\"name\":\"table\",\"children\":[{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Parameter name\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Type\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Required\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Description\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"sign\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"string\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"True\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"The signature obtained by sign base string (order: partner_id, api path, timestamp...) HMAC-SHA256 hashing with the partner_key.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"partner_id\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"int\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"True\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"The partner_id obtained from the App. This partner_id is put into the query.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"timestamp\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"int\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"True\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Timestamp, valid for 5 minutes.\"}]}]}]}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Request parameters:\"}]},{\"attributes\":{\"headingRows\":1},\"name\":\"table\",\"children\":[{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Parameter name\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Type\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Required\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Description\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"code\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"string\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"True\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"The code in the redirect URL after authorization. It is only valid once and expires after 10 minutes.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"partner_id\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"int\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"True\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"The partner_id obtained from the App. This partner_id is put into the request body.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"shop_id\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"int\"}]}]},{\"attributes\":{\"rowspan\":2},\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"True, input 1 only.\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"For the shop_id authorized to you, either the shop_id or main_account_id can be selected as the input parameter.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"main_account_id\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"int\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"For the main_account_id authorized to you, either the shop_id or main_account_id can be selected as the input parameter.\"}]}]}]}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Response parameters:\"}]},{\"attributes\":{\"headingRows\":1},\"name\":\"table\",\"children\":[{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Parameter name\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Type\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Description\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"request_id\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"string\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"ID of API requests; always returned. Used to diagnose problems.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"error\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"string\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Error codes for API requests; always returned. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"When the API call is successful, the error code returned is empty.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"refresh_token\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"string\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Returned when the API call is successful. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Use refresh_token to get a new access_token. Valid for each shop_id and merchant_id respectively, for 30 days.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"access_token\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"string\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Returned when the API call is successful. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"A dynamic token that can be used multiple times and expires after 4 hours.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"expire_in\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"int\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Returned when the API call is successful. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"The validity period of the access_token, in seconds.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"message\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"string\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Always returned. Provides detailed error information.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"merchant_id_list\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"int[ ]\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Returned when there is main_account_id in the input parameter, including all the merchant_ids authorized this time under the main account.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"shop_id_list\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"int[ ]\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Returned when there is main_account_id in the input parameter, including all shop_ids authorized this time under the main account.\"}]}]}]}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"Python Code Demo:\"}]},{\"attributes\":{\"language\":\"python\"},\"name\":\"codeBlock\",\"children\":[{\"data\":\"print(shop_auth())\"},{\"name\":\"softBreak\"},{\"data\":\"# first time request token\"},{\"name\":\"softBreak\"},{\"data\":\"def get_token_shop_level(code, partner_id, tmp_partner_key, shop_id):\"},{\"name\":\"softBreak\"},{\"data\":\"    timest = int(time.time())\"},{\"name\":\"softBreak\"},{\"data\":\"    host = \\\"https://partner.shopeemobile.com\\\"\"},{\"name\":\"softBreak\"},{\"data\":\"    path = \\\"/api/v2/auth/token/get\\\"\"},{\"name\":\"softBreak\"},{\"data\":\"    body = {\\\"code\\\": code, \\\"shop_id\\\": shop_id, \\\"partner_id\\\": partner_id}\"},{\"name\":\"softBreak\"},{\"data\":\"    tmp_base_string = \\\"%s%s%s\\\" % (partner_id, path, timest)\"},{\"name\":\"softBreak\"},{\"data\":\"    base_string = tmp_base_string.encode()\"},{\"name\":\"softBreak\"},{\"data\":\"    partner_key = tmp_partner_key.encode()\"},{\"name\":\"softBreak\"},{\"data\":\"    sign = hmac.new(partner_key, base_string, hashlib.sha256).hexdigest()\"},{\"name\":\"softBreak\"},{\"data\":\"    url = host + path + \\\"?partner_id=%s&timestamp=%s&sign=%s\\\" % (partner_id, timest, sign)\"},{\"name\":\"softBreak\"},{\"data\":\"    # print(url)\"},{\"name\":\"softBreak\"},{\"data\":\"    headers = {\\\"Content-Type\\\": \\\"application/json\\\"}\"},{\"name\":\"softBreak\"},{\"data\":\"    resp = requests.post(url, json=body, headers=headers)\"},{\"name\":\"softBreak\"},{\"data\":\"    ret = json.loads(resp.content)\"},{\"name\":\"softBreak\"},{\"data\":\"    access_token = ret.get(\\\"access_token\\\")\"},{\"name\":\"softBreak\"},{\"data\":\"    new_refresh_token = ret.get(\\\"refresh_token\\\")\"},{\"name\":\"softBreak\"},{\"data\":\"    return access_token, new_refresh_token\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"def get_token_account_level(code, partner_id, tmp_partner_key, main_account_id):\"},{\"name\":\"softBreak\"},{\"data\":\"    timest = int(time.time())\"},{\"name\":\"softBreak\"},{\"data\":\"    host = \\\"https://openplatform.sandbox.test-stable.shopee.sg\\\"\"},{\"name\":\"softBreak\"},{\"data\":\"    path = \\\"/api/v2/auth/token/get\\\"\"},{\"name\":\"softBreak\"},{\"data\":\"    body = {\\\"code\\\": code, \\\"main_account_id\\\": main_account_id, \\\"partner_id\\\": partner_id}\"},{\"name\":\"softBreak\"},{\"data\":\"    tmp_base_string = \\\"%s%s%s\\\" % (partner_id, path, timest)\"},{\"name\":\"softBreak\"},{\"data\":\"    base_string = tmp_base_string.encode()\"},{\"name\":\"softBreak\"},{\"data\":\"    partner_key = tmp_partner_key.encode()\"},{\"name\":\"softBreak\"},{\"data\":\"    sign = hmac.new(partner_key, base_string, hashlib.sha256).hexdigest()\"},{\"name\":\"softBreak\"},{\"data\":\"    url = host + path + \\\"?partner_id=%s&timestamp=%s&sign=%s\\\" % (partner_id, timest, sign)\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"    headers = {\\\"Content-Type\\\": \\\"application/json\\\"}\"},{\"name\":\"softBreak\"},{\"data\":\"    resp = requests.post(url, json=body, headers=headers)\"},{\"name\":\"softBreak\"},{\"data\":\"    ret = json.loads(resp.content)\"},{\"name\":\"softBreak\"},{\"data\":\"    access_token = ret.get(\\\"access_token\\\")\"},{\"name\":\"softBreak\"},{\"data\":\"    new_refresh_token = ret.get(\\\"refresh_token\\\")\"},{\"name\":\"softBreak\"},{\"data\":\"    return access_token, new_refresh_token\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Java\"},{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\" Code Demo:\"}]},{\"attributes\":{\"language\":\"java\"},\"name\":\"codeBlock\",\"children\":[{\"data\":\"import com.alibaba.fastjson.JSONObject;\"},{\"name\":\"softBreak\"},{\"data\":\"import javax.crypto.Mac;\"},{\"name\":\"softBreak\"},{\"data\":\"import javax.crypto.spec.SecretKeySpec;\"},{\"name\":\"softBreak\"},{\"data\":\"import java.io.*;\"},{\"name\":\"softBreak\"},{\"data\":\"import java.math.BigInteger;\"},{\"name\":\"softBreak\"},{\"data\":\"import java.nio.charset.StandardCharsets;\"},{\"name\":\"softBreak\"},{\"data\":\"import java.text.ParseException;\"},{\"name\":\"softBreak\"},{\"data\":\"import java.util.HashMap;\"},{\"name\":\"softBreak\"},{\"data\":\"import java.net.HttpURLConnection;\"},{\"name\":\"softBreak\"},{\"data\":\"import java.net.URL;\"},{\"name\":\"softBreak\"},{\"data\":\"import java.util.Map;\"},{\"name\":\"softBreak\"},{\"data\":\"import com.alibaba.fastjson.JSON;\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"public class shop_auth {\"},{\"name\":\"softBreak\"},{\"data\":\"    public static void main(String[] args) throws ParseException, IOException {\"},{\"name\":\"softBreak\"},{\"data\":\"        shop_auth();\"},{\"name\":\"softBreak\"},{\"data\":\"        //get_token_shop_level(code,partner_id,partner_key,shop_id);\"},{\"name\":\"softBreak\"},{\"data\":\"    }\"},{\"name\":\"softBreak\"},{\"data\":\"    //generate auth url\"},{\"name\":\"softBreak\"},{\"data\":\"    public static void shop_auth(){\"},{\"name\":\"softBreak\"},{\"data\":\"        long timest = System.currentTimeMillis() / 1000L;\"},{\"name\":\"softBreak\"},{\"data\":\"        String host = \\\"https://partner.shopeemobile.com\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"        String path = \\\"/api/v2/shop/auth_partner\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"        String redirect_url = \\\"https://www.baidu.com/\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"        long partner_id = 123456L;\"},{\"name\":\"softBreak\"},{\"data\":\"        String tmp_partner_key = \\\"...\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"        String tmp_base_string = String.format(\\\"%s%s%s\\\", partner_id, path, timest);\"},{\"name\":\"softBreak\"},{\"data\":\"        byte[] partner_key;\"},{\"name\":\"softBreak\"},{\"data\":\"        byte[] base_string;\"},{\"name\":\"softBreak\"},{\"data\":\"        String sign = \\\"\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"        try {\"},{\"name\":\"softBreak\"},{\"data\":\"            base_string = tmp_base_string.getBytes(\\\"UTF-8\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            partner_key = tmp_partner_key.getBytes(\\\"UTF-8\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            Mac mac = Mac.getInstance(\\\"HmacSHA256\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            SecretKeySpec secret_key = new SecretKeySpec(partner_key, \\\"HmacSHA256\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            mac.init(secret_key);\"},{\"name\":\"softBreak\"},{\"data\":\"            sign = String.format(\\\"%064x\\\",new BigInteger(1,mac.doFinal(base_string)));\"},{\"name\":\"softBreak\"},{\"data\":\"        } catch (Exception e) {\"},{\"name\":\"softBreak\"},{\"data\":\"            e.printStackTrace();\"},{\"name\":\"softBreak\"},{\"data\":\"        }\"},{\"name\":\"softBreak\"},{\"data\":\"        String url = host + path + String.format(\\\"?partner_id=%s&timestamp=%s&sign=%s&redirect=%s\\\", partner_id,timest, sign, redirect_url);\"},{\"name\":\"softBreak\"},{\"data\":\"        System.out.println(url);\"},{\"name\":\"softBreak\"},{\"data\":\"    }\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"    //shop request for access token for the first time\"},{\"name\":\"softBreak\"},{\"data\":\"    public static String[] get_token_shop_level(String code,long partner_id,String tmp_partner_key,long shop_id) throws ParseException,IOException{\"},{\"name\":\"softBreak\"},{\"data\":\"        String[] res = new String[2];\"},{\"name\":\"softBreak\"},{\"data\":\"        long timest = System.currentTimeMillis() / 1000L;\"},{\"name\":\"softBreak\"},{\"data\":\"        String host = \\\"https://partner.shopeemobile.com\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"        String path = \\\"/api/v2/auth/token/get\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"        String tmp_base_string = String.format(\\\"%s%s%s\\\", partner_id, path, timest);\"},{\"name\":\"softBreak\"},{\"data\":\"        byte[] partner_key;\"},{\"name\":\"softBreak\"},{\"data\":\"        byte[] base_string;\"},{\"name\":\"softBreak\"},{\"data\":\"        BigInteger sign = null;\"},{\"name\":\"softBreak\"},{\"data\":\"        String result = \\\"\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"        try {\"},{\"name\":\"softBreak\"},{\"data\":\"            base_string = tmp_base_string.getBytes(\\\"UTF-8\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            partner_key = tmp_partner_key.getBytes(\\\"UTF-8\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            Mac mac = Mac.getInstance(\\\"HmacSHA256\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            SecretKeySpec secret_key = new SecretKeySpec(partner_key, \\\"HmacSHA256\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            mac.init(secret_key);\"},{\"name\":\"softBreak\"},{\"data\":\"            sign = new BigInteger(1,mac.doFinal(base_string));\"},{\"name\":\"softBreak\"},{\"data\":\"        } catch (Exception e) {\"},{\"name\":\"softBreak\"},{\"data\":\"            e.printStackTrace();\"},{\"name\":\"softBreak\"},{\"data\":\"        }\"},{\"name\":\"softBreak\"},{\"data\":\"        String tmp_url = host + path + String.format(\\\"?partner_id=%s&timestamp=%s&sign=%s\\\", partner_id,timest, String.format(\\\"%032x\\\",sign));\"},{\"name\":\"softBreak\"},{\"data\":\"        URL url = new URL(tmp_url);\"},{\"name\":\"softBreak\"},{\"data\":\"        HttpURLConnection conn = null;\"},{\"name\":\"softBreak\"},{\"data\":\"        PrintWriter out = null;\"},{\"name\":\"softBreak\"},{\"data\":\"        BufferedReader in = null;\"},{\"name\":\"softBreak\"},{\"data\":\"        try {\"},{\"name\":\"softBreak\"},{\"data\":\"            conn = (HttpURLConnection) url.openConnection();\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setRequestMethod(\\\"POST\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setDoOutput(true);\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setDoInput(true);\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setConnectTimeout(30000);\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setReadTimeout(10000);\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setRequestProperty(\\\"Content-Type\\\", \\\"application/json\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setRequestProperty(\\\"Accept\\\", \\\"application/json\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            Map<String,Object> map = new HashMap<>();\"},{\"name\":\"softBreak\"},{\"data\":\"            map.put(\\\"code\\\",code);\"},{\"name\":\"softBreak\"},{\"data\":\"            map.put(\\\"shop_id\\\",shop_id);\"},{\"name\":\"softBreak\"},{\"data\":\"            map.put(\\\"partner_id\\\",partner_id);\"},{\"name\":\"softBreak\"},{\"data\":\"            String json = JSON.toJSONString(map);\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.connect();\"},{\"name\":\"softBreak\"},{\"data\":\"            out = new PrintWriter(conn.getOutputStream());\"},{\"name\":\"softBreak\"},{\"data\":\"            out.print(json);\"},{\"name\":\"softBreak\"},{\"data\":\"            out.flush();\"},{\"name\":\"softBreak\"},{\"data\":\"            in = new BufferedReader(new InputStreamReader(conn.getInputStream()));\"},{\"name\":\"softBreak\"},{\"data\":\"            String line = \\\"\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"            while((line=in.readLine())!=null){\"},{\"name\":\"softBreak\"},{\"data\":\"                result +=line;\"},{\"name\":\"softBreak\"},{\"data\":\"            }\"},{\"name\":\"softBreak\"},{\"data\":\"            JSONObject jsonObject = JSONObject.parseObject(result);\"},{\"name\":\"softBreak\"},{\"data\":\"            res[0] = (String) jsonObject.get(\\\"access_token\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            res[1] = (String) jsonObject.get(\\\"refresh_token\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"        } catch(Exception e){\"},{\"name\":\"softBreak\"},{\"data\":\"            e.printStackTrace();\"},{\"name\":\"softBreak\"},{\"data\":\"        }finally {\"},{\"name\":\"softBreak\"},{\"data\":\"            try{\"},{\"name\":\"softBreak\"},{\"data\":\"                if(out != null){\"},{\"name\":\"softBreak\"},{\"data\":\"                    out.close();\"},{\"name\":\"softBreak\"},{\"data\":\"                }\"},{\"name\":\"softBreak\"},{\"data\":\"                if(in != null){\"},{\"name\":\"softBreak\"},{\"data\":\"                    in.close();\"},{\"name\":\"softBreak\"},{\"data\":\"                }\"},{\"name\":\"softBreak\"},{\"data\":\"            }catch (IOException ioe){\"},{\"name\":\"softBreak\"},{\"data\":\"                ioe.printStackTrace();\"},{\"name\":\"softBreak\"},{\"data\":\"            }\"},{\"name\":\"softBreak\"},{\"data\":\"        }\"},{\"name\":\"softBreak\"},{\"data\":\"        return res;\"},{\"name\":\"softBreak\"},{\"data\":\"    }\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"    //main account request for the access token for the first time\"},{\"name\":\"softBreak\"},{\"data\":\"    public static String[] get_token_account_level(String code,long partner_id,String tmp_partner_key,long main_account_id) throws ParseException,IOException{\"},{\"name\":\"softBreak\"},{\"data\":\"        String[] res = new String[2];\"},{\"name\":\"softBreak\"},{\"data\":\"        long timest = System.currentTimeMillis() / 1000L;\"},{\"name\":\"softBreak\"},{\"data\":\"        String host = \\\"https://openplatform.sandbox.test-stable.shopee.sg\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"        String path = \\\"/api/v2/auth/token/get\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"        String tmp_base_string = String.format(\\\"%s%s%s\\\", partner_id, path, timest);\"},{\"name\":\"softBreak\"},{\"data\":\"        byte[] partner_key;\"},{\"name\":\"softBreak\"},{\"data\":\"        byte[] base_string;\"},{\"name\":\"softBreak\"},{\"data\":\"        BigInteger sign = null;\"},{\"name\":\"softBreak\"},{\"data\":\"        String result = \\\"\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"        try {\"},{\"name\":\"softBreak\"},{\"data\":\"            base_string = tmp_base_string.getBytes(\\\"UTF-8\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            partner_key = tmp_partner_key.getBytes(\\\"UTF-8\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            Mac mac = Mac.getInstance(\\\"HmacSHA256\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            SecretKeySpec secret_key = new SecretKeySpec(partner_key, \\\"HmacSHA256\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            mac.init(secret_key);\"},{\"name\":\"softBreak\"},{\"data\":\"            sign = new BigInteger(1,mac.doFinal(base_string));\"},{\"name\":\"softBreak\"},{\"data\":\"        } catch (Exception e) {\"},{\"name\":\"softBreak\"},{\"data\":\"            e.printStackTrace();\"},{\"name\":\"softBreak\"},{\"data\":\"        }\"},{\"name\":\"softBreak\"},{\"data\":\"        String tmp_url = host + path + String.format(\\\"?partner_id=%s&timestamp=%s&sign=%s\\\", partner_id,timest, String.format(\\\"%032x\\\",sign));\"},{\"name\":\"softBreak\"},{\"data\":\"        URL url = new URL(tmp_url);\"},{\"name\":\"softBreak\"},{\"data\":\"        HttpURLConnection conn = null;\"},{\"name\":\"softBreak\"},{\"data\":\"        PrintWriter out = null;\"},{\"name\":\"softBreak\"},{\"data\":\"        BufferedReader in = null;\"},{\"name\":\"softBreak\"},{\"data\":\"        try {\"},{\"name\":\"softBreak\"},{\"data\":\"            conn = (HttpURLConnection) url.openConnection();\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setRequestMethod(\\\"POST\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setDoOutput(true);\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setDoInput(true);\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setConnectTimeout(30000);\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setReadTimeout(10000);\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setRequestProperty(\\\"Content-Type\\\", \\\"application/json\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setRequestProperty(\\\"Accept\\\", \\\"application/json\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            Map<String,Object> map = new HashMap<>();\"},{\"name\":\"softBreak\"},{\"data\":\"            map.put(\\\"code\\\",code);\"},{\"name\":\"softBreak\"},{\"data\":\"            map.put(\\\"main_account_id\\\",main_account_id);\"},{\"name\":\"softBreak\"},{\"data\":\"            map.put(\\\"partner_id\\\",partner_id);\"},{\"name\":\"softBreak\"},{\"data\":\"            String json = JSON.toJSONString(map);\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.connect();\"},{\"name\":\"softBreak\"},{\"data\":\"            out = new PrintWriter(conn.getOutputStream());\"},{\"name\":\"softBreak\"},{\"data\":\"            out.print(json);\"},{\"name\":\"softBreak\"},{\"data\":\"            out.flush();\"},{\"name\":\"softBreak\"},{\"data\":\"            in = new BufferedReader(new InputStreamReader(conn.getInputStream()));\"},{\"name\":\"softBreak\"},{\"data\":\"            String line = \\\"\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"            while((line=in.readLine())!=null){\"},{\"name\":\"softBreak\"},{\"data\":\"                result +=line;\"},{\"name\":\"softBreak\"},{\"data\":\"            }\"},{\"name\":\"softBreak\"},{\"data\":\"            JSONObject jsonObject = JSONObject.parseObject(result);\"},{\"name\":\"softBreak\"},{\"data\":\"            res[0] = (String) jsonObject.get(\\\"access_token\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            res[1] = (String) jsonObject.get(\\\"refresh_token\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"        } catch(Exception e){\"},{\"name\":\"softBreak\"},{\"data\":\"            e.printStackTrace();\"},{\"name\":\"softBreak\"},{\"data\":\"        }finally {\"},{\"name\":\"softBreak\"},{\"data\":\"            try{\"},{\"name\":\"softBreak\"},{\"data\":\"                if(out != null){\"},{\"name\":\"softBreak\"},{\"data\":\"                    out.close();\"},{\"name\":\"softBreak\"},{\"data\":\"                }\"},{\"name\":\"softBreak\"},{\"data\":\"                if(in != null){\"},{\"name\":\"softBreak\"},{\"data\":\"                    in.close();\"},{\"name\":\"softBreak\"},{\"data\":\"                }\"},{\"name\":\"softBreak\"},{\"data\":\"            }catch (IOException ioe){\"},{\"name\":\"softBreak\"},{\"data\":\"                ioe.printStackTrace();\"},{\"name\":\"softBreak\"},{\"data\":\"            }\"},{\"name\":\"softBreak\"},{\"data\":\"        }\"},{\"name\":\"softBreak\"},{\"data\":\"        return res;\"},{\"name\":\"softBreak\"},{\"data\":\"    }\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"PHP Code Demo:\"}]},{\"attributes\":{\"language\":\"php\"},\"name\":\"codeBlock\",\"children\":[{\"data\":\"<?php \"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"function getTokenShopLevel($code, $partnerId, $partnerKey, $shopId) {\"},{\"name\":\"softBreak\"},{\"data\":\"    global $host;\"},{\"name\":\"softBreak\"},{\"data\":\"    $path = \\\"/api/v2/auth/token/get\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"    \"},{\"name\":\"softBreak\"},{\"data\":\"    $timest = time();\"},{\"name\":\"softBreak\"},{\"data\":\"    $body = array(\\\"code\\\" => $code,  \\\"shop_id\\\" => $shopId, \\\"partner_id\\\" => $partnerId);\"},{\"name\":\"softBreak\"},{\"data\":\"    $baseString = sprintf(\\\"%s%s%s\\\", $partnerId, $path, $timest);\"},{\"name\":\"softBreak\"},{\"data\":\"    $sign = hash_hmac('sha256', $baseString, $partnerKey);\"},{\"name\":\"softBreak\"},{\"data\":\"    $url = sprintf(\\\"%s%s?partner_id=%s&timestamp=%s&sign=%s\\\", $host, $path, $partnerId, $timest, $sign);\"},{\"name\":\"softBreak\"},{\"data\":\"    \"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"    $c = curl_init($url);\"},{\"name\":\"softBreak\"},{\"data\":\"    curl_setopt($c, CURLOPT_POST, 1);\"},{\"name\":\"softBreak\"},{\"data\":\"    curl_setopt($c, CURLOPT_POSTFIELDS, json_encode($body));\"},{\"name\":\"softBreak\"},{\"data\":\"    curl_setopt($c, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));\"},{\"name\":\"softBreak\"},{\"data\":\"    curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);\"},{\"name\":\"softBreak\"},{\"data\":\"    $resp = curl_exec($c);\"},{\"name\":\"softBreak\"},{\"data\":\"    echo \\\"raw result: $resp\\\";\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"    $ret = json_decode($resp, true);\"},{\"name\":\"softBreak\"},{\"data\":\"    $accessToken = $ret[\\\"access_token\\\"];\"},{\"name\":\"softBreak\"},{\"data\":\"    $newRefreshToken = $ret[\\\"refresh_token\\\"];\"},{\"name\":\"softBreak\"},{\"data\":\"    echo \\\"\\\\naccess_token: $accessToken, refresh_token: $newRefreshToken raw: $ret\\\".\\\"\\\\n\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"    return $ret;\"},{\"name\":\"softBreak\"},{\"data\":\"}\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"function getTokenAccountLevel($code, $partnerId, $partnerKey, $mainAccountId) {\"},{\"name\":\"softBreak\"},{\"data\":\"    global $host;\"},{\"name\":\"softBreak\"},{\"data\":\"    $path = \\\"/api/v2/auth/token/get\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"    \"},{\"name\":\"softBreak\"},{\"data\":\"    $timest = time();\"},{\"name\":\"softBreak\"},{\"data\":\"    $body = array(\\\"code\\\" => $code,  \\\"main_account_id\\\" => $mainAccountId, \\\"partner_id\\\" => $partnerId);\"},{\"name\":\"softBreak\"},{\"data\":\"    $baseString = sprintf(\\\"%s%s%s\\\", $partnerId, $path, $timest);\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"    $sign = hash_hmac('sha256', $baseString, $partnerKey);\"},{\"name\":\"softBreak\"},{\"data\":\"    $url = sprintf(\\\"%s%s?partner_id=%s&timestamp=%s&sign=%s\\\", $host, $path, $partnerId, $timest, $sign);\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"    $c = curl_init($url);\"},{\"name\":\"softBreak\"},{\"data\":\"    curl_setopt($c, CURLOPT_POST, 1);\"},{\"name\":\"softBreak\"},{\"data\":\"    curl_setopt($c, CURLOPT_POSTFIELDS, json_encode($body));\"},{\"name\":\"softBreak\"},{\"data\":\"    curl_setopt($c, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));\"},{\"name\":\"softBreak\"},{\"data\":\"    curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);\"},{\"name\":\"softBreak\"},{\"data\":\"    $result = curl_exec($c);\"},{\"name\":\"softBreak\"},{\"data\":\"    echo \\\"\\\\nraw result \\\".$result.\\\"\\\\n\\\";\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"    $ret = json_decode($result, true);\"},{\"name\":\"softBreak\"},{\"data\":\"    $accessToken = $ret[\\\"access_token\\\"];\"},{\"name\":\"softBreak\"},{\"data\":\"    $newRefreshToken = $ret[\\\"refresh_token\\\"];\"},{\"name\":\"softBreak\"},{\"data\":\"    echo \\\"\\\\naccess_token: \\\".$accessToken.\\\", refresh_token: \\\".$newRefreshToken.\\\"\\\\n\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"    return $ret;\"},{\"name\":\"softBreak\"},{\"data\":\"}\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"$host=\\\"https://partner.shopeemobile.com\\\";\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"$partnerId = 847892;\"},{\"name\":\"softBreak\"},{\"data\":\"$partnerKey = \\\"57615053704d6470644f554a78656d50484143644964436a5568777544524579\\\";\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"$code=\\\"494d7a4a4f5a66524556776f66425453\\\";\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"// $shopId=200520705;\"},{\"name\":\"softBreak\"},{\"data\":\"// getTokenShopLevel($code, $partnerId, $partnerKey, $shopId);\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"$accountId=19479;\"},{\"name\":\"softBreak\"},{\"data\":\"getTokenAccountLevel($code, $partnerId, $partnerKey, $accountId)\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"?>\"}]},{\"name\":\"heading3\",\"children\":[{\"attributes\":{\"bold\":true,\"fontColor\":\"#2B2C2D\"},\"data\":\"RefreshAccessToken\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Before the access_token expires, refresh it by using refresh_token to call this API. After the API call, a new refresh_token and access_token will be returned at the same time.The new refresh_token needs to be used the next time this API is called.\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Path:\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Production environment:\"},{\"attributes\":{\"linkHref\":\"https://partner.shopeemobile.com/api/v1/shop/auth_partner\"},\"data\":\" \"},{\"attributes\":{\"underline\":true},\"data\":\"https://partner.shopeemobile.com/api/v2/auth/access_token/get \"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\",\"fontColor\":\"rgb(51,51,51)\"},\"data\":\"（Chinese Mainland）:\"},{\"attributes\":{\"underline\":true},\"data\":\"https://\"},{\"attributes\":{\"underline\":true,\"fontBackgroundColor\":\"rgb(255,255,255)\",\"fontColor\":\"rgb(51,51,51)\"},\"data\":\"openplatform.shopee.cn\"},{\"attributes\":{\"underline\":true},\"data\":\"/api/v2/auth/access_token/get \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Sandbox environment: \"},{\"attributes\":{\"underline\":true},\"data\":\"https://openplatform.sandbox.test-stable.shopee.sg/api/v2/auth/access_token/get\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\",\"fontColor\":\"rgb(51,51,51)\"},\"data\":\"（Chinese Mainland）:\"},{\"attributes\":{\"underline\":true,\"fontBackgroundColor\":\"rgb(255,255,255)\",\"fontColor\":\"rgb(51,51,51)\"},\"data\":\"https://openplatform.sandbox.test-stable.shopee.cn\"},{\"attributes\":{\"underline\":true},\"data\":\"/api/v2/auth/access_token/get \"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Request method: \"},{\"attributes\":{\"bold\":true},\"data\":\"POST\"}]},{\"name\":\"table\",\"children\":[{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"⚠️\"},{\"attributes\":{\"bold\":true},\"data\":\" Note\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Each main_account_id will get the same initial access_token and refresh_token when calling GetAccessToken API for the first time \"}]},{\"name\":\"paragraph\",\"children\":[{\"name\":\"softBreak\"},{\"data\":\" \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"However, after calling the RefreshAccessToken API for the first time, a new set of independent access_token and refresh_token will be generated for each shop_id and merchant_id.\"}]},{\"name\":\"paragraph\",\"children\":[{\"name\":\"softBreak\"},{\"data\":\" \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Here is an example:\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"numbered\"},\"name\":\"listItem\",\"children\":[{\"data\":\"The first access_token and refresh_token obtained from calling GetAccessToken API for the first time is applicable to 7 shop_ids and 3 merchant_ids.\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"numbered\"},\"name\":\"listItem\",\"children\":[{\"data\":\"After the first access_token expires, you use the first refresh_token to call RefreshAccessToken.\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"numbered\"},\"name\":\"listItem\",\"children\":[{\"data\":\"You obtain 10 sets of independent access_token and refresh_token for each shop_id and merchant_id. Subsequently, shop_id and merchant_id no longer share any access_token or refresh_token.\"}]}]}]}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Public parameters:\"}]},{\"attributes\":{\"headingRows\":1},\"name\":\"table\",\"children\":[{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Parameter name\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Type\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Required\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Description\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"sign\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"string\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"True\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"The signature obtained by sign base string (order: partner_id, api path, timestamp...) HMAC-SHA256 hashing with the partner_key.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"partner_id\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"int\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"True\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"The partner_id obtained from the APP. This partner_id is put into the query.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"timestamp\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"int\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"True\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Timestamp, valid for 5 minutes.\"}]}]}]}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Request parameters:\"}]},{\"attributes\":{\"headingRows\":1},\"name\":\"table\",\"children\":[{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Parameter name\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Type\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Required\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Description\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"refresh_token\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"string\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"True\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Use refresh_token to get a new access_token. \"},{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"Each refresh_token is valid for 30 days, and can only be used once by either a shop_id or merchant_id.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"partner_id\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"int\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"True\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"The partner_id obtained from the App. This partner_id is inserted into the body.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"shop_id\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"int\"}]}]},{\"attributes\":{\"rowspan\":2},\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\"},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Yes, input 1 only. \"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"The shop_id of the main account that granted authorization to your App. Only the shop_id \"},{\"attributes\":{\"bold\":true},\"data\":\"or \"},{\"data\":\"merchant_id can be selected as the input parameter, and they must be refreshed separately.\"}]},{\"name\":\"paragraph\",\"children\":[{\"name\":\"softBreak\"},{\"data\":\" \"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"merchant_id\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"int\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"The merchant_id for identifying the main account that granted authorization to your App. Only the shop_id \"},{\"attributes\":{\"bold\":true},\"data\":\"or \"},{\"data\":\"merchant_id can be selected as the input parameter, and they must be refreshed separately.\"}]},{\"name\":\"paragraph\",\"children\":[{\"name\":\"softBreak\"},{\"data\":\" \"}]}]}]}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Response parameters:\"}]},{\"attributes\":{\"headingRows\":1},\"name\":\"table\",\"children\":[{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Parameter name\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Type\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Description\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"request_id\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"string\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"ID of API requests; always returned. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Used to diagnose problems. \"}]},{\"name\":\"paragraph\",\"children\":[{\"name\":\"softBreak\"},{\"data\":\" \"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"error\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"string\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Error codes for API requests; always returned. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"When the API call is successful, the error code returned is empty.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"refresh_token\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"string\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"New refresh_token\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Returned when the API call is successful. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Use a refresh_token to get a new access_token. \"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"Each refresh_token is valid for 30 days, and can only be used once by either a shop_id or merchant_id.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"access_token\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"string\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Returned when the API call is successful. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Each new access_token is a dynamic token that can be used multiple times. It expires after 4 hours.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"expire_in\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"int\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Returned when the API call is successful. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"The validity period of the access_token, in seconds.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"message\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"string\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Always returned. Provides detailed error information.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"merchant_id\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"int\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Returned when the API call is successful. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"The merchant_id for this refresh, for identifying each merchant.\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"shop_id\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"int\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Returned when the API call is successful. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"The shop_id for this refresh\"}]}]}]},{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"partner_id\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"int\"}]}]},{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"Returned when the API call is successful. \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"The partner_id you used for this refresh\"}]}]}]}]},{\"name\":\"table\",\"children\":[{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"⚠️\"},{\"attributes\":{\"bold\":true},\"data\":\" Notes\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"data\":\"After a new access_token is generated, the old access_token is still valid for 5 minutes.\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"data\":\"Re-authorization will trigger a refresh of refresh_token and access_token.\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"data\":\"You must call the RefreshAccessToken API within the validity period of the authorization.\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"data\":\"If you did not save the new refresh_token and access_token returned, \"},{\"attributes\":{\"underline\":true,\"linkHref\":\"https://open.shopee.com/faq?top=177&sub=180&page=1&faq=216\"},\"data\":\"see possible solutions\"},{\"data\":\".\"}]}]}]}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Python Code Demo:\"}]},{\"attributes\":{\"language\":\"python\"},\"name\":\"codeBlock\",\"children\":[{\"data\":\"# refresh token\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"def get_access_token_shop_level(shop_id, partner_id, tmp_partner_key, refresh_token):\"},{\"name\":\"softBreak\"},{\"data\":\"    timest = int(time.time())\"},{\"name\":\"softBreak\"},{\"data\":\"    host = \\\"https://openplatform.sandbox.test-stable.shopee.sg\\\"\"},{\"name\":\"softBreak\"},{\"data\":\"    path = \\\"/api/v2/auth/access_token/get\\\"\"},{\"name\":\"softBreak\"},{\"data\":\"    body = {\\\"shop_id\\\": shop_id, \\\"refresh_token\\\": refresh_token,\\\"partner_id\\\":partner_id}\"},{\"name\":\"softBreak\"},{\"data\":\"    tmp_base_string = \\\"%s%s%s\\\" % (partner_id, path, timest)\"},{\"name\":\"softBreak\"},{\"data\":\"    base_string = tmp_base_string.encode()\"},{\"name\":\"softBreak\"},{\"data\":\"    partner_key = tmp_partner_key.encode()\"},{\"name\":\"softBreak\"},{\"data\":\"    sign = hmac.new(partner_key, base_string, hashlib.sha256).hexdigest()\"},{\"name\":\"softBreak\"},{\"data\":\"    url = host + path + \\\"?partner_id=%s&timestamp=%s&sign=%s\\\" % (partner_id, timest, sign)\"},{\"name\":\"softBreak\"},{\"data\":\"    # print(url)\"},{\"name\":\"softBreak\"},{\"data\":\"    headers = {\\\"Content-Type\\\": \\\"application/json\\\"}\"},{\"name\":\"softBreak\"},{\"data\":\"    resp = requests.post(url, json=body, headers=headers)\"},{\"name\":\"softBreak\"},{\"data\":\"    ret = json.loads(resp.content)\"},{\"name\":\"softBreak\"},{\"data\":\"    access_token = ret.get(\\\"access_token\\\")\"},{\"name\":\"softBreak\"},{\"data\":\"    new_refresh_token = ret.get(\\\"refresh_token\\\")\"},{\"name\":\"softBreak\"},{\"data\":\"    return access_token, new_refresh_token\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"def get_access_token_merchant_level(merchant_id, partner_id, tmp_partner_key, refresh_token):\"},{\"name\":\"softBreak\"},{\"data\":\"    timest = int(time.time())\"},{\"name\":\"softBreak\"},{\"data\":\"    host = \\\"https://openplatform.sandbox.test-stable.shopee.sg\\\"\"},{\"name\":\"softBreak\"},{\"data\":\"    path = \\\"/api/v2/auth/access_token/get\\\"\"},{\"name\":\"softBreak\"},{\"data\":\"    body = {\\\"merchant_id\\\": merchant_id, \\\"refresh_token\\\": refresh_token}\"},{\"name\":\"softBreak\"},{\"data\":\"    tmp_base_string = \\\"%s%s%s\\\" % (partner_id, path, timest)\"},{\"name\":\"softBreak\"},{\"data\":\"    base_string = tmp_base_string.encode()\"},{\"name\":\"softBreak\"},{\"data\":\"    partner_key = tmp_partner_key.encode()\"},{\"name\":\"softBreak\"},{\"data\":\"    sign = hmac.new(partner_key, base_string, hashlib.sha256).hexdigest()\"},{\"name\":\"softBreak\"},{\"data\":\"    url = host + path + \\\"?partner_id=%s&timestamp=%s&sign=%s\\\" % (partner_id, timest, sign)\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"    headers = {\\\"Content-Type\\\": \\\"application/json\\\"}\"},{\"name\":\"softBreak\"},{\"data\":\"    resp = requests.post(url, json=body, headers=headers)\"},{\"name\":\"softBreak\"},{\"data\":\"    ret = json.loads(resp.content)\"},{\"name\":\"softBreak\"},{\"data\":\"    access_token = ret.get(\\\"access_token\\\")\"},{\"name\":\"softBreak\"},{\"data\":\"    new_refresh_token = ret.get(\\\"refresh_token\\\")\"},{\"name\":\"softBreak\"},{\"data\":\"    return access_token, new_refresh_token\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"partner_id = 2006566\"},{\"name\":\"softBreak\"},{\"data\":\"partner_key = \\\"1a78dde5d6c3342f56ac939cbdd81607654c0e87725e118736ba5e3ae31c579c\\\"\"},{\"name\":\"softBreak\"},{\"data\":\"shop_id = 602226924\"},{\"name\":\"softBreak\"},{\"data\":\"main_account_id = 31219\"},{\"name\":\"softBreak\"},{\"data\":\"merchant_id = 45719\"},{\"name\":\"softBreak\"},{\"data\":\"code = \\\"c01204cada7b4cd0e4688154f5a256ca\\\"\"},{\"name\":\"softBreak\"},{\"data\":\"print(shop_auth())\"},{\"name\":\"softBreak\"},{\"data\":\"# access_token,refresh_token = get_token_shop_level(code,partner_id,partner_key,602226924)\"},{\"name\":\"softBreak\"},{\"data\":\"# print(access_token)\"},{\"name\":\"softBreak\"},{\"data\":\"# print(refresh_token)\"},{\"name\":\"softBreak\"},{\"data\":\"# print(get_access_token_shop_level(shop_id,partner_id,partner_key,refresh_token))\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"access_token,refresh_token = get_token_account_level(code,partner_id,partner_key,main_account_id)\"},{\"name\":\"softBreak\"},{\"data\":\"print(access_token)\"},{\"name\":\"softBreak\"},{\"data\":\"print(refresh_token)\"},{\"name\":\"softBreak\"},{\"data\":\"print(get_access_token_merchant_level(merchant_id,partner_id,partner_key,refresh_token))\"},{\"name\":\"softBreak\"},{\"data\":\"   \"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Java\"},{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\" Code Demo:\"}]},{\"attributes\":{\"language\":\"java\"},\"name\":\"codeBlock\",\"children\":[{\"name\":\"softBreak\"},{\"data\":\"    //shop refresh the access token\"},{\"name\":\"softBreak\"},{\"data\":\"    public static String[] get_access_token_shop_level(String refresh_token,long partner_id,String tmp_partner_key,long shop_id) throws ParseException,IOException{\"},{\"name\":\"softBreak\"},{\"data\":\"        String[] res = new String[2];\"},{\"name\":\"softBreak\"},{\"data\":\"        long timest = System.currentTimeMillis() / 1000L;\"},{\"name\":\"softBreak\"},{\"data\":\"        String host = \\\"https://partner.shopeemobile.com\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"        String path = \\\"/api/v2/auth/access_token/get\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"        String tmp_base_string = String.format(\\\"%s%s%s\\\", partner_id, path, timest);\"},{\"name\":\"softBreak\"},{\"data\":\"        byte[] partner_key;\"},{\"name\":\"softBreak\"},{\"data\":\"        byte[] base_string;\"},{\"name\":\"softBreak\"},{\"data\":\"        BigInteger sign = null;\"},{\"name\":\"softBreak\"},{\"data\":\"        String result = \\\"\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"        try {\"},{\"name\":\"softBreak\"},{\"data\":\"            base_string = tmp_base_string.getBytes(\\\"UTF-8\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            partner_key = tmp_partner_key.getBytes(\\\"UTF-8\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            Mac mac = Mac.getInstance(\\\"HmacSHA256\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            SecretKeySpec secret_key = new SecretKeySpec(partner_key, \\\"HmacSHA256\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            mac.init(secret_key);\"},{\"name\":\"softBreak\"},{\"data\":\"            sign = new BigInteger(1,mac.doFinal(base_string));\"},{\"name\":\"softBreak\"},{\"data\":\"        } catch (Exception e) {\"},{\"name\":\"softBreak\"},{\"data\":\"            e.printStackTrace();\"},{\"name\":\"softBreak\"},{\"data\":\"        }\"},{\"name\":\"softBreak\"},{\"data\":\"        String tmp_url = host + path + String.format(\\\"?partner_id=%s&timestamp=%s&sign=%s\\\", partner_id,timest, String.format(\\\"%032x\\\",sign));\"},{\"name\":\"softBreak\"},{\"data\":\"        URL url = new URL(tmp_url);\"},{\"name\":\"softBreak\"},{\"data\":\"        HttpURLConnection conn = null;\"},{\"name\":\"softBreak\"},{\"data\":\"        PrintWriter out = null;\"},{\"name\":\"softBreak\"},{\"data\":\"        BufferedReader in = null;\"},{\"name\":\"softBreak\"},{\"data\":\"        try {\"},{\"name\":\"softBreak\"},{\"data\":\"            conn = (HttpURLConnection) url.openConnection();\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setRequestMethod(\\\"POST\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setDoOutput(true);\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setDoInput(true);\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setConnectTimeout(30000);\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setReadTimeout(10000);\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setRequestProperty(\\\"Content-Type\\\", \\\"application/json\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setRequestProperty(\\\"Accept\\\", \\\"application/json\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            Map<String,Object> map = new HashMap<>();\"},{\"name\":\"softBreak\"},{\"data\":\"            map.put(\\\"refresh_token\\\",refresh_token);\"},{\"name\":\"softBreak\"},{\"data\":\"            map.put(\\\"shop_id\\\",shop_id);\"},{\"name\":\"softBreak\"},{\"data\":\"            map.put(\\\"partner_id\\\",partner_id);\"},{\"name\":\"softBreak\"},{\"data\":\"            String json = JSON.toJSONString(map);\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.connect();\"},{\"name\":\"softBreak\"},{\"data\":\"            out = new PrintWriter(conn.getOutputStream());\"},{\"name\":\"softBreak\"},{\"data\":\"            out.print(json);\"},{\"name\":\"softBreak\"},{\"data\":\"            out.flush();\"},{\"name\":\"softBreak\"},{\"data\":\"            in = new BufferedReader(new InputStreamReader(conn.getInputStream()));\"},{\"name\":\"softBreak\"},{\"data\":\"            String line = \\\"\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"            while((line=in.readLine())!=null){\"},{\"name\":\"softBreak\"},{\"data\":\"                result +=line;\"},{\"name\":\"softBreak\"},{\"data\":\"            }\"},{\"name\":\"softBreak\"},{\"data\":\"            JSONObject jsonObject = JSONObject.parseObject(result);\"},{\"name\":\"softBreak\"},{\"data\":\"            res[0] = (String) jsonObject.get(\\\"access_token\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            res[1] = (String) jsonObject.get(\\\"refresh_token\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"        } catch(Exception e){\"},{\"name\":\"softBreak\"},{\"data\":\"            e.printStackTrace();\"},{\"name\":\"softBreak\"},{\"data\":\"        }finally {\"},{\"name\":\"softBreak\"},{\"data\":\"            try{\"},{\"name\":\"softBreak\"},{\"data\":\"                if(out != null){\"},{\"name\":\"softBreak\"},{\"data\":\"                    out.close();\"},{\"name\":\"softBreak\"},{\"data\":\"                }\"},{\"name\":\"softBreak\"},{\"data\":\"                if(in != null){\"},{\"name\":\"softBreak\"},{\"data\":\"                    in.close();\"},{\"name\":\"softBreak\"},{\"data\":\"                }\"},{\"name\":\"softBreak\"},{\"data\":\"            }catch (IOException ioe){\"},{\"name\":\"softBreak\"},{\"data\":\"                ioe.printStackTrace();\"},{\"name\":\"softBreak\"},{\"data\":\"            }\"},{\"name\":\"softBreak\"},{\"data\":\"        }\"},{\"name\":\"softBreak\"},{\"data\":\"        return res;\"},{\"name\":\"softBreak\"},{\"data\":\"    }\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"    //merchant refresh the access token\"},{\"name\":\"softBreak\"},{\"data\":\"    public static String[] get_access_token_merchant_level(String refresh_token,long partner_id,String tmp_partner_key,long merchant_id) throws ParseException,IOException{\"},{\"name\":\"softBreak\"},{\"data\":\"        String[] res = new String[2];\"},{\"name\":\"softBreak\"},{\"data\":\"        long timest = System.currentTimeMillis() / 1000L;\"},{\"name\":\"softBreak\"},{\"data\":\"        String host = \\\"https://partner.shopeemobile.com\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"        String path = \\\"/api/v2/auth/access_token/get\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"        String tmp_base_string = String.format(\\\"%s%s%s\\\", partner_id, path, timest);\"},{\"name\":\"softBreak\"},{\"data\":\"        byte[] partner_key;\"},{\"name\":\"softBreak\"},{\"data\":\"        byte[] base_string;\"},{\"name\":\"softBreak\"},{\"data\":\"        BigInteger sign = null;\"},{\"name\":\"softBreak\"},{\"data\":\"        String result = \\\"\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"        try {\"},{\"name\":\"softBreak\"},{\"data\":\"            base_string = tmp_base_string.getBytes(\\\"UTF-8\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            partner_key = tmp_partner_key.getBytes(\\\"UTF-8\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            Mac mac = Mac.getInstance(\\\"HmacSHA256\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            SecretKeySpec secret_key = new SecretKeySpec(partner_key, \\\"HmacSHA256\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            mac.init(secret_key);\"},{\"name\":\"softBreak\"},{\"data\":\"            sign = new BigInteger(1,mac.doFinal(base_string));\"},{\"name\":\"softBreak\"},{\"data\":\"        } catch (Exception e) {\"},{\"name\":\"softBreak\"},{\"data\":\"            e.printStackTrace();\"},{\"name\":\"softBreak\"},{\"data\":\"        }\"},{\"name\":\"softBreak\"},{\"data\":\"        String tmp_url = host + path + String.format(\\\"?partner_id=%s&timestamp=%s&sign=%s\\\", partner_id,timest, String.format(\\\"%032x\\\",sign));\"},{\"name\":\"softBreak\"},{\"data\":\"        URL url = new URL(tmp_url);\"},{\"name\":\"softBreak\"},{\"data\":\"        HttpURLConnection conn = null;\"},{\"name\":\"softBreak\"},{\"data\":\"        PrintWriter out = null;\"},{\"name\":\"softBreak\"},{\"data\":\"        BufferedReader in = null;\"},{\"name\":\"softBreak\"},{\"data\":\"        try {\"},{\"name\":\"softBreak\"},{\"data\":\"            conn = (HttpURLConnection) url.openConnection();\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setRequestMethod(\\\"POST\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setDoOutput(true);\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setDoInput(true);\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setConnectTimeout(30000);\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setReadTimeout(10000);\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setRequestProperty(\\\"Content-Type\\\", \\\"application/json\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.setRequestProperty(\\\"Accept\\\", \\\"application/json\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            Map<String,Object> map = new HashMap<>();\"},{\"name\":\"softBreak\"},{\"data\":\"            map.put(\\\"refresh_token\\\",refresh_token);\"},{\"name\":\"softBreak\"},{\"data\":\"            map.put(\\\"merchant_id\\\",merchant_id);\"},{\"name\":\"softBreak\"},{\"data\":\"            map.put(\\\"partner_id\\\",partner_id);\"},{\"name\":\"softBreak\"},{\"data\":\"            String json = JSON.toJSONString(map);\"},{\"name\":\"softBreak\"},{\"data\":\"            conn.connect();\"},{\"name\":\"softBreak\"},{\"data\":\"            out = new PrintWriter(conn.getOutputStream());\"},{\"name\":\"softBreak\"},{\"data\":\"            out.print(json);\"},{\"name\":\"softBreak\"},{\"data\":\"            out.flush();\"},{\"name\":\"softBreak\"},{\"data\":\"            in = new BufferedReader(new InputStreamReader(conn.getInputStream()));\"},{\"name\":\"softBreak\"},{\"data\":\"            String line = \\\"\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"            while((line=in.readLine())!=null){\"},{\"name\":\"softBreak\"},{\"data\":\"                result +=line;\"},{\"name\":\"softBreak\"},{\"data\":\"            }\"},{\"name\":\"softBreak\"},{\"data\":\"            JSONObject jsonObject = JSONObject.parseObject(result);\"},{\"name\":\"softBreak\"},{\"data\":\"            res[0] = (String) jsonObject.get(\\\"access_token\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"            res[1] = (String) jsonObject.get(\\\"refresh_token\\\");\"},{\"name\":\"softBreak\"},{\"data\":\"        } catch(Exception e){\"},{\"name\":\"softBreak\"},{\"data\":\"            e.printStackTrace();\"},{\"name\":\"softBreak\"},{\"data\":\"        }finally {\"},{\"name\":\"softBreak\"},{\"data\":\"            try{\"},{\"name\":\"softBreak\"},{\"data\":\"                if(out != null){\"},{\"name\":\"softBreak\"},{\"data\":\"                    out.close();\"},{\"name\":\"softBreak\"},{\"data\":\"                }\"},{\"name\":\"softBreak\"},{\"data\":\"                if(in != null){\"},{\"name\":\"softBreak\"},{\"data\":\"                    in.close();\"},{\"name\":\"softBreak\"},{\"data\":\"                }\"},{\"name\":\"softBreak\"},{\"data\":\"            }catch (IOException ioe){\"},{\"name\":\"softBreak\"},{\"data\":\"                ioe.printStackTrace();\"},{\"name\":\"softBreak\"},{\"data\":\"            }\"},{\"name\":\"softBreak\"},{\"data\":\"        }\"},{\"name\":\"softBreak\"},{\"data\":\"        return res;\"},{\"name\":\"softBreak\"},{\"data\":\"    }\"},{\"name\":\"softBreak\"},{\"data\":\"}\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"PHP Code Demo:\"}]},{\"attributes\":{\"language\":\"php\"},\"name\":\"codeBlock\",\"children\":[{\"data\":\"<?php \"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"function getAccessTokenShopLevel($partnerId, $partnerKey, $shopId, $refreshToken) {\"},{\"name\":\"softBreak\"},{\"data\":\"    global $host;\"},{\"name\":\"softBreak\"},{\"data\":\"    $path = \\\"/api/v2/auth/access_token/get\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"    \"},{\"name\":\"softBreak\"},{\"data\":\"    $timest = time();\"},{\"name\":\"softBreak\"},{\"data\":\"    $body = array(\\\"partner_id\\\" => $partnerId, \\\"shop_id\\\" => $shopId, \\\"refresh_token\\\" => $refreshToken);\"},{\"name\":\"softBreak\"},{\"data\":\"    $baseString = sprintf(\\\"%s%s%s\\\", $partnerId, $path, $timest);\"},{\"name\":\"softBreak\"},{\"data\":\"    $sign = hash_hmac('sha256', $baseString, $partnerKey);\"},{\"name\":\"softBreak\"},{\"data\":\"    $url = sprintf(\\\"%s%s?partner_id=%s&timestamp=%s&sign=%s\\\", $host, $path, $partnerId, $timest, $sign);\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"    $c = curl_init($url);\"},{\"name\":\"softBreak\"},{\"data\":\"    curl_setopt($c, CURLOPT_POST, 1);\"},{\"name\":\"softBreak\"},{\"data\":\"    curl_setopt($c, CURLOPT_POSTFIELDS, json_encode($body));\"},{\"name\":\"softBreak\"},{\"data\":\"    curl_setopt($c, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));\"},{\"name\":\"softBreak\"},{\"data\":\"    curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"    $result = curl_exec($c);\"},{\"name\":\"softBreak\"},{\"data\":\"    echo \\\"\\\\nraw result \\\".$result.\\\"\\\\n\\\";\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"    $ret = json_decode($result, true);\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"    $accessToken = $ret[\\\"access_token\\\"];\"},{\"name\":\"softBreak\"},{\"data\":\"    $newRefreshToken = $ret[\\\"refresh_token\\\"];\"},{\"name\":\"softBreak\"},{\"data\":\"    echo \\\"\\\\naccess_token: \\\".$accessToken.\\\", refresh_token: \\\".$newRefreshToken.\\\"\\\\n\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"    return $ret;\"},{\"name\":\"softBreak\"},{\"data\":\"}\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"function getAccessTokenMerchantLevel($partnerId, $partnerKey, $merchantId, $refreshToken) {\"},{\"name\":\"softBreak\"},{\"data\":\"    global $host;\"},{\"name\":\"softBreak\"},{\"data\":\"    $path = \\\"/api/v2/auth/access_token/get\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"    \"},{\"name\":\"softBreak\"},{\"data\":\"    $timest = time();\"},{\"name\":\"softBreak\"},{\"data\":\"    $body = array(\\\"partner_id\\\" => $partnerId, \\\"merchant_id\\\" => $merchantId, \\\"refresh_token\\\" => $refreshToken);\"},{\"name\":\"softBreak\"},{\"data\":\"    $baseString = sprintf(\\\"%s%s%s\\\", $partnerId, $path, $timest);\"},{\"name\":\"softBreak\"},{\"data\":\"    $sign = hash_hmac('sha256', $baseString, $partnerKey);\"},{\"name\":\"softBreak\"},{\"data\":\"    $url = sprintf(\\\"%s%s?partner_id=%s&timestamp=%s&sign=%s\\\", $host, $path, $partnerId, $timest, $sign);\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"    $c = curl_init($url);\"},{\"name\":\"softBreak\"},{\"data\":\"    curl_setopt($c, CURLOPT_POST, 1);\"},{\"name\":\"softBreak\"},{\"data\":\"    curl_setopt($c, CURLOPT_POSTFIELDS, json_encode($body));\"},{\"name\":\"softBreak\"},{\"data\":\"    curl_setopt($c, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));\"},{\"name\":\"softBreak\"},{\"data\":\"    curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);\"},{\"name\":\"softBreak\"},{\"data\":\"    $result = curl_exec($c);\"},{\"name\":\"softBreak\"},{\"data\":\"    echo \\\"\\\\nraw result \\\".$result.\\\"\\\\n\\\";\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"    $ret = json_decode($result, true);\"},{\"name\":\"softBreak\"},{\"data\":\"    $accessToken = $ret[\\\"access_token\\\"];\"},{\"name\":\"softBreak\"},{\"data\":\"    $newRefreshToken = $ret[\\\"refresh_token\\\"];\"},{\"name\":\"softBreak\"},{\"data\":\"    echo \\\"\\\\naccess_token: \\\".$accessToken.\\\", refresh_token: \\\".$newRefreshToken.\\\"\\\\n\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"    return $ret;\"},{\"name\":\"softBreak\"},{\"data\":\"}\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"$host=\\\"https://partner.shopeemobile.com\\\";\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"$partnerId = 847892;\"},{\"name\":\"softBreak\"},{\"data\":\"$partnerKey = \\\"57615053704d6470644f554a78656d50484143644964436a5568777544524579\\\";\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"// $shopId=200520705;\"},{\"name\":\"softBreak\"},{\"data\":\"// $shopRefreshToken=\\\"71724c4e68746b546965424c70617244\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"// getAccessTokenShopLevel($partnerId, $partnerKey, $shopId, $shopRefreshToken)\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"$merchantId=1018829;\"},{\"name\":\"softBreak\"},{\"data\":\"$merchantRefreshToken=\\\"546e5064627042696756455277774f53\\\";\"},{\"name\":\"softBreak\"},{\"data\":\"getAccessTokenMerchantLevel($partnerId, $partnerKey, $merchantId, $merchantRefreshToken)\"},{\"name\":\"softBreak\"},{\"name\":\"softBreak\"},{\"data\":\"?>\"}]},{\"name\":\"heading3\",\"children\":[{\"attributes\":{\"bold\":true,\"fontColor\":\"#2B2C2D\"},\"data\":\"Refreshing the access_token and refresh_token on a shop account\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"1.Use the code and shop_id from the redirect URL to call the GetAccessToken API and obtain the first pair of access_token and refresh_token. \"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Redirect URL: https://open.shopee.com/?code=7867624d4e76616648544f6e52625557&shop_id=54804) \"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Query: https://partner.shopeemobile.com/api/v2/auth/token/get?partner_id=1000016&timestamp=1657263479&sign=9c685bc7e4a74e90f45fe1933f1d72b2d9705acda4093a9fb1ec7e2b57ccea2a\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"{\\\"shop_id\\\":54804,\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"\\\"code\\\":\\\"7867624d4e76616648544f6e52625557\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"\\\"partner_id\\\":1000016\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"}\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"2.Save the first pair of access_token and refresh_token returned.\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"{\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"   \\\"refresh_token\\\": \\\"456e416149664b76745a6a794156794a\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"   \\\"access_token\\\": \\\"6a55746e61546f707579627656637464\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"   \\\"expire_in\\\": 13859,\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"   \\\"request_id\\\": \\\"c040b886cfcabdfa5a23af51c595cd1b\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"   \\\"error\\\": \\\"\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"   \\\"message\\\": \\\"\\\"\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"}\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"3.Call the RefreshAccessToken API to refresh the access_token and refresh_token.\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Query: https://partner.shopeemobile.com\"},{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\",\"fontColor\":\"rgb(33,33,33)\"},\"data\":\"/api/v2/auth/access_token/get\"},{\"data\":\"?partner_id=1000016&timestamp=1657263479&sign=9c685bc7e4a74e90f45fe1933f1d72b2d9705acda4093a9fb1ec7e2b57ccea2a\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"{\\\"shop_id\\\":54804,\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"\\\"refresh_token\\\":\\\"456e416149664b76745a6a794156794a\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"\\\"partner_id\\\":1000016\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"}\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"4.Save the new access_token and refresh_token.\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"{\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"   \\\"partner_id\\\": 1000016,\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"   \\\"refresh_token\\\": \\\"666478546b6c63464867685554477a57\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"   \\\"access_token\\\": \\\"7a5970754768697552654a466f425573\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"   \\\"expire_in\\\": 14400,\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"   \\\"request_id\\\": \\\"6d79dd0ffe4e070e185c71ca5153cd51\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"   \\\"error\\\": \\\"\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"   \\\"message\\\": \\\"\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"   \\\"shop_id\\\": 54804\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"}\"}]},{\"name\":\"heading3\",\"children\":[{\"attributes\":{\"bold\":true,\"fontColor\":\"#2B2C2D\"},\"data\":\"Refreshing the access_token and refresh_token on a main account\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"1.Use the code and main_account_id from the URL obtained during authorization to call the GetAccessToken API and obtain the first pair of access_token and refresh_token.\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"Redirect URL: : https://open.shopee.com/?code=644d4e48787873706c5a444c776d4b59&main_account_id=10208\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Query: https://partner.shopeemobile.com/api/v2/auth/token/get?partner_id=1000016&timestamp=1657263479&sign=9c685bc7e4a74e90f45fe1933f1d72b2d9705acda4093a9fb1ec7e2b57ccea2a\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"{\\\"main_account_id\\\":10208,\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"\\\"code\\\":\\\"644d4e48787873706c5a444c776d4b59\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"\\\"partner_id\\\":1000016\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"}\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"2.Save the first pair of access_token and refresh_token returned.\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"{\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   \\\"refresh_token\\\": \\\"684d42685667777868597a4477587455\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   \\\"access_token\\\": \\\"44776151594778486943647644745361\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   \\\"expire_in\\\": 14344,\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   \\\"request_id\\\": \\\"9199e13ee74b22411498209cb5516e24\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   \\\"merchant_id_list\\\": [\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"       1001705\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   ],\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   \\\"shop_id_list\\\": [\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"       33142,\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"       46154\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   ],\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   \\\"error\\\": \\\"\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   \\\"message\\\": \\\"\\\"\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"}\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"3.Call the RefreshAccessToken API to refresh the access_token and refresh_token of shop_id and merchant_id respectively\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Query: \"},{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"https://partner.shopeemobile.com/api/v2/auth/access_token/get?partner_id=1000016&timestamp=1657868745&sign=b78833ddcf533903cfae818bbfcf2b6b630e3bc0c941dd65453632f63bf7b495\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"{\\\"shop_id\\\":33142,\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"\\\"refresh_token\\\":\\\"684d42685667777868597a4477587455\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"\\\"partner_id\\\":1000016\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"}\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Query: \"},{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"https://partner.shopeemobile.com/api/v2/auth/access_token/get?partner_id=1000016&timestamp=1657868745&sign=b78833ddcf533903cfae818bbfcf2b6b630e3bc0c941dd65453632f63bf7b495\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"{\\\"merchant_id\\\":1001705,\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"\\\"refresh_token\\\":\\\"684d42685667777868597a4477587455\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"\\\"partner_id\\\":1000016\"}]},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"}\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"bold\":true},\"data\":\"4.Save the new access_token and refresh_token.\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"{\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   \\\"partner_id\\\": 1000016,\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   \\\"refresh_token\\\": \\\"417472546e73504949676279576c477a\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   \\\"access_token\\\": \\\"646d474965714a696177764963775743\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   \\\"expire_in\\\": 14400,\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   \\\"request_id\\\": \\\"78e64d11cb6dec6f6669282839fca916\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   \\\"error\\\": \\\"\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   \\\"message\\\": \\\"\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   \\\"shop_id\\\": 33142\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"}\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"{\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   \\\"partner_id\\\": 1000016,\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   \\\"refresh_token\\\": \\\"715075736d6c6570544364774f437369\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   \\\"access_token\\\": \\\"69634c664a7350696c6b466d5a53714a\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   \\\"expire_in\\\": 14400,\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   \\\"request_id\\\": \\\"51eacbc81bd6fa8fddddf1e0ef2dee16\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   \\\"error\\\": \\\"\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   \\\"message\\\": \\\"\\\",\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"   \\\"merchant_id\\\": 1001705\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"}\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"By following the steps above, you can call the RefreshAccessToken API  within 4 hours to get new access_token and refresh_token. Maintaining the API call loop will ensure you can continue to obtain new sets of access_token and refresh_token within the authorization validity period. \"}]},{\"name\":\"table\",\"children\":[{\"name\":\"tableRow\",\"children\":[{\"name\":\"tableCell\",\"children\":[{\"name\":\"paragraph\",\"children\":[{\"data\":\"⚠️\"},{\"attributes\":{\"bold\":true},\"data\":\" Note\"}]},{\"name\":\"paragraph\",\"children\":[{\"data\":\"If you did not save the new refresh_token and access_token returned, \"},{\"attributes\":{\"underline\":true,\"linkHref\":\"https://open.shopee.com/faq?top=177&sub=180&page=1&faq=216\"},\"data\":\"see possible solutions\"},{\"data\":\".\"}]}]}]}]},{\"name\":\"heading1\",\"children\":[{\"attributes\":{\"fontColor\":\"#2B2C2D\"},\"data\":\"Canceling authorization\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"You can cancel an authorization by changing the authorization URL or via Seller Center.\"}]},{\"name\":\"heading3\",\"children\":[{\"attributes\":{\"fontColor\":\"#2B2C2D\"},\"data\":\"Canceling authorization by changing the authorization URL\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"Follow the same steps to generate an authorization URL, but replace the fixed authorization URL with these fixed deauthorization URLs:\"}]},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"data\":\"Production Environment:\"}]},{\"attributes\":{\"listIndent\":1,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"data\":\"https://partner.shopeemobile.com/api/v2/shop/cancel_auth_partner?partner_id=10090&redirect=https://open.shopee.com&timestamp=1594897040&sign=90c12d3932f3826f0c72242e1ec6492eec9a1298658f41f7a9469664801c4e5a\"}]},{\"name\":\"paragraph\"},{\"attributes\":{\"listIndent\":0,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"data\":\"Sandbox Environment:\"}]},{\"attributes\":{\"listIndent\":1,\"listType\":\"bulleted\"},\"name\":\"listItem\",\"children\":[{\"data\":\"https://partner.test-stable.shopeemobile.com/api/v2/shop/cancel_auth_partner?partner_id=1000016&redirect=https://open.shopee.com&timestamp=1657254106&sign=47e8712bb89dbc7c7f71eb690310d089b951801cb104763981de5b3dacc3f07c\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"Log in to your account.\"}]},{\"attributes\":{\"src\":\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=fqiBwLFttdta5Te0%2FnbxzXzFcsupke1%2BNA2OHgx7yb1SY2iwe2LgKaOg0BsWqPAlP3u2RsebI%2F6btGIy3SIXCQ%3D%3D&image_type=png\"},\"name\":\"imageBlock\"},{\"name\":\"paragraph\",\"children\":[{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"Select \"},{\"attributes\":{\"bold\":true,\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\"Cancel Authorization\"},{\"attributes\":{\"fontBackgroundColor\":\"rgb(255,255,255)\"},\"data\":\".\"}]},{\"attributes\":{\"src\":\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=o9yQ94Cq36TeoBBlNsV9odZZsWQvw%2FOJYgYXVPSV5PmLUFhnbxkEEZiuLnCXbVCeJ1Cs21BXmBtNdTzaC59LJw%3D%3D&image_type=png\"},\"name\":\"imageBlock\"},{\"name\":\"heading3\",\"children\":[{\"attributes\":{\"fontColor\":\"#2B2C2D\"},\"data\":\"Canceling authorization on Seller Center \"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"On the \"},{\"attributes\":{\"bold\":true},\"data\":\"Platform Partner\"},{\"data\":\" page in Seller Center, sellers can check which Apps the shop has authorized and their corresponding authorization expiration dates. The seller can also directly cancel the authorization of Apps by selecting \"},{\"attributes\":{\"bold\":true},\"data\":\"Separate\"},{\"data\":\" under the \"},{\"attributes\":{\"bold\":true},\"data\":\"Action\"},{\"data\":\" column.\"}]},{\"attributes\":{\"src\":\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=yz4bkpogbbBi5skg05Tr68D2FH7NDD9bdcXDaKojflAyCSNELVaU0efUGodlnzFL7AVUcOfVJk33%2Bh4N%2FfpY8w%3D%3D&image_type=png\"},\"name\":\"imageBlock\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"CNSC and KRSC sellers can check which Apps the main account has granted authorization to. On the \"},{\"attributes\":{\"bold\":true},\"data\":\"Platform Partner\"},{\"data\":\" page, sellers can directly cancel any authorizations granted by the merchant or shop.\"}]},{\"name\":\"paragraph\"},{\"attributes\":{\"src\":\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=DhqmO1dXSCh%2FsgUDweiMAjJNVZoElu%2FWOygNRX%2Bj5snNNZqD%2BkHsIQXsy9dQFXkc%2Br2AX%2F5inJ97WdBjlhVwfA%3D%3D&image_type=png\"},\"name\":\"imageBlock\"},{\"attributes\":{\"src\":\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=6mZRmlhbl%2FiGafGlKE2V%2FT9EWJb%2BSgKCqGxEph9mSTRLBnsBerBG5YTJR%2B%2BawQiufyHh2F2RgifSi7DdrLIclg%3D%3D&image_type=png\"},\"name\":\"imageBlock\"},{\"name\":\"heading1\",\"children\":[{\"attributes\":{\"fontColor\":\"#2B2C2D\"},\"data\":\"FAQs on authorization and authentication\"}]},{\"name\":\"paragraph\"},{\"name\":\"paragraph\",\"children\":[{\"data\":\"If you encounter errors during the authorization process, you can refer to our \"},{\"attributes\":{\"underline\":true,\"linkHref\":\"https://open.shopee.com/faq?top=177&sub=180&page=1&faq=215\"},\"data\":\"FAQs on authorization and authentication.\"}]}]",
  "content": "<p>&nbsp;</p><p>Authorization is an important step to using Open API. You need to be authorized by the seller in order for your App to call non-public APIs required for shop management.</p><p>&nbsp;</p><p>You will be authenticated based on the public parameters passed to Open API. If the authentication fails, your call will fail and an error will be returned.</p><figure class=\"table\"><table><tbody><tr><td><p>⚠️<strong> Note&nbsp;</strong></p><ul><li><strong>Authorization Validity</strong></li></ul><p class=\"indent-1\">Each authorization can be set for a period of up to <strong>365 days</strong>. Once the authorization expires, you will need to contact the seller to re-authorize your App.</p><p class=\"indent-1\"><strong>Note:</strong> The validity period is optional, but cannot exceed 365 days.</p><p>&nbsp;</p><ul><li><strong>SIP Shops Authorization</strong></li></ul><p class=\"indent-1\">When a SIP Primary shop grants authorization to an App, all its SIP Affiliate shops will automatically be granted authorization as well.</p><p class=\"indent-1\">Please note that SIP Affiliate shops have <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://open.shopee.com/faq?top=162&amp;sub=166&amp;page=1&amp;faq=214\"><u>limited API calling permissions</u></a> compared to the Primary shop.</p></td></tr></tbody></table></figure><h1><span style=\"color:#2B2C2D;\">The authorization process</span></h1><p>&nbsp;</p><p>There are 4 steps to complete authorization: <strong>Generating the authorization link</strong>, <strong>acquiring authorizations from shop(s)</strong>, <strong>using the authorization code</strong>, and <strong>getting and refreshing the access_token</strong>.&nbsp;</p><p>&nbsp;</p><p>These will be explained in detail below, along with information on what to prepare before authorization, details of the authorization process, and how to use the information returned after authorization to pass the authentication of the platform.&nbsp;</p><h2><span style=\"color:#2B2C2D;\">Generating the authorization link</span></h2><p><span style=\"color:#2B2C2D;\">For Seller in House System App, you can log in Open Platform&gt; App list&gt; click Authorize&gt; fill in Redirect URL to generate an authorization link.&nbsp;</span></p><figure class=\"image image_resized\" style=\"width:864px;\"><img src=\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=AwcI9KDq2kAasxHvc5J41P2%2FdxfAcI3okQeHbiqAUNk94RGGSxJB0feXlyNMS8S9YERegWzV4ki4AMlGULhn3Q%3D%3D&amp;image_type=png\"></figure><p>&nbsp;</p><p>For all type of App, you need to create an authorization link with the following specifications. The authorization link comprises a <strong>fixed authorization URL</strong> and <strong>other required parameters</strong>.</p><p>Fixed authorization URL:</p><p>Production Environment：</p><p>https://partner.shopeemobile.com/api/v2/shop/auth_partner</p><p>（Chinese Mainland）https://openplatform.shopee.cn/api/v2/shop/auth_partner</p><p>&nbsp;</p><p>Sandbox test environment:&nbsp;</p><p>https://openplatform.sandbox.test-stable.shopee.sg/api/v2/shop/auth_partner&nbsp;</p><p>（Chinese Mainland） https://openplatform.sandbox.test-stable.shopee.cn/api/v2/shop/auth_partner</p><p>&nbsp;</p><p>Other required parameters:</p><figure class=\"table\"><table><thead><tr><th><strong>Parameter name</strong></th><th><strong>Type</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>sign</td><td>string</td><td>The signature obtained by sign base string (order: partner_id, api path, timestamp...) HMAC-SHA256 hashing with the partner_key.</td></tr><tr><td>partner_id</td><td>int</td><td>partner_id obtained from the App.</td></tr><tr><td>timestamp</td><td>int</td><td>This needs to be the same as the timestamp used in the sign base string. The timestamp is only valid for 5 minutes.</td></tr><tr><td>redirect</td><td>string</td><td>The URL to which the webpage redirects to after authorization is completed. This can be any URL, such as your company's official website.</td></tr></tbody></table></figure><p>&nbsp;</p><p>Calculating the sign parameter</p><p>The sign parameter is not only a component of the authorization link, but also a parameter used for authentication each time it is called. This section will explain how to create a sign base string and calculate the authentication signature through HMAC-SHA256.</p><p>&nbsp;</p><p><strong>Creating a sign base string</strong></p><p><span style=\"background-color:rgb(255,255,255);\">There are 3 types of APIs that require the use of different parameters to create the sign base string. (consistent with its common parameters).</span></p><p>&nbsp;</p><p><span style=\"background-color:rgb(255,255,255);\">Concatenate the API path (without host) and the common parameters below into a single sign base string in the following order:</span></p><p>&nbsp;</p><ul><li><strong>For Shop APIs</strong>: partner_id, api path, timestamp, access_token, shop_id</li><li><strong>For Merchant APIs</strong>: partner_id, api path, timestamp, access_token, merchant_id</li><li><strong>For Public APIs</strong>: partner_id, api path, timestamp</li></ul><p>&nbsp;</p><p><strong>Calculating the authentication signature</strong></p><p>Use HMAC-SHA256 to hash the sign base string, and use the partner key as the encryption key. The hexadecimal all-lowercase hash value is the authentication signature.</p><p>&nbsp;</p><p>Python Code Demo:</p><pre><code class=\"python hljs\">import hmac\nimport json\nimport time\nimport requests\nimport hashlib\n\n\ndef shop_auth():\n    timest = int(time.time())\n    host = \"https://partner.shopeemobile.com\"\n    path = \"/api/v2/shop/auth_partner\"\n    redirect_url = \"https://www.baidu.com/\"\n    partner_id = 80001\n    tmp = \"test....\"\n    partner_key = tmp.encode()\n    tmp_base_string = \"%s%s%s\" % (partner_id, path, timest)\n    base_string = tmp_base_string.encode()\n    sign = hmac.new(partner_key, base_string, hashlib.sha256).hexdigest()\n    ##generate api\n    url = host + path + \"?partner_id=%s&amp;timestamp=%s&amp;sign=%s&amp;redirect=%s\" % (partner_id, timest, sign, redirect_url)\n    print(url)\n</code></pre><p>&nbsp;</p><p>Go Code Demo:</p><pre><code class=\"go hljs\">func auth_shop(){\n\ttimest := strconv.FormatInt(time.Now().Unix(),10)\n\thost := \"https://openplatform.sandbox.test-stable.shopee.sg\"\n\tpath := \"/api/v2/shop/auth_partner\"\n\tredirectUrl := \"https://www.baidu.com/\"\n\tpartnerId := strconv.Itoa(2006566)\n\tpartnerKey := \"1391fd986fe8ec7569bebed75b0c33ee35eb5a305bed7038657a5cd5f75b1c88\"\n\tbaseString := fmt.Sprintf(\"%s%s%s\", partnerId,path,timest)\n\th := hmac.New(sha256.New,[]byte(partnerKey))\n\th.Write([]byte(baseString))\n\tsign := hex.EncodeToString(h.Sum(nil))\n\turl := fmt.Sprintf(host+path+\"?partner_id=%s&amp;timestamp=%s&amp;sign=%s&amp;redirect=%s\", partnerId,timest,sign, redirectUrl)\n\tfmt.Println(url)\n}</code></pre><p>&nbsp;</p><p>Java Code Demo:</p><pre><code class=\"java hljs\">    //generate auth url\n    public static void shop_auth(){\n        long timest = System.currentTimeMillis() / 1000L;\n        String host = \"https://partner.shopeemobile.com\";\n        String path = \"/api/v2/shop/auth_partner\";\n        String redirect_url = \"https://www.baidu.com/\";\n        long partner_id = 123456L;\n        String tmp_partner_key = \"...\";\n        String tmp_base_string = String.format(\"%s%s%s\", partner_id, path, timest);\n        byte[] partner_key;\n        byte[] base_string;\n        String sign = \"\";\n        try {\n            base_string = tmp_base_string.getBytes(\"UTF-8\");\n            partner_key = tmp_partner_key.getBytes(\"UTF-8\");\n            Mac mac = Mac.getInstance(\"HmacSHA256\");\n            SecretKeySpec secret_key = new SecretKeySpec(partner_key, \"HmacSHA256\");\n            mac.init(secret_key);\n            sign = String.format(\"%064x\",new BigInteger(1,mac.doFinal(base_string)));\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        String url = host + path + String.format(\"?partner_id=%s&amp;timestamp=%s&amp;sign=%s&amp;redirect=%s\", partner_id,timest, sign, redirect_url);\n        System.out.println(url);\n    }</code></pre><p>&nbsp;</p><p>PHP Code Demo:</p><pre><code class=\"php hljs\">&lt;?php \n\n\nfunction authShop($partnerId, $partnerKey) {   \n    global $host;\n    $path = \"/api/v2/shop/auth_partner\";\n    $redirectUrl = \"https://www.baidu.com/\";\n\n    $timest = time();\n    $baseString = sprintf(\"%s%s%s\", $partnerId, $path, $timest);\n    $sign = hash_hmac('sha256', $baseString, $partnerKey);\n    $url = sprintf(\"%s%s?partner_id=%s&amp;timestamp=%s&amp;sign=%s&amp;redirect=%s\", $host, $path, $partnerId, $timest, $sign, $redirectUrl);\n    return $url;\n}\n\n$host=\"https://openplatform.sandbox.test-stable.shopee.sg\";\n\n$partnerId = 847892;\n$partnerKey = \"57615053704d6470644f554a78656d50484143644964436a5568777544524579\";\n\necho authShop($partnerId, $partnerKey);\n?&gt;</code></pre><p>&nbsp;</p><p>Examples of authorization links</p><p>Here are examples of authorization links in the production and sandbox test environments for your reference.</p><p>Production Environment:</p><p><u>https://partner.shopeemobile.com/api/v2/shop/auth_partner?partner_id=10090&amp;redirect=https://open.shopee.com&amp;timestamp=1594897040&amp;sign=90c12d3932f3826f0c72242e1ec6492eec9a1298658f41f7a9469664801c4e5a</u></p><p><span style=\"background-color:rgb(255,255,255);color:rgb(51,51,51);\">（Chinese Mainland）</span></p><p><u>https://</u><span style=\"background-color:rgb(255,255,255);color:rgb(51,51,51);\"><u>openplatform.shopee.cn/</u></span><u>api/v2/shop/auth_partner?partner_id=10090&amp;redirect=https://open.shopee.com&amp;timestamp=1594897040&amp;sign=90c12d3932f3826f0c72242e1ec6492eec9a1298658f41f7a9469664801c4e5a</u></p><p>&nbsp;</p><p>Sandbox test environment:</p><p><u>https://openplatform.sandbox.test-stable.shopee.sg/api/v2/shop/auth_partner?partner_id=1000016&amp;redirect=https://open.shopee.com&amp;timestamp=1657254106&amp;sign=47e8712bb89dbc7c7f71eb690310d089b951801cb104763981de5b3dacc3f07c</u></p><p><span style=\"background-color:rgb(255,255,255);color:rgb(51,51,51);\">（Chinese Mainland）</span></p><p><span style=\"background-color:rgb(255,255,255);color:rgb(51,51,51);\"><u>https://openplatform.sandbox.test-stable.shopee.cn/</u></span><u>api/v2/shop/auth_partner?partner_id=10090&amp;redirect=https://open.shopee.com&amp;timestamp=1594897040&amp;sign=90c12d3932f3826f0c72242e1ec6492eec9a1298658f41f7a9469664801c4e5a</u></p><figure class=\"table\"><table><tbody><tr><td><p>⚠️<strong> Note</strong></p><p>The timestamp used to calculate the sign is only valid for 5 minutes. After the timestamp and the sign expire, the authorization link will no longer be valid, and you need to generate a new link.</p></td></tr></tbody></table></figure><h2><span style=\"color:#2B2C2D;\">Acquiring authorizations from shop(s)</span></h2><p>&nbsp;</p><p>After you share the authorization link with the seller, the seller needs to log in to their account, fill in the verification code sent to their mobile phone, and enter the authorization page.</p><p>&nbsp;</p><p>The seller can use a <strong>shop account</strong> to authorize a single shop or a <strong>main account</strong> to authorize multiple merchants/shops. Sub-accounts cannot be used to log in to the authorization page.</p><figure class=\"table\"><table><tbody><tr><td><p>⚠️<strong> Note</strong></p><p><strong>Seller In-house System</strong> App types can only be authorized to access data from the seller’s own shop. You must also log in to the developer account too.</p></td></tr></tbody></table></figure><h3><span style=\"color:#2B2C2D;\"><strong>Authorizing from a shop account&nbsp;</strong></span></h3><p>&nbsp;</p><p>1. The seller fills in their login details and selects <strong>Log In</strong>.</p><figure class=\"image image_resized\" style=\"width:811px;\"><img src=\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=KBASnrCAFko2mX9S0T89U%2FSoT4CJMyAjC1M1ZSkJQ1ZNGsMzm0ze%2F7IWwW0sm2fwR4Oe0IYvVEzUYBwXbEwctA%3D%3D&amp;image_type=png\"></figure><p>&nbsp;</p><p><span style=\"background-color:rgb(255,255,255);\">2. The seller fills in the verification code sent to their mobile phone and selects <strong>Verify</strong>.</span></p><figure class=\"image image_resized\" style=\"width:740px;\"><img src=\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=UCU7KvaUzAaB2HKVcZFMWNv%2F%2BQ5uquLHwmjRaybfr8fXkrjrGmyT37Nf4MbtS7bbV2Ac5hCEZLXfPrlPFBAf2Q%3D%3D&amp;image_type=png\"></figure><p>&nbsp;</p><p>3. Upon logging in, the seller selects <strong>Confirm Authorization</strong>.</p><figure class=\"image image_resized\" style=\"width:944px;\"><img src=\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=m%2FSS%2FEpwlZ3gfVkoRF1djvREdKCwVR9jmnlr%2F27y6Di2GBlc4SLS6to8TZpplR%2BcgzYukxpFREyhox1zH5ZdvA%3D%3D&amp;image_type=png\"></figure><p>&nbsp;</p><p>4. After authorization, the front-end page will redirect to the redirect URL in your authorization link:</p><p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://open.shopee.com/?code=xxxxxxxxxx&amp;shop_id=xxxxxx\"><u>https://open.shopee.com/?code=xxxxxxxxxx&amp;shop_id=xxxxxx</u></a></p><h3><span style=\"color:#2B2C2D;\"><strong>Authorizing from a main account</strong></span></h3><p>&nbsp;</p><p>1. To log in to a main account, the seller selects <strong>Switch to Sub Account</strong> on the login page.</p><figure class=\"image image_resized\" style=\"width:759px;\"><img src=\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=LYatUvT%2Fl8dbnhsm%2BMmkTQmzN%2F5EtrHRXU1xvTFwDYiY9j4Nbvs6%2FZas7rxt5tOp57UEYs3r%2BCU2uYIDPd90sA%3D%3D&amp;image_type=png\"></figure><p>&nbsp;</p><p>2. The seller can then fill in their login details and select <strong>Log In</strong>.</p><figure class=\"image image_resized\" style=\"width:841px;\"><img src=\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=54kRFFgx%2FwQKfDOSLWx%2FxA%2FS8gkeyp2%2FxZ%2BYlQdiBeaSNwpe%2BhFefIE0jzeh%2Fh1a15BGXOB7v%2BliFgZVKPA5%2BA%3D%3D&amp;image_type=png\"></figure><p>&nbsp;</p><p>3. The seller selects the shops that need to be authorized.</p><p>Note: For cross border sellers, If you need to call the merchant’s API, please remind the seller to select the <strong>Auth Merchant</strong> checkbox.</p><figure class=\"image image_resized\" style=\"width:912px;\"><img src=\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=clJ%2FGp14b1rbcJubC%2FO9DPSOfrTNvHIdy9PaV%2FdiRYEjg3LGHYATF5k%2BgKl9ljsVyCrHhnnJa69TKjIRDUXKNA%3D%3D&amp;image_type=png\"></figure><p>Local main account authorization:&nbsp;</p><figure class=\"image image_resized\" style=\"width:941px;\"><img src=\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=sU6aM4h8CpO5ULk%2FFPPkwoDldBRTslGuYAAjPFyeVOHjeyHsPcpV8JFjLqg0FGlBSvF%2FyYG2KECYJfphOUxDcw%3D%3D&amp;image_type=png\"></figure><p>4. The seller selects <strong>Confirm Authorization</strong> to confirm their selection.</p><figure class=\"image\"><img src=\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=M1jgkj8787sKyfBsBvnvHTQ26QPOPmse%2FMAGZSnZNGsFmvCvHYC0HajOw9bEIPJu7pHgo2dyrwFJqhrP1%2BWMXQ%3D%3D&amp;image_type=png\"></figure><p>&nbsp;</p><p>5. After authorization, the front-end page will redirect to the redirect URL in your authorization link:</p><p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://open.shopee.com/?code=xxxxxx&amp;main_account_id=xxxxxx\"><u>https://open.shopee.com/?code=xxxxxx&amp;main_account_id=xxxxxx</u></a></p><h2><span style=\"color:#2B2C2D;\">Using the authorization code</span></h2><p>After the seller has granted authorization, Open Platform will return the authorization code to the callback address redirect URL. You can then use the code to get access_token for the first time.</p><p>&nbsp;</p><p>If authorization was done on a <strong>shop account</strong>, a code and shop_id will be returned in the redirect URL.</p><p>If authorization was done on a <strong>main account</strong>, a code and main_account_id will be returned in the redirect URL.</p><p>&nbsp;</p><figure class=\"table\"><table><thead><tr><th><strong>Parameter name</strong></th><th><strong>Type</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>code</td><td>string</td><td>Returned when the call is successful. This code is used to obtain access_token and refresh_token. It is valid for only once and expires after 10 minutes.</td></tr><tr><td>shop_id</td><td>int</td><td>The ID of the shop that just granted authorization to your App. Returned after authorization was done on a shop account.&nbsp;</td></tr><tr><td>main_account_id</td><td>int</td><td>The ID of the main account that just granted authorization to your shop. . Returned after authorization was done on a main account.</td></tr></tbody></table></figure><h2><span style=\"color:#2B2C2D;\">Getting and refreshing the access_token</span></h2><p>&nbsp;</p><p>The access_token is a dynamic token, and you need to pass access_token to call non-public APIs. Each access_token is valid for 4 hours and can be used multiple times within 4 hours. However, you need to refresh the access token by calling RefreshAccessToken before it expires in order to obtain a new access_token.</p><p>&nbsp;</p><p>Refresh_token is a parameter used to refresh access_token. Each refresh_token is valid for 30 days.</p><p>&nbsp;</p><p>⚠️<strong> Note</strong></p><p>The access_token and refresh_token of each shop_id and merchant_id need to be saved separately.</p><h3><span style=\"color:#2B2C2D;\"><strong>GetAccesstoken</strong></span></h3><p>&nbsp;</p><p>After successful authorization, use the code and shop_id or main_account_id in the redirect URL to call this API. This helps you obtain the shop_id, merchant_id, access_token and refresh_token.</p><p>&nbsp;</p><p>Path:</p><p>Production environment:<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://partner.shopeemobile.com/api/v1/shop/auth_partner\"> </a><u>https://partner.shopeemobile.com/api/v2/auth/token/get</u>&nbsp;</p><p><span style=\"background-color:rgb(255,255,255);color:rgb(51,51,51);\">（Chinese Mainland）：</span><u>https://</u><span style=\"background-color:rgb(255,255,255);color:rgb(51,51,51);\"><u>openplatform.shopee.cn</u></span><u>/api/v2/auth/token/get&nbsp;</u></p><p>Sandbox environment: <u>https://openplatform.sandbox.test-stable.shopee.sg/api/v2/auth/token/get</u>&nbsp;</p><p><span style=\"background-color:rgb(255,255,255);color:rgb(51,51,51);\">（Chinese Mainland）：<u>https://openplatform.sandbox.test-stable.shopee.cn</u></span><u>/api/v2/auth/token/get&nbsp;</u></p><p>&nbsp;</p><p>Request method: <strong>POST</strong></p><p>&nbsp;</p><p>Common parameters:</p><figure class=\"table\"><table><thead><tr><th><strong>Parameter name</strong></th><th><strong>Type</strong></th><th><strong>Required</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>sign</td><td>string</td><td>True</td><td>The signature obtained by sign base string (order: partner_id, api path, timestamp...) HMAC-SHA256 hashing with the partner_key.</td></tr><tr><td>partner_id</td><td>int</td><td>True</td><td>The partner_id obtained from the App. This partner_id is put into the query.</td></tr><tr><td>timestamp</td><td>int</td><td>True</td><td>Timestamp, valid for 5 minutes.</td></tr></tbody></table></figure><p>&nbsp;</p><p>Request parameters:</p><figure class=\"table\"><table><thead><tr><th><strong>Parameter name</strong></th><th><strong>Type</strong></th><th><strong>Required</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>code</td><td>string</td><td>True</td><td>The code in the redirect URL after authorization. It is only valid once and expires after 10 minutes.</td></tr><tr><td>partner_id</td><td>int</td><td>True</td><td>The partner_id obtained from the App. This partner_id is put into the request body.</td></tr><tr><td>shop_id</td><td>int</td><td rowspan=\"2\"><p>&nbsp;</p><p>True, input 1 only.</p></td><td>For the shop_id authorized to you, either the shop_id or main_account_id can be selected as the input parameter.</td></tr><tr><td>main_account_id</td><td>int</td><td>For the main_account_id authorized to you, either the shop_id or main_account_id can be selected as the input parameter.</td></tr></tbody></table></figure><p>&nbsp;</p><p>Response parameters:</p><figure class=\"table\"><table><thead><tr><th><strong>Parameter name</strong></th><th><strong>Type</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>request_id</td><td>string</td><td>ID of API requests; always returned. Used to diagnose problems.</td></tr><tr><td>error</td><td>string</td><td><p>Error codes for API requests; always returned.&nbsp;</p><p>When the API call is successful, the error code returned is empty.</p></td></tr><tr><td>refresh_token</td><td>string</td><td><p>Returned when the API call is successful.&nbsp;</p><p>Use refresh_token to get a new access_token. Valid for each shop_id and merchant_id respectively, for 30 days.</p></td></tr><tr><td>access_token</td><td>string</td><td><p>Returned when the API call is successful.&nbsp;</p><p>A dynamic token that can be used multiple times and expires after 4 hours.</p></td></tr><tr><td>expire_in</td><td>int</td><td><p>Returned when the API call is successful.&nbsp;</p><p>The validity period of the access_token, in seconds.</p></td></tr><tr><td>message</td><td>string</td><td>Always returned. Provides detailed error information.</td></tr><tr><td>merchant_id_list</td><td>int[ ]</td><td>Returned when there is main_account_id in the input parameter, including all the merchant_ids authorized this time under the main account.</td></tr><tr><td>shop_id_list</td><td>int[ ]</td><td>Returned when there is main_account_id in the input parameter, including all shop_ids authorized this time under the main account.</td></tr></tbody></table></figure><p>&nbsp;</p><p><span style=\"background-color:rgb(255,255,255);\">Python Code Demo:</span></p><pre><code class=\"python hljs\">print(shop_auth())\n# first time request token\ndef get_token_shop_level(code, partner_id, tmp_partner_key, shop_id):\n    timest = int(time.time())\n    host = \"https://partner.shopeemobile.com\"\n    path = \"/api/v2/auth/token/get\"\n    body = {\"code\": code, \"shop_id\": shop_id, \"partner_id\": partner_id}\n    tmp_base_string = \"%s%s%s\" % (partner_id, path, timest)\n    base_string = tmp_base_string.encode()\n    partner_key = tmp_partner_key.encode()\n    sign = hmac.new(partner_key, base_string, hashlib.sha256).hexdigest()\n    url = host + path + \"?partner_id=%s&amp;timestamp=%s&amp;sign=%s\" % (partner_id, timest, sign)\n    # print(url)\n    headers = {\"Content-Type\": \"application/json\"}\n    resp = requests.post(url, json=body, headers=headers)\n    ret = json.loads(resp.content)\n    access_token = ret.get(\"access_token\")\n    new_refresh_token = ret.get(\"refresh_token\")\n    return access_token, new_refresh_token\n\n\ndef get_token_account_level(code, partner_id, tmp_partner_key, main_account_id):\n    timest = int(time.time())\n    host = \"https://openplatform.sandbox.test-stable.shopee.sg\"\n    path = \"/api/v2/auth/token/get\"\n    body = {\"code\": code, \"main_account_id\": main_account_id, \"partner_id\": partner_id}\n    tmp_base_string = \"%s%s%s\" % (partner_id, path, timest)\n    base_string = tmp_base_string.encode()\n    partner_key = tmp_partner_key.encode()\n    sign = hmac.new(partner_key, base_string, hashlib.sha256).hexdigest()\n    url = host + path + \"?partner_id=%s&amp;timestamp=%s&amp;sign=%s\" % (partner_id, timest, sign)\n\n    headers = {\"Content-Type\": \"application/json\"}\n    resp = requests.post(url, json=body, headers=headers)\n    ret = json.loads(resp.content)\n    access_token = ret.get(\"access_token\")\n    new_refresh_token = ret.get(\"refresh_token\")\n    return access_token, new_refresh_token</code></pre><p>&nbsp;</p><p>Java<span style=\"background-color:rgb(255,255,255);\"> Code Demo:</span></p><pre><code class=\"java hljs\">import com.alibaba.fastjson.JSONObject;\nimport javax.crypto.Mac;\nimport javax.crypto.spec.SecretKeySpec;\nimport java.io.*;\nimport java.math.BigInteger;\nimport java.nio.charset.StandardCharsets;\nimport java.text.ParseException;\nimport java.util.HashMap;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\nimport java.util.Map;\nimport com.alibaba.fastjson.JSON;\n\n\npublic class shop_auth {\n    public static void main(String[] args) throws ParseException, IOException {\n        shop_auth();\n        //get_token_shop_level(code,partner_id,partner_key,shop_id);\n    }\n    //generate auth url\n    public static void shop_auth(){\n        long timest = System.currentTimeMillis() / 1000L;\n        String host = \"https://partner.shopeemobile.com\";\n        String path = \"/api/v2/shop/auth_partner\";\n        String redirect_url = \"https://www.baidu.com/\";\n        long partner_id = 123456L;\n        String tmp_partner_key = \"...\";\n        String tmp_base_string = String.format(\"%s%s%s\", partner_id, path, timest);\n        byte[] partner_key;\n        byte[] base_string;\n        String sign = \"\";\n        try {\n            base_string = tmp_base_string.getBytes(\"UTF-8\");\n            partner_key = tmp_partner_key.getBytes(\"UTF-8\");\n            Mac mac = Mac.getInstance(\"HmacSHA256\");\n            SecretKeySpec secret_key = new SecretKeySpec(partner_key, \"HmacSHA256\");\n            mac.init(secret_key);\n            sign = String.format(\"%064x\",new BigInteger(1,mac.doFinal(base_string)));\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        String url = host + path + String.format(\"?partner_id=%s&amp;timestamp=%s&amp;sign=%s&amp;redirect=%s\", partner_id,timest, sign, redirect_url);\n        System.out.println(url);\n    }\n\n    //shop request for access token for the first time\n    public static String[] get_token_shop_level(String code,long partner_id,String tmp_partner_key,long shop_id) throws ParseException,IOException{\n        String[] res = new String[2];\n        long timest = System.currentTimeMillis() / 1000L;\n        String host = \"https://partner.shopeemobile.com\";\n        String path = \"/api/v2/auth/token/get\";\n        String tmp_base_string = String.format(\"%s%s%s\", partner_id, path, timest);\n        byte[] partner_key;\n        byte[] base_string;\n        BigInteger sign = null;\n        String result = \"\";\n        try {\n            base_string = tmp_base_string.getBytes(\"UTF-8\");\n            partner_key = tmp_partner_key.getBytes(\"UTF-8\");\n            Mac mac = Mac.getInstance(\"HmacSHA256\");\n            SecretKeySpec secret_key = new SecretKeySpec(partner_key, \"HmacSHA256\");\n            mac.init(secret_key);\n            sign = new BigInteger(1,mac.doFinal(base_string));\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        String tmp_url = host + path + String.format(\"?partner_id=%s&amp;timestamp=%s&amp;sign=%s\", partner_id,timest, String.format(\"%032x\",sign));\n        URL url = new URL(tmp_url);\n        HttpURLConnection conn = null;\n        PrintWriter out = null;\n        BufferedReader in = null;\n        try {\n            conn = (HttpURLConnection) url.openConnection();\n            conn.setRequestMethod(\"POST\");\n            conn.setDoOutput(true);\n            conn.setDoInput(true);\n            conn.setConnectTimeout(30000);\n            conn.setReadTimeout(10000);\n            conn.setRequestProperty(\"Content-Type\", \"application/json\");\n            conn.setRequestProperty(\"Accept\", \"application/json\");\n            Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();\n            map.put(\"code\",code);\n            map.put(\"shop_id\",shop_id);\n            map.put(\"partner_id\",partner_id);\n            String json = JSON.toJSONString(map);\n            conn.connect();\n            out = new PrintWriter(conn.getOutputStream());\n            out.print(json);\n            out.flush();\n            in = new BufferedReader(new InputStreamReader(conn.getInputStream()));\n            String line = \"\";\n            while((line=in.readLine())!=null){\n                result +=line;\n            }\n            JSONObject jsonObject = JSONObject.parseObject(result);\n            res[0] = (String) jsonObject.get(\"access_token\");\n            res[1] = (String) jsonObject.get(\"refresh_token\");\n        } catch(Exception e){\n            e.printStackTrace();\n        }finally {\n            try{\n                if(out != null){\n                    out.close();\n                }\n                if(in != null){\n                    in.close();\n                }\n            }catch (IOException ioe){\n                ioe.printStackTrace();\n            }\n        }\n        return res;\n    }\n\n    //main account request for the access token for the first time\n    public static String[] get_token_account_level(String code,long partner_id,String tmp_partner_key,long main_account_id) throws ParseException,IOException{\n        String[] res = new String[2];\n        long timest = System.currentTimeMillis() / 1000L;\n        String host = \"https://openplatform.sandbox.test-stable.shopee.sg\";\n        String path = \"/api/v2/auth/token/get\";\n        String tmp_base_string = String.format(\"%s%s%s\", partner_id, path, timest);\n        byte[] partner_key;\n        byte[] base_string;\n        BigInteger sign = null;\n        String result = \"\";\n        try {\n            base_string = tmp_base_string.getBytes(\"UTF-8\");\n            partner_key = tmp_partner_key.getBytes(\"UTF-8\");\n            Mac mac = Mac.getInstance(\"HmacSHA256\");\n            SecretKeySpec secret_key = new SecretKeySpec(partner_key, \"HmacSHA256\");\n            mac.init(secret_key);\n            sign = new BigInteger(1,mac.doFinal(base_string));\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        String tmp_url = host + path + String.format(\"?partner_id=%s&amp;timestamp=%s&amp;sign=%s\", partner_id,timest, String.format(\"%032x\",sign));\n        URL url = new URL(tmp_url);\n        HttpURLConnection conn = null;\n        PrintWriter out = null;\n        BufferedReader in = null;\n        try {\n            conn = (HttpURLConnection) url.openConnection();\n            conn.setRequestMethod(\"POST\");\n            conn.setDoOutput(true);\n            conn.setDoInput(true);\n            conn.setConnectTimeout(30000);\n            conn.setReadTimeout(10000);\n            conn.setRequestProperty(\"Content-Type\", \"application/json\");\n            conn.setRequestProperty(\"Accept\", \"application/json\");\n            Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();\n            map.put(\"code\",code);\n            map.put(\"main_account_id\",main_account_id);\n            map.put(\"partner_id\",partner_id);\n            String json = JSON.toJSONString(map);\n            conn.connect();\n            out = new PrintWriter(conn.getOutputStream());\n            out.print(json);\n            out.flush();\n            in = new BufferedReader(new InputStreamReader(conn.getInputStream()));\n            String line = \"\";\n            while((line=in.readLine())!=null){\n                result +=line;\n            }\n            JSONObject jsonObject = JSONObject.parseObject(result);\n            res[0] = (String) jsonObject.get(\"access_token\");\n            res[1] = (String) jsonObject.get(\"refresh_token\");\n        } catch(Exception e){\n            e.printStackTrace();\n        }finally {\n            try{\n                if(out != null){\n                    out.close();\n                }\n                if(in != null){\n                    in.close();\n                }\n            }catch (IOException ioe){\n                ioe.printStackTrace();\n            }\n        }\n        return res;\n    }</code></pre><p>&nbsp;</p><p><span style=\"background-color:rgb(255,255,255);\">PHP Code Demo:</span></p><pre><code class=\"php hljs\">&lt;?php \n\nfunction getTokenShopLevel($code, $partnerId, $partnerKey, $shopId) {\n    global $host;\n    $path = \"/api/v2/auth/token/get\";\n    \n    $timest = time();\n    $body = array(\"code\" =&gt; $code,  \"shop_id\" =&gt; $shopId, \"partner_id\" =&gt; $partnerId);\n    $baseString = sprintf(\"%s%s%s\", $partnerId, $path, $timest);\n    $sign = hash_hmac('sha256', $baseString, $partnerKey);\n    $url = sprintf(\"%s%s?partner_id=%s&amp;timestamp=%s&amp;sign=%s\", $host, $path, $partnerId, $timest, $sign);\n    \n\n    $c = curl_init($url);\n    curl_setopt($c, CURLOPT_POST, 1);\n    curl_setopt($c, CURLOPT_POSTFIELDS, json_encode($body));\n    curl_setopt($c, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));\n    curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);\n    $resp = curl_exec($c);\n    echo \"raw result: $resp\";\n\n    $ret = json_decode($resp, true);\n    $accessToken = $ret[\"access_token\"];\n    $newRefreshToken = $ret[\"refresh_token\"];\n    echo \"\\naccess_token: $accessToken, refresh_token: $newRefreshToken raw: $ret\".\"\\n\";\n    return $ret;\n}\n\n\nfunction getTokenAccountLevel($code, $partnerId, $partnerKey, $mainAccountId) {\n    global $host;\n    $path = \"/api/v2/auth/token/get\";\n    \n    $timest = time();\n    $body = array(\"code\" =&gt; $code,  \"main_account_id\" =&gt; $mainAccountId, \"partner_id\" =&gt; $partnerId);\n    $baseString = sprintf(\"%s%s%s\", $partnerId, $path, $timest);\n\n    $sign = hash_hmac('sha256', $baseString, $partnerKey);\n    $url = sprintf(\"%s%s?partner_id=%s&amp;timestamp=%s&amp;sign=%s\", $host, $path, $partnerId, $timest, $sign);\n\n    $c = curl_init($url);\n    curl_setopt($c, CURLOPT_POST, 1);\n    curl_setopt($c, CURLOPT_POSTFIELDS, json_encode($body));\n    curl_setopt($c, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));\n    curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);\n    $result = curl_exec($c);\n    echo \"\\nraw result \".$result.\"\\n\";\n\n    $ret = json_decode($result, true);\n    $accessToken = $ret[\"access_token\"];\n    $newRefreshToken = $ret[\"refresh_token\"];\n    echo \"\\naccess_token: \".$accessToken.\", refresh_token: \".$newRefreshToken.\"\\n\";\n    return $ret;\n}\n\n$host=\"https://partner.shopeemobile.com\";\n\n$partnerId = 847892;\n$partnerKey = \"57615053704d6470644f554a78656d50484143644964436a5568777544524579\";\n\n$code=\"494d7a4a4f5a66524556776f66425453\";\n\n// $shopId=200520705;\n// getTokenShopLevel($code, $partnerId, $partnerKey, $shopId);\n\n$accountId=19479;\ngetTokenAccountLevel($code, $partnerId, $partnerKey, $accountId)\n\n?&gt;</code></pre><h3><span style=\"color:#2B2C2D;\"><strong>RefreshAccessToken</strong></span></h3><p>&nbsp;</p><p>Before the access_token expires, refresh it by using refresh_token to call this API. After the API call, a new refresh_token and access_token will be returned at the same time.The new refresh_token needs to be used the next time this API is called.</p><p>&nbsp;</p><p>Path:</p><p>Production environment:<a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://partner.shopeemobile.com/api/v1/shop/auth_partner\"> </a><u>https://partner.shopeemobile.com/api/v2/auth/access_token/get&nbsp;</u></p><p><span style=\"background-color:rgb(255,255,255);color:rgb(51,51,51);\">（Chinese Mainland）:</span><u>https://</u><span style=\"background-color:rgb(255,255,255);color:rgb(51,51,51);\"><u>openplatform.shopee.cn</u></span><u>/api/v2/auth/access_token/get&nbsp;</u></p><p>Sandbox environment: <u>https://openplatform.sandbox.test-stable.shopee.sg/api/v2/auth/access_token/get</u></p><p><span style=\"background-color:rgb(255,255,255);color:rgb(51,51,51);\">（Chinese Mainland）:<u>https://openplatform.sandbox.test-stable.shopee.cn</u></span><u>/api/v2/auth/access_token/get&nbsp;</u></p><p>&nbsp;</p><p>Request method: <strong>POST</strong></p><figure class=\"table\"><table><tbody><tr><td><p>⚠️<strong> Note</strong></p><p>Each main_account_id will get the same initial access_token and refresh_token when calling GetAccessToken API for the first time&nbsp;</p><p><br>&nbsp;</p><p>However, after calling the RefreshAccessToken API for the first time, a new set of independent access_token and refresh_token will be generated for each shop_id and merchant_id.</p><p><br>&nbsp;</p><p>Here is an example:</p><ol><li>The first access_token and refresh_token obtained from calling GetAccessToken API for the first time is applicable to 7 shop_ids and 3 merchant_ids.</li><li>After the first access_token expires, you use the first refresh_token to call RefreshAccessToken.</li><li>You obtain 10 sets of independent access_token and refresh_token for each shop_id and merchant_id. Subsequently, shop_id and merchant_id no longer share any access_token or refresh_token.</li></ol></td></tr></tbody></table></figure><p>&nbsp;</p><p>Public parameters:</p><figure class=\"table\"><table><thead><tr><th><strong>Parameter name</strong></th><th><strong>Type</strong></th><th><strong>Required</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>sign</td><td>string</td><td>True</td><td>The signature obtained by sign base string (order: partner_id, api path, timestamp...) HMAC-SHA256 hashing with the partner_key.</td></tr><tr><td>partner_id</td><td>int</td><td>True</td><td>The partner_id obtained from the APP. This partner_id is put into the query.</td></tr><tr><td>timestamp</td><td>int</td><td>True</td><td>Timestamp, valid for 5 minutes.</td></tr></tbody></table></figure><p>&nbsp;</p><p>Request parameters:</p><figure class=\"table\"><table><thead><tr><th><strong>Parameter name</strong></th><th><strong>Type</strong></th><th><strong>Required</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>refresh_token</td><td>string</td><td>True</td><td>Use refresh_token to get a new access_token. <span style=\"background-color:rgb(255,255,255);\">Each refresh_token is valid for 30 days, and can only be used once by either a shop_id or merchant_id.</span></td></tr><tr><td>partner_id</td><td>int</td><td>True</td><td>The partner_id obtained from the App. This partner_id is inserted into the body.</td></tr><tr><td>shop_id</td><td>int</td><td rowspan=\"2\"><p>&nbsp;</p><p>&nbsp;</p><p>Yes, input 1 only.&nbsp;</p></td><td><p>The shop_id of the main account that granted authorization to your App. Only the shop_id <strong>or </strong>merchant_id can be selected as the input parameter, and they must be refreshed separately.</p><p><br>&nbsp;</p></td></tr><tr><td>merchant_id</td><td>int</td><td><p>The merchant_id for identifying the main account that granted authorization to your App. Only the shop_id <strong>or </strong>merchant_id can be selected as the input parameter, and they must be refreshed separately.</p><p><br>&nbsp;</p></td></tr></tbody></table></figure><p>&nbsp;</p><p>Response parameters:</p><figure class=\"table\"><table><thead><tr><th><strong>Parameter name</strong></th><th><strong>Type</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>request_id</td><td>string</td><td><p>ID of API requests; always returned.&nbsp;</p><p>Used to diagnose problems.&nbsp;</p><p><br>&nbsp;</p></td></tr><tr><td>error</td><td>string</td><td><p>Error codes for API requests; always returned.&nbsp;</p><p>When the API call is successful, the error code returned is empty.</p></td></tr><tr><td>refresh_token</td><td>string</td><td><p>New refresh_token</p><p>Returned when the API call is successful.&nbsp;</p><p>Use a refresh_token to get a new access_token.&nbsp;</p><p><span style=\"background-color:rgb(255,255,255);\">Each refresh_token is valid for 30 days, and can only be used once by either a shop_id or merchant_id.</span></p></td></tr><tr><td>access_token</td><td>string</td><td><p>Returned when the API call is successful.&nbsp;</p><p>Each new access_token is a dynamic token that can be used multiple times. It expires after 4 hours.</p></td></tr><tr><td>expire_in</td><td>int</td><td><p>Returned when the API call is successful.&nbsp;</p><p>The validity period of the access_token, in seconds.</p></td></tr><tr><td>message</td><td>string</td><td>Always returned. Provides detailed error information.</td></tr><tr><td>merchant_id</td><td>int</td><td><p>Returned when the API call is successful.&nbsp;</p><p>The merchant_id for this refresh, for identifying each merchant.</p></td></tr><tr><td>shop_id</td><td>int</td><td><p>Returned when the API call is successful.&nbsp;</p><p>The shop_id for this refresh</p></td></tr><tr><td>partner_id</td><td>int</td><td><p>Returned when the API call is successful.&nbsp;</p><p>The partner_id you used for this refresh</p></td></tr></tbody></table></figure><figure class=\"table\"><table><tbody><tr><td><p>⚠️<strong> Notes</strong></p><ul><li>After a new access_token is generated, the old access_token is still valid for 5 minutes.</li><li>Re-authorization will trigger a refresh of refresh_token and access_token.</li><li>You must call the RefreshAccessToken API within the validity period of the authorization.</li><li>If you did not save the new refresh_token and access_token returned, <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://open.shopee.com/faq?top=177&amp;sub=180&amp;page=1&amp;faq=216\"><u>see possible solutions</u></a>.</li></ul></td></tr></tbody></table></figure><p>&nbsp;</p><p>Python Code Demo:</p><pre><code class=\"python hljs\"># refresh token\n\n\ndef get_access_token_shop_level(shop_id, partner_id, tmp_partner_key, refresh_token):\n    timest = int(time.time())\n    host = \"https://openplatform.sandbox.test-stable.shopee.sg\"\n    path = \"/api/v2/auth/access_token/get\"\n    body = {\"shop_id\": shop_id, \"refresh_token\": refresh_token,\"partner_id\":partner_id}\n    tmp_base_string = \"%s%s%s\" % (partner_id, path, timest)\n    base_string = tmp_base_string.encode()\n    partner_key = tmp_partner_key.encode()\n    sign = hmac.new(partner_key, base_string, hashlib.sha256).hexdigest()\n    url = host + path + \"?partner_id=%s&amp;timestamp=%s&amp;sign=%s\" % (partner_id, timest, sign)\n    # print(url)\n    headers = {\"Content-Type\": \"application/json\"}\n    resp = requests.post(url, json=body, headers=headers)\n    ret = json.loads(resp.content)\n    access_token = ret.get(\"access_token\")\n    new_refresh_token = ret.get(\"refresh_token\")\n    return access_token, new_refresh_token\n\n\ndef get_access_token_merchant_level(merchant_id, partner_id, tmp_partner_key, refresh_token):\n    timest = int(time.time())\n    host = \"https://openplatform.sandbox.test-stable.shopee.sg\"\n    path = \"/api/v2/auth/access_token/get\"\n    body = {\"merchant_id\": merchant_id, \"refresh_token\": refresh_token}\n    tmp_base_string = \"%s%s%s\" % (partner_id, path, timest)\n    base_string = tmp_base_string.encode()\n    partner_key = tmp_partner_key.encode()\n    sign = hmac.new(partner_key, base_string, hashlib.sha256).hexdigest()\n    url = host + path + \"?partner_id=%s&amp;timestamp=%s&amp;sign=%s\" % (partner_id, timest, sign)\n\n    headers = {\"Content-Type\": \"application/json\"}\n    resp = requests.post(url, json=body, headers=headers)\n    ret = json.loads(resp.content)\n    access_token = ret.get(\"access_token\")\n    new_refresh_token = ret.get(\"refresh_token\")\n    return access_token, new_refresh_token\n\npartner_id = 2006566\npartner_key = \"1a78dde5d6c3342f56ac939cbdd81607654c0e87725e118736ba5e3ae31c579c\"\nshop_id = 602226924\nmain_account_id = 31219\nmerchant_id = 45719\ncode = \"c01204cada7b4cd0e4688154f5a256ca\"\nprint(shop_auth())\n# access_token,refresh_token = get_token_shop_level(code,partner_id,partner_key,602226924)\n# print(access_token)\n# print(refresh_token)\n# print(get_access_token_shop_level(shop_id,partner_id,partner_key,refresh_token))\n\n\naccess_token,refresh_token = get_token_account_level(code,partner_id,partner_key,main_account_id)\nprint(access_token)\nprint(refresh_token)\nprint(get_access_token_merchant_level(merchant_id,partner_id,partner_key,refresh_token))\n   </code></pre><p>&nbsp;</p><p>Java<span style=\"background-color:rgb(255,255,255);\"> Code Demo:</span></p><pre><code class=\"java hljs\">\n    //shop refresh the access token\n    public static String[] get_access_token_shop_level(String refresh_token,long partner_id,String tmp_partner_key,long shop_id) throws ParseException,IOException{\n        String[] res = new String[2];\n        long timest = System.currentTimeMillis() / 1000L;\n        String host = \"https://partner.shopeemobile.com\";\n        String path = \"/api/v2/auth/access_token/get\";\n        String tmp_base_string = String.format(\"%s%s%s\", partner_id, path, timest);\n        byte[] partner_key;\n        byte[] base_string;\n        BigInteger sign = null;\n        String result = \"\";\n        try {\n            base_string = tmp_base_string.getBytes(\"UTF-8\");\n            partner_key = tmp_partner_key.getBytes(\"UTF-8\");\n            Mac mac = Mac.getInstance(\"HmacSHA256\");\n            SecretKeySpec secret_key = new SecretKeySpec(partner_key, \"HmacSHA256\");\n            mac.init(secret_key);\n            sign = new BigInteger(1,mac.doFinal(base_string));\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        String tmp_url = host + path + String.format(\"?partner_id=%s&amp;timestamp=%s&amp;sign=%s\", partner_id,timest, String.format(\"%032x\",sign));\n        URL url = new URL(tmp_url);\n        HttpURLConnection conn = null;\n        PrintWriter out = null;\n        BufferedReader in = null;\n        try {\n            conn = (HttpURLConnection) url.openConnection();\n            conn.setRequestMethod(\"POST\");\n            conn.setDoOutput(true);\n            conn.setDoInput(true);\n            conn.setConnectTimeout(30000);\n            conn.setReadTimeout(10000);\n            conn.setRequestProperty(\"Content-Type\", \"application/json\");\n            conn.setRequestProperty(\"Accept\", \"application/json\");\n            Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();\n            map.put(\"refresh_token\",refresh_token);\n            map.put(\"shop_id\",shop_id);\n            map.put(\"partner_id\",partner_id);\n            String json = JSON.toJSONString(map);\n            conn.connect();\n            out = new PrintWriter(conn.getOutputStream());\n            out.print(json);\n            out.flush();\n            in = new BufferedReader(new InputStreamReader(conn.getInputStream()));\n            String line = \"\";\n            while((line=in.readLine())!=null){\n                result +=line;\n            }\n            JSONObject jsonObject = JSONObject.parseObject(result);\n            res[0] = (String) jsonObject.get(\"access_token\");\n            res[1] = (String) jsonObject.get(\"refresh_token\");\n        } catch(Exception e){\n            e.printStackTrace();\n        }finally {\n            try{\n                if(out != null){\n                    out.close();\n                }\n                if(in != null){\n                    in.close();\n                }\n            }catch (IOException ioe){\n                ioe.printStackTrace();\n            }\n        }\n        return res;\n    }\n\n    //merchant refresh the access token\n    public static String[] get_access_token_merchant_level(String refresh_token,long partner_id,String tmp_partner_key,long merchant_id) throws ParseException,IOException{\n        String[] res = new String[2];\n        long timest = System.currentTimeMillis() / 1000L;\n        String host = \"https://partner.shopeemobile.com\";\n        String path = \"/api/v2/auth/access_token/get\";\n        String tmp_base_string = String.format(\"%s%s%s\", partner_id, path, timest);\n        byte[] partner_key;\n        byte[] base_string;\n        BigInteger sign = null;\n        String result = \"\";\n        try {\n            base_string = tmp_base_string.getBytes(\"UTF-8\");\n            partner_key = tmp_partner_key.getBytes(\"UTF-8\");\n            Mac mac = Mac.getInstance(\"HmacSHA256\");\n            SecretKeySpec secret_key = new SecretKeySpec(partner_key, \"HmacSHA256\");\n            mac.init(secret_key);\n            sign = new BigInteger(1,mac.doFinal(base_string));\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        String tmp_url = host + path + String.format(\"?partner_id=%s&amp;timestamp=%s&amp;sign=%s\", partner_id,timest, String.format(\"%032x\",sign));\n        URL url = new URL(tmp_url);\n        HttpURLConnection conn = null;\n        PrintWriter out = null;\n        BufferedReader in = null;\n        try {\n            conn = (HttpURLConnection) url.openConnection();\n            conn.setRequestMethod(\"POST\");\n            conn.setDoOutput(true);\n            conn.setDoInput(true);\n            conn.setConnectTimeout(30000);\n            conn.setReadTimeout(10000);\n            conn.setRequestProperty(\"Content-Type\", \"application/json\");\n            conn.setRequestProperty(\"Accept\", \"application/json\");\n            Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();\n            map.put(\"refresh_token\",refresh_token);\n            map.put(\"merchant_id\",merchant_id);\n            map.put(\"partner_id\",partner_id);\n            String json = JSON.toJSONString(map);\n            conn.connect();\n            out = new PrintWriter(conn.getOutputStream());\n            out.print(json);\n            out.flush();\n            in = new BufferedReader(new InputStreamReader(conn.getInputStream()));\n            String line = \"\";\n            while((line=in.readLine())!=null){\n                result +=line;\n            }\n            JSONObject jsonObject = JSONObject.parseObject(result);\n            res[0] = (String) jsonObject.get(\"access_token\");\n            res[1] = (String) jsonObject.get(\"refresh_token\");\n        } catch(Exception e){\n            e.printStackTrace();\n        }finally {\n            try{\n                if(out != null){\n                    out.close();\n                }\n                if(in != null){\n                    in.close();\n                }\n            }catch (IOException ioe){\n                ioe.printStackTrace();\n            }\n        }\n        return res;\n    }\n}</code></pre><p>&nbsp;</p><p><span style=\"background-color:rgb(255,255,255);\">PHP Code Demo:</span></p><pre><code class=\"php hljs\">&lt;?php \n\nfunction getAccessTokenShopLevel($partnerId, $partnerKey, $shopId, $refreshToken) {\n    global $host;\n    $path = \"/api/v2/auth/access_token/get\";\n    \n    $timest = time();\n    $body = array(\"partner_id\" =&gt; $partnerId, \"shop_id\" =&gt; $shopId, \"refresh_token\" =&gt; $refreshToken);\n    $baseString = sprintf(\"%s%s%s\", $partnerId, $path, $timest);\n    $sign = hash_hmac('sha256', $baseString, $partnerKey);\n    $url = sprintf(\"%s%s?partner_id=%s&amp;timestamp=%s&amp;sign=%s\", $host, $path, $partnerId, $timest, $sign);\n\n\n    $c = curl_init($url);\n    curl_setopt($c, CURLOPT_POST, 1);\n    curl_setopt($c, CURLOPT_POSTFIELDS, json_encode($body));\n    curl_setopt($c, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));\n    curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);\n\n    $result = curl_exec($c);\n    echo \"\\nraw result \".$result.\"\\n\";\n\n    $ret = json_decode($result, true);\n\n    $accessToken = $ret[\"access_token\"];\n    $newRefreshToken = $ret[\"refresh_token\"];\n    echo \"\\naccess_token: \".$accessToken.\", refresh_token: \".$newRefreshToken.\"\\n\";\n    return $ret;\n}\n\nfunction getAccessTokenMerchantLevel($partnerId, $partnerKey, $merchantId, $refreshToken) {\n    global $host;\n    $path = \"/api/v2/auth/access_token/get\";\n    \n    $timest = time();\n    $body = array(\"partner_id\" =&gt; $partnerId, \"merchant_id\" =&gt; $merchantId, \"refresh_token\" =&gt; $refreshToken);\n    $baseString = sprintf(\"%s%s%s\", $partnerId, $path, $timest);\n    $sign = hash_hmac('sha256', $baseString, $partnerKey);\n    $url = sprintf(\"%s%s?partner_id=%s&amp;timestamp=%s&amp;sign=%s\", $host, $path, $partnerId, $timest, $sign);\n\n\n    $c = curl_init($url);\n    curl_setopt($c, CURLOPT_POST, 1);\n    curl_setopt($c, CURLOPT_POSTFIELDS, json_encode($body));\n    curl_setopt($c, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));\n    curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);\n    $result = curl_exec($c);\n    echo \"\\nraw result \".$result.\"\\n\";\n\n    $ret = json_decode($result, true);\n    $accessToken = $ret[\"access_token\"];\n    $newRefreshToken = $ret[\"refresh_token\"];\n    echo \"\\naccess_token: \".$accessToken.\", refresh_token: \".$newRefreshToken.\"\\n\";\n    return $ret;\n}\n\n$host=\"https://partner.shopeemobile.com\";\n\n$partnerId = 847892;\n$partnerKey = \"57615053704d6470644f554a78656d50484143644964436a5568777544524579\";\n\n\n\n\n// $shopId=200520705;\n// $shopRefreshToken=\"71724c4e68746b546965424c70617244\";\n// getAccessTokenShopLevel($partnerId, $partnerKey, $shopId, $shopRefreshToken)\n\n$merchantId=1018829;\n$merchantRefreshToken=\"546e5064627042696756455277774f53\";\ngetAccessTokenMerchantLevel($partnerId, $partnerKey, $merchantId, $merchantRefreshToken)\n\n?&gt;</code></pre><h3><span style=\"color:#2B2C2D;\"><strong>Refreshing the access_token and refresh_token on a shop account</strong></span></h3><p>&nbsp;</p><p><strong>1.Use the code and shop_id from the redirect URL to call the GetAccessToken API and obtain the first pair of access_token and refresh_token.&nbsp;</strong></p><p><strong>Redirect URL: https://open.shopee.com/?code=7867624d4e76616648544f6e52625557&amp;shop_id=54804)&nbsp;</strong></p><p>Query: https://partner.shopeemobile.com/api/v2/auth/token/get?partner_id=1000016&amp;timestamp=1657263479&amp;sign=9c685bc7e4a74e90f45fe1933f1d72b2d9705acda4093a9fb1ec7e2b57ccea2a</p><p>&nbsp;</p><p><span style=\"background-color:rgb(255,255,255);\">{\"shop_id\":54804,</span></p><p><span style=\"background-color:rgb(255,255,255);\">\"code\":\"7867624d4e76616648544f6e52625557\",</span></p><p><span style=\"background-color:rgb(255,255,255);\">\"partner_id\":1000016</span></p><p><span style=\"background-color:rgb(255,255,255);\">}</span></p><p>&nbsp;</p><p><strong>2.Save the first pair of access_token and refresh_token returned.</strong></p><p><span style=\"background-color:rgb(255,255,255);\">{</span></p><p><span style=\"background-color:rgb(255,255,255);\">&nbsp;&nbsp; \"refresh_token\": \"456e416149664b76745a6a794156794a\",</span></p><p><span style=\"background-color:rgb(255,255,255);\">&nbsp;&nbsp; \"access_token\": \"6a55746e61546f707579627656637464\",</span></p><p><span style=\"background-color:rgb(255,255,255);\">&nbsp;&nbsp; \"expire_in\": 13859,</span></p><p><span style=\"background-color:rgb(255,255,255);\">&nbsp;&nbsp; \"request_id\": \"c040b886cfcabdfa5a23af51c595cd1b\",</span></p><p><span style=\"background-color:rgb(255,255,255);\">&nbsp;&nbsp; \"error\": \"\",</span></p><p><span style=\"background-color:rgb(255,255,255);\">&nbsp;&nbsp; \"message\": \"\"</span></p><p><span style=\"background-color:rgb(255,255,255);\">}</span></p><p>&nbsp;</p><p><strong>3.Call the RefreshAccessToken API to refresh the access_token and refresh_token.</strong></p><p>Query: https://partner.shopeemobile.com<span style=\"background-color:rgb(255,255,255);color:rgb(33,33,33);\">/api/v2/auth/access_token/get</span>?partner_id=1000016&amp;timestamp=1657263479&amp;sign=9c685bc7e4a74e90f45fe1933f1d72b2d9705acda4093a9fb1ec7e2b57ccea2a</p><p>&nbsp;</p><p><span style=\"background-color:rgb(255,255,255);\">{\"shop_id\":54804,</span></p><p><span style=\"background-color:rgb(255,255,255);\">\"refresh_token\":\"456e416149664b76745a6a794156794a\",</span></p><p><span style=\"background-color:rgb(255,255,255);\">\"partner_id\":1000016</span></p><p><span style=\"background-color:rgb(255,255,255);\">}</span></p><p>&nbsp;</p><p><strong>4.Save the new access_token and refresh_token.</strong></p><p><span style=\"background-color:rgb(255,255,255);\">{</span></p><p><span style=\"background-color:rgb(255,255,255);\">&nbsp;&nbsp; \"partner_id\": 1000016,</span></p><p><span style=\"background-color:rgb(255,255,255);\">&nbsp;&nbsp; \"refresh_token\": \"666478546b6c63464867685554477a57\",</span></p><p><span style=\"background-color:rgb(255,255,255);\">&nbsp;&nbsp; \"access_token\": \"7a5970754768697552654a466f425573\",</span></p><p><span style=\"background-color:rgb(255,255,255);\">&nbsp;&nbsp; \"expire_in\": 14400,</span></p><p><span style=\"background-color:rgb(255,255,255);\">&nbsp;&nbsp; \"request_id\": \"6d79dd0ffe4e070e185c71ca5153cd51\",</span></p><p><span style=\"background-color:rgb(255,255,255);\">&nbsp;&nbsp; \"error\": \"\",</span></p><p><span style=\"background-color:rgb(255,255,255);\">&nbsp;&nbsp; \"message\": \"\",</span></p><p><span style=\"background-color:rgb(255,255,255);\">&nbsp;&nbsp; \"shop_id\": 54804</span></p><p><span style=\"background-color:rgb(255,255,255);\">}</span></p><h3><span style=\"color:#2B2C2D;\"><strong>Refreshing the access_token and refresh_token on a main account</strong></span></h3><p>&nbsp;</p><p><strong>1.Use the code and main_account_id from the URL obtained during authorization to call the GetAccessToken API and obtain the first pair of access_token and refresh_token.</strong></p><p><strong>Redirect URL: : https://open.shopee.com/?code=644d4e48787873706c5a444c776d4b59&amp;main_account_id=10208</strong></p><p>Query: https://partner.shopeemobile.com/api/v2/auth/token/get?partner_id=1000016&amp;timestamp=1657263479&amp;sign=9c685bc7e4a74e90f45fe1933f1d72b2d9705acda4093a9fb1ec7e2b57ccea2a</p><p>{\"main_account_id\":10208,</p><p>\"code\":\"644d4e48787873706c5a444c776d4b59\",</p><p>\"partner_id\":1000016</p><p>}</p><p>&nbsp;</p><p><strong>2.Save the first pair of access_token and refresh_token returned.</strong></p><p>{</p><p>&nbsp;&nbsp; \"refresh_token\": \"684d42685667777868597a4477587455\",</p><p>&nbsp;&nbsp; \"access_token\": \"44776151594778486943647644745361\",</p><p>&nbsp;&nbsp; \"expire_in\": 14344,</p><p>&nbsp;&nbsp; \"request_id\": \"9199e13ee74b22411498209cb5516e24\",</p><p>&nbsp;&nbsp; \"merchant_id_list\": [</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1001705</p><p>&nbsp;&nbsp;&nbsp;],</p><p>&nbsp;&nbsp; \"shop_id_list\": [</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 33142,</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 46154</p><p>&nbsp;&nbsp;&nbsp;],</p><p>&nbsp;&nbsp; \"error\": \"\",</p><p>&nbsp;&nbsp; \"message\": \"\"</p><p>}</p><p>&nbsp;</p><p><strong>3.Call the RefreshAccessToken API to refresh the access_token and refresh_token of shop_id and merchant_id respectively</strong></p><p>Query: <span style=\"background-color:rgb(255,255,255);\">https://partner.shopeemobile.com/api/v2/auth/access_token/get?partner_id=1000016&amp;timestamp=1657868745&amp;sign=b78833ddcf533903cfae818bbfcf2b6b630e3bc0c941dd65453632f63bf7b495</span></p><p><span style=\"background-color:rgb(255,255,255);\">{\"shop_id\":33142,</span></p><p><span style=\"background-color:rgb(255,255,255);\">\"refresh_token\":\"684d42685667777868597a4477587455\",</span></p><p><span style=\"background-color:rgb(255,255,255);\">\"partner_id\":1000016</span></p><p><span style=\"background-color:rgb(255,255,255);\">}</span></p><p>Query: <span style=\"background-color:rgb(255,255,255);\">https://partner.shopeemobile.com/api/v2/auth/access_token/get?partner_id=1000016&amp;timestamp=1657868745&amp;sign=b78833ddcf533903cfae818bbfcf2b6b630e3bc0c941dd65453632f63bf7b495</span></p><p><span style=\"background-color:rgb(255,255,255);\">{\"merchant_id\":1001705,</span></p><p><span style=\"background-color:rgb(255,255,255);\">\"refresh_token\":\"684d42685667777868597a4477587455\",</span></p><p><span style=\"background-color:rgb(255,255,255);\">\"partner_id\":1000016</span></p><p><span style=\"background-color:rgb(255,255,255);\">}</span></p><p>&nbsp;</p><p><strong>4.Save the new access_token and refresh_token.</strong></p><p>{</p><p>&nbsp;&nbsp; \"partner_id\": 1000016,</p><p>&nbsp;&nbsp; \"refresh_token\": \"417472546e73504949676279576c477a\",</p><p>&nbsp;&nbsp; \"access_token\": \"646d474965714a696177764963775743\",</p><p>&nbsp;&nbsp; \"expire_in\": 14400,</p><p>&nbsp;&nbsp; \"request_id\": \"78e64d11cb6dec6f6669282839fca916\",</p><p>&nbsp;&nbsp; \"error\": \"\",</p><p>&nbsp;&nbsp; \"message\": \"\",</p><p>&nbsp;&nbsp; \"shop_id\": 33142</p><p>}</p><p>{</p><p>&nbsp;&nbsp; \"partner_id\": 1000016,</p><p>&nbsp;&nbsp; \"refresh_token\": \"715075736d6c6570544364774f437369\",</p><p>&nbsp;&nbsp; \"access_token\": \"69634c664a7350696c6b466d5a53714a\",</p><p>&nbsp;&nbsp; \"expire_in\": 14400,</p><p>&nbsp;&nbsp; \"request_id\": \"51eacbc81bd6fa8fddddf1e0ef2dee16\",</p><p>&nbsp;&nbsp; \"error\": \"\",</p><p>&nbsp;&nbsp; \"message\": \"\",</p><p>&nbsp;&nbsp; \"merchant_id\": 1001705</p><p>}</p><p>&nbsp;</p><p>By following the steps above, you can call the RefreshAccessToken API&nbsp; within 4 hours to get new access_token and refresh_token. Maintaining the API call loop will ensure you can continue to obtain new sets of access_token and refresh_token within the authorization validity period.&nbsp;</p><figure class=\"table\"><table><tbody><tr><td><p>⚠️<strong> Note</strong></p><p>If you did not save the new refresh_token and access_token returned, <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://open.shopee.com/faq?top=177&amp;sub=180&amp;page=1&amp;faq=216\"><u>see possible solutions</u></a>.</p></td></tr></tbody></table></figure><h1><span style=\"color:#2B2C2D;\">Canceling authorization</span></h1><p>&nbsp;</p><p>You can cancel an authorization by changing the authorization URL or via Seller Center.</p><h3><span style=\"color:#2B2C2D;\">Canceling authorization by changing the authorization URL</span></h3><p>&nbsp;</p><p>Follow the same steps to generate an authorization URL, but replace the fixed authorization URL with these fixed deauthorization URLs:</p><ul><li>Production Environment:<ul><li>https://partner.shopeemobile.com/api/v2/shop/cancel_auth_partner?partner_id=10090&amp;redirect=https://open.shopee.com&amp;timestamp=1594897040&amp;sign=90c12d3932f3826f0c72242e1ec6492eec9a1298658f41f7a9469664801c4e5a</li></ul></li></ul><p>&nbsp;</p><ul><li>Sandbox Environment:<ul><li>https://partner.test-stable.shopeemobile.com/api/v2/shop/cancel_auth_partner?partner_id=1000016&amp;redirect=https://open.shopee.com&amp;timestamp=1657254106&amp;sign=47e8712bb89dbc7c7f71eb690310d089b951801cb104763981de5b3dacc3f07c</li></ul></li></ul><p>&nbsp;</p><p><span style=\"background-color:rgb(255,255,255);\">Log in to your account.</span></p><figure class=\"image\"><img src=\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=fqiBwLFttdta5Te0%2FnbxzXzFcsupke1%2BNA2OHgx7yb1SY2iwe2LgKaOg0BsWqPAlP3u2RsebI%2F6btGIy3SIXCQ%3D%3D&amp;image_type=png\"></figure><p><span style=\"background-color:rgb(255,255,255);\">Select <strong>Cancel Authorization</strong>.</span></p><figure class=\"image\"><img src=\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=o9yQ94Cq36TeoBBlNsV9odZZsWQvw%2FOJYgYXVPSV5PmLUFhnbxkEEZiuLnCXbVCeJ1Cs21BXmBtNdTzaC59LJw%3D%3D&amp;image_type=png\"></figure><h3><span style=\"color:#2B2C2D;\">Canceling authorization on Seller Center&nbsp;</span></h3><p>&nbsp;</p><p>On the <strong>Platform Partner</strong> page in Seller Center, sellers can check which Apps the shop has authorized and their corresponding authorization expiration dates. The seller can also directly cancel the authorization of Apps by selecting <strong>Separate</strong> under the <strong>Action</strong> column.</p><figure class=\"image\"><img src=\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=yz4bkpogbbBi5skg05Tr68D2FH7NDD9bdcXDaKojflAyCSNELVaU0efUGodlnzFL7AVUcOfVJk33%2Bh4N%2FfpY8w%3D%3D&amp;image_type=png\"></figure><p>CNSC and KRSC sellers can check which Apps the main account has granted authorization to. On the <strong>Platform Partner</strong> page, sellers can directly cancel any authorizations granted by the merchant or shop.</p><p>&nbsp;</p><figure class=\"image\"><img src=\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=DhqmO1dXSCh%2FsgUDweiMAjJNVZoElu%2FWOygNRX%2Bj5snNNZqD%2BkHsIQXsy9dQFXkc%2Br2AX%2F5inJ97WdBjlhVwfA%3D%3D&amp;image_type=png\"></figure><figure class=\"image\"><img src=\"https://open.shopee.com/opservice/api/v1/image/download/?image_id=6mZRmlhbl%2FiGafGlKE2V%2FT9EWJb%2BSgKCqGxEph9mSTRLBnsBerBG5YTJR%2B%2BawQiufyHh2F2RgifSi7DdrLIclg%3D%3D&amp;image_type=png\"></figure><h1><span style=\"color:#2B2C2D;\">FAQs on authorization and authentication</span></h1><p>&nbsp;</p><p>If you encounter errors during the authorization process, you can refer to our <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://open.shopee.com/faq?top=177&amp;sub=180&amp;page=1&amp;faq=215\"><u>FAQs on authorization and authentication.</u></a></p>",
  "status": 1,
  "language_code": "en",
  "language_list": [
    "en",
    "zh-Hans",
    "zh-Hant",
    "pt-BR",
    "th"
  ]
}