{
  "document_id": "get-conversations-202309",
  "document_api_meta": {
    "interface_path": "/customer_service/202309/conversations",
    "title": "Get Conversations",
    "env_desc": "Use this API to retrieve a shop's conversations with buyers. ",
    "method": 2,
    "query": "https://open-api.tiktokglobalshop.com/customer_service/202309/conversations?app_key=123abc&sign=5361235029d141222525e303d742f9e38aea052d10896d3197ab9d6233730b8c&timestamp=1625484268&shop_cipher=ROW_RHkDDABBAAB8tKAVoAqsMTjsQZFLyNfY&page_token=1612356123&page_size=10&locale=en",
    "request_header_param": [
      {
        "name": "content-type",
        "type": "string",
        "required": "Y",
        "desc": "Allowed type: application/json"
      },
      {
        "name": "x-tts-access-token",
        "type": "string",
        "required": "Y",
        "desc": "The seller access_token value from [Get Access Token](https://partner.tiktokshop.com/docv2/page/678e3a3292b0f40314a92d75#Get%20Access%20Token%20API), when user_type = 0. Follow this [guide](https://partner.tiktokshop.com/docv2/page/678e3a344ddec3030b238fa0) to get seller access_token."
      }
    ],
    "request_query_param": [
      {
        "name": "app_key",
        "type": "string",
        "required": "Y",
        "desc": "Every single app will have a unique key. Please use the specific key assigned to your app."
      },
      {
        "name": "sign",
        "type": "string",
        "required": "Y",
        "desc": "Signature generated by gen algorithm. When you send API requests to TTS, you must sign them so that TTS can identify the senders. "
      },
      {
        "name": "timestamp",
        "type": "int",
        "required": "Y",
        "desc": "Unix timestamp GMT (UTC+00:00). This timestamp is used across all API requests. Developers can use this convert to local time."
      },
      {
        "name": "page_token",
        "type": "string",
        "required": "N",
        "desc": "Paging cursor, this means where this query should start.\nFor the next page, use \"next_page_token\" in response."
      },
      {
        "name": "page_size",
        "type": "int",
        "required": "Y",
        "desc": "Number of conversations on one page \nMax 20. "
      },
      {
        "name": "locale",
        "type": "string",
        "required": "N",
        "desc": "System message's display language. The messages sent by System will be returned in the setting language; The messages sent by the buyer, the shop, the CS agent will not be affected. The default value is en (English).\n\nPossible enumerations:\n- de-DE (German, Germany)\n- en (English)\n- en-GB (English, United Kingdom)\n- es-ES (Spanish, Spain)\n- es-MX (Spanish, Latin America)\n- fr-FR (French, France)\n- id-ID (Indonesian, Indonesia)\n- it-IT (Italian, Italy)\n- ja-JP (Japanese)\n- ms-MY (Malay, Malaysia)\n- th-TH (Thai, Thailand)\n- vi-VN (Vietnamese, Vietnam)\n- pt-BR (Portuguese, Brazil)\n- zh-CN (Simplified Chinese, China)"
      },
      {
        "name": "shop_cipher",
        "type": "string",
        "required": "Y",
        "desc": "Use this property to pass shop information in requesting the API. Failure in passing the correct value when requesting the API for cross-border shops will return incorrect response. \nGet by API [Get Authorization Shop](https://partner.tiktokshop.com/docv2/page/6507ead7b99d5302be949ba9?external_id=6507ead7b99d5302be949ba9)"
      }
    ],
    "request_body_param": [],
    "response_param": [
      {
        "name": "code",
        "type": "int",
        "required": "N",
        "example": "0",
        "desc": "The success or failure status code returned in API response."
      },
      {
        "name": "message",
        "type": "string",
        "required": "N",
        "example": "Success",
        "desc": "The success or failure messages returned in API response. Reasons of failure will be described in the message."
      },
      {
        "name": "request_id",
        "type": "string",
        "required": "N",
        "example": "202203070749000101890810281E8C70B7",
        "desc": "Request log"
      },
      {
        "name": "data",
        "type": "object",
        "required": "N",
        "example": "",
        "desc": "Specific return information"
      },
      {
        "name": "^next_page_token",
        "type": "string",
        "required": "N",
        "example": "1612353423",
        "desc": "The index indicates where we should start on the next page.\nIf there is no more record, this field will be \"\"(empty string).\nPut this value to request param \"page_token\" for the next page query."
      },
      {
        "name": "^conversations",
        "type": "[]object",
        "required": "N",
        "example": "",
        "desc": "Conversation info.\n"
      },
      {
        "name": "^^id",
        "type": "string",
        "required": "N",
        "example": "7494560109732334261",
        "desc": "Conversation ID"
      },
      {
        "name": "^^participant_count",
        "type": "int",
        "required": "N",
        "example": "3",
        "desc": "Number of participants in the conversation.\n- If there has been no customer service agent in the conversation, the value is `2`: the shop and the buyer;\n- Otherwise, the value is `3`: the shop, the buyer, and the customer service agent."
      },
      {
        "name": "^^can_send_message",
        "type": "bool",
        "required": "N",
        "example": "true",
        "desc": "Whether customer service agent can send message in this conversation. Under any of the following circumstances, the CS agent can send messages:\n1. There has been a prior conversation between the buyer and the shop within the last 30 days.\n2. The buyer placed an order at the shop within the past 60 days.\n3. The buyer has a history of returns or refunds at the shop."
      },
      {
        "name": "^^unread_count",
        "type": "int",
        "required": "N",
        "example": "0",
        "desc": "Number of messages unread by the customer service agent."
      },
      {
        "name": "^^create_time",
        "type": "int",
        "required": "N",
        "example": "1691411573",
        "desc": "Unix timestamp when the conversation was created. In seconds."
      },
      {
        "name": "^^participants",
        "type": "[]object",
        "required": "N",
        "example": "",
        "desc": "Conversation participants."
      },
      {
        "name": "^^^im_user_id",
        "type": "string",
        "required": "N",
        "example": "7494560109732334261",
        "desc": "Participant's ID, in IM system. This ID is used in IM system and can not be used to query orders. To query orders, use `user_id` instead."
      },
      {
        "name": "^^^avatar",
        "type": "string",
        "required": "N",
        "example": "https://p16-oec-ttp.tiktokcdn-us.com/tos-useast5-i-omjb5zjo8w-tx/566c497faaaf4491a84d3ce55d9cb095~tplv-omjb5zjo8w-origin-image.image?",
        "desc": "Participant's avatar URL.\n"
      },
      {
        "name": "^^^user_id",
        "type": "string",
        "required": "N",
        "example": "7494560109732334262",
        "desc": "Participant's ID."
      },
      {
        "name": "^^^role",
        "type": "string",
        "required": "N",
        "example": "BUYER",
        "desc": "Participant's role.\nPossible enumerations:\n- `BUYER`\n- `SHOP`\n- `CUSTOMER_SERVICE`"
      },
      {
        "name": "^^^nickname",
        "type": "string",
        "required": "N",
        "example": "Albert",
        "desc": "Participant's nickname."
      },
      {
        "name": "^^^buyer_platform",
        "type": "string",
        "required": "N",
        "example": "TIKTOK_SHOP",
        "desc": "Which platform is the buyer from. \nThis field will only be returned when the role is `BUYER` and the region is Indonesia. Possible enumerations:\n- TIKTOK_SHOP\n- TOKOPEDIA\nYou cannot send platform-specific content to the buyer from a different platform. For example, when you send a product card to the Tokopedia buyer, you must ensure the product is listed on Tokopedia."
      },
      {
        "name": "^^latest_message",
        "type": "object",
        "required": "N",
        "example": "",
        "desc": "The latest message in conversation."
      },
      {
        "name": "^^^id",
        "type": "string",
        "required": "N",
        "example": "7494560109732334263",
        "desc": "Message ID."
      },
      {
        "name": "^^^type",
        "type": "string",
        "required": "N",
        "example": "TEXT",
        "desc": "Message type.\nPossible enumerations:\n- TEXT\n- IMAGE\n- ALLOCATED_SERVICE - A customer service agent joins the conversation.\n- NOTIFICATION - Notification from the system.\n- BUYER_ENTER_FROM_TRANSFER : The conversation is transferred to another customer service agent.\n- BUYER_ENTER_FROM_PRODUCT : The buyer is viewing a product before sending this message.\n- BUYER_ENTER_FROM_ORDER : The buyer is viewing an order before sending this message.\n- PRODUCT_CARD\n- EMOTICONS\n- ORDER_CARD\n- VIDEO\n- RETURN_REFUND_CARD: Return/refund card.\n- COUPON_CARD\n- OTHER: Messages of types not supported in this API."
      },
      {
        "name": "^^^content",
        "type": "string",
        "required": "N",
        "example": "{\"content\": \"simple text message\"}",
        "desc": "Message content, in JSON serialized string.\nExamples of content for each type of message are listed below:\n- TEXT: \n```\n{\n    \"content\": \"simple text\"\n}\n```\n\n- IMAGE: \n```\n{\n    \"height\": \"290\",\n    \"url\": \"https://tosv.boei18n.byted.org/obj/temai-im/FszkJ53nSapYG6KDaJQmqR3jjoZGwww304-290\",\n    \"width\": \"304\"\n}\n```\n\n- PRODUCT_CARD, BUYER_ENTER_FROM_PRODUCT:\n```\n{\n    \"product_id\": \"12345\"\n}\n```\n\n- ORDER_CARD, BUYER_ENTER_FROM_ORDER :\n```\n{\n    \"order_id\": \"12345\"\n}\n```\n\n- RETURN_REFUND_CARD:\n```\n{\n    \"order_id\": \"12345\",\n    \"sku_id\": \"45678\"\n}\n```\n\n- VIDEO:\n```\n{\n    \"url\": \"https://video-boei18n.byted.org/storage/v1/tos-boei18n-v-c72c01/e8240f35244646428df9c3244d1a7408?x-tos-algorithm=v2&x-tos-authkey=5bf25627da095a5cba28ace592de46cc&x-tos-expires=1681980481&x-tos-signature=r_bRxtrvGhXAuZgMmNhlZ_Upqzg\",\n    \"cover\": \"https://p-boei18n.byted.org/tos-boei18n-v-c72c01/o8keEOhzTcNCcJyAbkWZwpLIyTfkJxcGbRBvLP~tplv-jvtte31kaf-origin-jpeg.jpeg?\",\n    \"width\": 640,\n    \"height\": 360,\n    \"duration\": \"20.504\",\n    \"vid\": \"v0e30cg700f7cgcmu8jc77u9e2bdp95g\",\n    \"expire_time\": \"1681980481\",\n    \"format\": \"mp4\",\n    \"size\": 400000,\n    \"bit_rate\": 156067,\n    \"quality\": \"original\",\n    \"codec_type\": \"h264\"\n}\n```\n\n- ALLOCATED_SERVICE, NOTIFICATION, BUYER_ENTER_FROM_TRANSFER, OTHER: \n```\n{\n    \"content\": \"simple text\"\n}\n```\n\n- COUPON_CARD:\n```\n{\n    \"coupon_id\": \"7262992004278206762\"\n}\n```\nNote: Use [Get Coupon](6699dce0de15e502ed219e37) for the details of the coupon."
      },
      {
        "name": "^^^create_time",
        "type": "int",
        "required": "N",
        "example": "1691411573",
        "desc": "Unix timestamp for creating the message in seconds."
      },
      {
        "name": "^^^is_visible",
        "type": "bool",
        "required": "N",
        "example": "true",
        "desc": "Whether this message should be displayed to customer service.\nFor example, the buyer will receive a rating request message at the end of the conversation from the system. You should not present this type of message to the seller or the customer support agents."
      },
      {
        "name": "^^^sender",
        "type": "object",
        "required": "N",
        "example": "",
        "desc": "Sender of the message."
      },
      {
        "name": "^^^^im_user_id",
        "type": "string",
        "required": "N",
        "example": "7494560109732334261",
        "desc": "Sender's IM ID. Sender's unique identifier in TikTok Shop's IM system. "
      },
      {
        "name": "^^^^avatar",
        "type": "string",
        "required": "N",
        "example": "https://p16-oec-ttp.tiktokcdn-us.com/tos-useast5-i-omjb5zjo8w-tx/566c497faaaf4491a84d3ce55d9cb095~tplv-omjb5zjo8w-origin-image.image?",
        "desc": "Sender's avatar URL.\n"
      },
      {
        "name": "^^^^role",
        "type": "string",
        "required": "N",
        "example": "BUYER",
        "desc": "Sender's role. Possible enumerations:\n- `BUYER`\n- `SHOP`\n- `CUSTOMER_SERVICE`\n- `SYSTEM`\n- `ROBOT`\nFor `SYSTEM` and `ROBOT` role, the value of `im_user_id`, `nickname`, and `avatar` are the same as those of the `SHOP` role."
      },
      {
        "name": "^^^^nickname",
        "type": "string",
        "required": "N",
        "example": "Albert",
        "desc": "Sender's nickname.\n- For shops, the nickname is the shop's name. \n- For customer service, the nickname is the customer service's name. \n- For buyers, the nickname is the buyer's nickname on TikTok. \nYou can set the nicknames for shops and customer service agents on Seller Center.  "
      },
      {
        "name": "^^^index",
        "type": "string",
        "required": "N",
        "example": "7494560109732334274",
        "desc": "Message index. This field can be used to sort messages.\n\"index\" means the order of the message in the conversation. This value is unique for every message in a conversation. This value is time-related, meaning a newer message will get a larger \"index\". But it is not strictly increasing."
      }
    ],
    "error_code_list": [
      {
        "code": "45101001",
        "msg": "Internal error. Please try again later or contact the technical support team for help. "
      },
      {
        "code": "45101003",
        "msg": "Record not found. Please check the parameters."
      },
      {
        "code": "45101004",
        "msg": "The query quota has been reached (10000 request per day). Please try again tomorrow."
      },
      {
        "code": "36009003",
        "msg": "Internal error. Please try again. If the issue persists after multiple attempts, please contact platform support."
      }
    ],
    "request_body": "",
    "response_body": "{\"code\":0,\"data\":{\"next_page_token\":\"1612353423\",\"conversations\":[{\"id\":\"7494560109732334261\",\"participant_count\":3,\"can_send_message\":true,\"unread_count\":0,\"create_time\":1691411573,\"participants\":[{\"im_user_id\":\"7494560109732334261\",\"avatar\":\"https://p16-oec-ttp.tiktokcdn-us.com/tos-useast5-i-omjb5zjo8w-tx/566c497faaaf4491a84d3ce55d9cb095~tplv-omjb5zjo8w-origin-image.image?\",\"user_id\":\"7494560109732334262\",\"role\":\"BUYER\",\"nickname\":\"Albert\",\"buyer_platform\":\"TIKTOK_SHOP\"}],\"latest_message\":{\"id\":\"7494560109732334263\",\"type\":\"TEXT\",\"content\":\"{\\\"content\\\": \\\"simple text message\\\"}\",\"create_time\":1691411573,\"is_visible\":true,\"sender\":{\"im_user_id\":\"7494560109732334261\",\"avatar\":\"https://p16-oec-ttp.tiktokcdn-us.com/tos-useast5-i-omjb5zjo8w-tx/566c497faaaf4491a84d3ce55d9cb095~tplv-omjb5zjo8w-origin-image.image?\",\"role\":\"BUYER\",\"nickname\":\"Albert\"},\"index\":\"7494560109732334274\"}}]},\"message\":\"Success\",\"request_id\":\"202203070749000101890810281E8C70B7\"}",
    "title_list": [
      "Common Require / 公共入参",
      "API Require / API入参",
      "Require Sample / 请求示例",
      "API Response / API出参",
      "ResponseSample / 响应示例",
      "Error Code / 错误码",
      "Feedback / 文档反馈"
    ],
    "error_code_sheet": {
      "header_list": [
        "Code",
        "Message"
      ],
      "value_sheet": []
    },
    "api_request_header_sheet": {
      "header_list": [
        "Properties",
        "Type",
        "Required",
        "Properties description"
      ],
      "value_sheet": []
    },
    "api_request_query_sheet": {
      "header_list": [
        "Properties",
        "Type",
        "Required",
        "Properties description"
      ],
      "value_sheet": []
    },
    "api_request_body_sheet": {
      "header_list": [
        "Properties",
        "Type",
        "Required",
        "Properties description"
      ],
      "value_sheet": []
    },
    "api_response_sheet": {
      "header_list": [
        "Properties",
        "Type",
        "Sample",
        "Properties description"
      ],
      "value_sheet": []
    },
    "is_post_method": false,
    "is_request_path_exist": false,
    "is_request_query_exist": true,
    "is_request_body_exist": false,
    "api_auth_info_sheet": {
      "header_list": [
        "API Scope",
        "API Scope Type"
      ],
      "value_sheet": []
    },
    "api_auth_info_list": [
      {
        "package": "Instant Message",
        "package_type": "Private"
      },
      {
        "package": "Customer Service",
        "package_type": "Custom"
      }
    ],
    "is_shop_chiper_exist": true,
    "is_v2": true,
    "dynamic_configuration": {
      "common_error_code_link": "https://partner.tiktokshop.com/docv2/page/678e3a45786253031531b942",
      "common_param_link": "https://partner.tiktokshop.com/docv2/page/678e3a4278f4c20311b8b57e"
    },
    "sample_code": [
      {
        "label": "Curl",
        "key": "curl",
        "value": "curl -X GET \\\n 'https://open-api.tiktokglobalshop.com/customer_service/202309/conversations?page_token=1612356123&page_size=10&locale=en&app_key=38abcd&sign=5361235029d141222525e303d742f9e38aea052d10896d3197ab9d6233730b8c&timestamp=1623812664&shop_cipher=GCP_XF90igAAAABh00qsWgtvOiGFNqyubMt3' \\\n-H 'x-tts-access-token: TTP_pwSm2AAAAABmmtFz1xlyKMnwg74T2GJ5s0uQbS8jPjb_GkdFVCxPqzQXSyuyfXdQa0AqyDsea2tYFNVf4XeqgZHFfPyv0Vs659QqyLYfsGzanZ5XZAin3_ZkcIxxS0_In6u6XDeU96k' \\\n-H 'content-type: application/json'",
        "language": "shell"
      },
      {
        "label": "Go",
        "key": "go",
        "value": "// For more details about the SDK, refer to the documentation:\n// https://partner.tiktokshop.com/docv2/page/67c83e0799a75104986ae498\nfunc customerService202309GetConversationsGet() {\n    configuration := apis.NewConfiguration()\n    configuration.AddAppInfo(appKey, appSecret)\n    apiClient := apis.NewAPIClient(configuration)\n    request := apiClient.CustomerServiceV202309API.CustomerService202309ConversationsGet(context.Background())\n    request = request.XTtsAccessToken(\"your access token\")\n    request = request.ContentType(\"application/json\")\n    request = request.PageToken(\"1612356123\")\n    request = request.PageSize(10)\n    request = request.Locale(\"en\")\n    request = request.ShopCipher(\"your shop cipher\")\n    resp, httpResp, err := request.Execute()\n    if err != nil || httpResp.StatusCode != 200 {\n        fmt.Printf(\"productsRequest err:%v resbody:%s\", err, httpResp.Body)\n        return\n    }\n    if resp == nil {\n        fmt.Printf(\"response is nil\")\n        return\n    }\n    if resp.GetCode()!= 0 {\n        fmt.Printf(\"response business is error, errorCode:%d errorMessage:%s\", resp.GetCode(), resp.GetMessage())\n        return\n    }\n    respDataJson, _ := json.MarshalIndent(resp.GetData(), \"\", \"  \")\n    fmt.Println(\"response data:\", string(respDataJson))\n    return\n}\n",
        "language": "go"
      },
      {
        "label": "Node.js",
        "key": "node",
        "value": "// For more details about the SDK, refer to the documentation:\n// https://partner.tiktokshop.com/docv2/page/67c83e0799a75104986ae498\nasync function customerService202309GetConversationsGet() {\n    const result = await client.api.CustomerServiceV202309Api.ConversationsGet(10, \"your access token\", \"application/json\", \"1612356123\", \"en\", \"your shop cipher\");\n    console.log('response: ', JSON.stringify(result, null, 2));\n}\n",
        "language": "typescript"
      },
      {
        "label": "Java",
        "key": "java",
        "value": "// For more details about the SDK, refer to the documentation:\n// https://partner.tiktokshop.com/docv2/page/67c83e0799a75104986ae498\npublic void customerService202309GetConversationsGet() throws Exception {\n    ApiClient defaultClient = Configuration.getDefaultApiClient()\n            .setAppkey(\"your appKey\")\n            .setSecret(\"your secret\")\n            .setBasePath(\"https://open-api.tiktokglobalshop.com\");\n    CustomerServiceV202309Api apiInstance = new CustomerServiceV202309Api(defaultClient);\n    GetConversationsResponse result = apiInstance.customerService202309ConversationsGet(10, \"your access token\", \"application/json\", \"1612356123\", \"en\", \"your shop cipher\");\n    System.out.println(result);\n}\n",
        "language": "java"
      }
    ],
    "scenario": 1,
    "document_path": "get-conversations-202309",
    "scope_list": [
      {
        "package_id": 480004,
        "package_name": "Customer Service",
        "package_name_starling_key": "",
        "package_description": "The Partner will be able to receive and reply to Instant Messages from buyers.",
        "package_status": 200,
        "package_type": 200,
        "auth_info_starling_key": "",
        "auth_info": "The Partner will be able to receive and reply to Instant Messages from buyers.",
        "auth_type": 1,
        "launch_time": 0,
        "update_time": 1724067953955,
        "create_time": 1702264280496,
        "operator": "shenxiaochuan@bytedance.com",
        "package_description_starling_key": "",
        "scope_tags": [
          100
        ],
        "scope_key": "seller.customer_service",
        "data_source_list": [
          100
        ]
      }
    ],
    "request_path_param": [],
    "api_request_path_sheet": {
      "header_list": [
        "Properties",
        "Type",
        "Required",
        "Properties description"
      ],
      "value_sheet": []
    }
  }
}