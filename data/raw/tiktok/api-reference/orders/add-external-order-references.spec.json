{
  "document_id": "add-external-order-references-202406",
  "document_api_meta": {
    "interface_path": "/order/202406/orders/external_orders",
    "title": "Add External Order References",
    "env_desc": "If you are using your own external OMS (order management system) to manage TikTok Shop orders, the corresponding order IDs between your OMS and TikTok Shop may be different.\nUse this endpoint to attach the information in your OMS to the correct order(s) in TikTok Shop for further reference.",
    "method": 1,
    "query": "https://open-api.tiktokglobalshop.com/order/202406/orders/external_orders?app_key=123abc&sign=5361235029d141222525e303d742f9e38aea052d10896d3197ab9d6233730b8c&timestamp=1625484268&shop_cipher=ROW_RHkDDABBAAB8tKAVoAqsMTjsQZFLyNfY",
    "request_header_param": [
      {
        "name": "content-type",
        "type": "string",
        "required": "Y",
        "desc": "Allowed type: application/json"
      },
      {
        "name": "x-tts-access-token",
        "type": "string",
        "required": "Y",
        "desc": "The seller access_token value from [Get Access Token](https://partner.tiktokshop.com/docv2/page/678e3a3292b0f40314a92d75#Get%20Access%20Token%20API), when user_type = 0. Follow this [guide](https://partner.tiktokshop.com/docv2/page/678e3a344ddec3030b238fa0) to get seller access_token."
      }
    ],
    "request_query_param": [
      {
        "name": "app_key",
        "type": "string",
        "required": "Y",
        "desc": "Every single app will have a unique key. Please use the specific key assigned to your app."
      },
      {
        "name": "sign",
        "type": "string",
        "required": "Y",
        "desc": "Signature generated by gen algorithm. When you send API requests to TTS, you must sign them so that TTS can identify the senders. "
      },
      {
        "name": "timestamp",
        "type": "int",
        "required": "Y",
        "desc": "Unix timestamp GMT (UTC+00:00). This timestamp is used across all API requests. Developers can use this convert to local time."
      },
      {
        "name": "shop_cipher",
        "type": "string",
        "required": "Y",
        "desc": "Use this property to pass shop information in requesting the API. Failure in passing the correct value when requesting the API for cross-border shops will return incorrect response. \nGet by API [Get Authorization Shop](https://partner.tiktokshop.com/docv2/page/6507ead7b99d5302be949ba9?external_id=6507ead7b99d5302be949ba9)"
      }
    ],
    "request_body_param": [
      {
        "name": "orders",
        "type": "[]object",
        "required": "Y",
        "desc": "Max count: 100."
      },
      {
        "name": "^id",
        "type": "string",
        "required": "Y",
        "desc": "The unique identifier for a TikTok Shop order."
      },
      {
        "name": "^external_order",
        "type": "object",
        "required": "Y",
        "desc": "Order information in your external order management system (OMS)."
      },
      {
        "name": "^^id",
        "type": "string",
        "required": "Y",
        "desc": "The corresponding order ID in your OMS."
      },
      {
        "name": "^^platform",
        "type": "string",
        "required": "Y",
        "desc": "The alias of your OMS.\nPossible values:\n- SHOPIFY\n- WOOCOMMERCE\n- BIGCOMMERCE\n- MAGENTO\n- SALESFORCE_COMMERCE_CLOUD\n- CHANNEL_ADVISOR\n- AMAZON\n- ORDER_MANAGEMENT_SYSTEM\n- WAREHOUSE_MANAGEMENT_SYSTEM\n- ERP_SYSTEM\n\nNotes:\n- To attach information from multiple OMSs to the same order in TikTok Shop, call this API multiple times, each with the same TikTok Shop order and a different OMS.\n- To edit the attached information for a TikTok Shop order, call the API with the same OMS."
      },
      {
        "name": "^^line_items",
        "type": "[]object",
        "required": "Y",
        "desc": "Max count: 100."
      },
      {
        "name": "^^^id",
        "type": "string",
        "required": "Y",
        "desc": "Line item ID in your OMS."
      },
      {
        "name": "^^^origin_id",
        "type": "string",
        "required": "Y",
        "desc": "Line item ID in TikTok Shop."
      }
    ],
    "response_param": [
      {
        "name": "code",
        "type": "int",
        "required": "N",
        "example": "0",
        "desc": "The success or failure status code returned in API response."
      },
      {
        "name": "message",
        "type": "string",
        "required": "N",
        "example": "Success",
        "desc": "The success or failure messages returned in API response. Reasons of failure will be described in the message."
      },
      {
        "name": "request_id",
        "type": "string",
        "required": "N",
        "example": "202203070749000101890810281E8C70B7",
        "desc": "Request log"
      },
      {
        "name": "data",
        "type": "object",
        "required": "N",
        "example": "",
        "desc": "Specific return information"
      },
      {
        "name": "^errors",
        "type": "[]object",
        "required": "N",
        "example": "",
        "desc": "A list of error codes and their corresponding messages."
      },
      {
        "name": "^^code",
        "type": "string",
        "required": "N",
        "example": "36020001",
        "desc": "A machine-readable response code that represents the request result."
      },
      {
        "name": "^^message",
        "type": "string",
        "required": "N",
        "example": "Invalid order_id",
        "desc": "A human-readable message that describes the success or failure of the API request."
      },
      {
        "name": "^^detail",
        "type": "object",
        "required": "N",
        "example": "",
        "desc": "The details of the error message."
      },
      {
        "name": "^^^order_id",
        "type": "string",
        "required": "N",
        "example": "576461413038785752",
        "desc": "The unique identifier for a TikTok Shop order."
      },
      {
        "name": "^^^external_order",
        "type": "object",
        "required": "N",
        "example": "",
        "desc": "The order information in your OMS."
      },
      {
        "name": "^^^^id",
        "type": "string",
        "required": "N",
        "example": "676461413038785752",
        "desc": "The corresponding order ID in your OMS."
      },
      {
        "name": "^^^^platform",
        "type": "string",
        "required": "N",
        "example": "SHOPIFY",
        "desc": "The alias of your OMS."
      }
    ],
    "error_code_list": [],
    "request_body": "{\"orders\":[{\"id\":\"576461413038785752\",\"external_order\":{\"id\":\"676461413038785752\",\"platform\":\"SHOPIFY\",\"line_items\":[{\"id\":\"577086512123755123\",\"origin_id\":\"677086512123755123\"}]}}]}",
    "response_body": "{\"code\":0,\"data\":{\"errors\":[{\"code\":\"36020001\",\"message\":\"Invalid order_id\",\"detail\":{\"order_id\":\"576461413038785752\",\"external_order\":{\"id\":\"676461413038785752\",\"platform\":\"SHOPIFY\"}}}]},\"message\":\"Success\",\"request_id\":\"202203070749000101890810281E8C70B7\"}",
    "title_list": [
      "Common Require / 公共入参",
      "API Require / API入参",
      "Require Sample / 请求示例",
      "API Response / API出参",
      "ResponseSample / 响应示例",
      "Error Code / 错误码",
      "Feedback / 文档反馈"
    ],
    "error_code_sheet": {
      "header_list": [
        "Code",
        "Message"
      ],
      "value_sheet": []
    },
    "api_request_header_sheet": {
      "header_list": [
        "Properties",
        "Type",
        "Required",
        "Properties description"
      ],
      "value_sheet": []
    },
    "api_request_query_sheet": {
      "header_list": [
        "Properties",
        "Type",
        "Required",
        "Properties description"
      ],
      "value_sheet": []
    },
    "api_request_body_sheet": {
      "header_list": [
        "Properties",
        "Type",
        "Required",
        "Properties description"
      ],
      "value_sheet": []
    },
    "api_response_sheet": {
      "header_list": [
        "Properties",
        "Type",
        "Sample",
        "Properties description"
      ],
      "value_sheet": []
    },
    "is_post_method": true,
    "is_request_path_exist": false,
    "is_request_query_exist": true,
    "is_request_body_exist": true,
    "api_auth_info_sheet": {
      "header_list": [
        "API Scope",
        "API Scope Type"
      ],
      "value_sheet": []
    },
    "api_auth_info_list": [
      {
        "package": "Write External Order References",
        "package_type": "Custom"
      },
      {
        "package": "Write External Order References",
        "package_type": "Public"
      }
    ],
    "is_shop_chiper_exist": true,
    "is_v2": true,
    "dynamic_configuration": {
      "common_error_code_link": "https://partner.tiktokshop.com/docv2/page/678e3a45786253031531b942",
      "common_param_link": "https://partner.tiktokshop.com/docv2/page/678e3a4278f4c20311b8b57e"
    },
    "sample_code": [
      {
        "label": "Curl",
        "key": "curl",
        "value": "curl -X POST \\\n 'https://open-api.tiktokglobalshop.com/order/202406/orders/external_orders?shop_cipher=GCP_XF90igAAAABh00qsWgtvOiGFNqyubMt3&app_key=38abcd&sign=5361235029d141222525e303d742f9e38aea052d10896d3197ab9d6233730b8c&timestamp=1623812664' \\\n-H 'content-type: application/json' \\\n-H 'x-tts-access-token: TTP_pwSm2AAAAABmmtFz1xlyKMnwg74T2GJ5s0uQbS8jPjb_GkdFVCxPqzQXSyuyfXdQa0AqyDsea2tYFNVf4XeqgZHFfPyv0Vs659QqyLYfsGzanZ5XZAin3_ZkcIxxS0_In6u6XDeU96k' \\\n-d '{\n  \"orders\": [\n    {\n      \"id\": \"576461413038785752\",\n      \"external_order\": {\n        \"id\": \"676461413038785752\",\n        \"platform\": \"SHOPIFY\",\n        \"line_items\": [\n          {\n            \"id\": \"577086512123755123\",\n            \"origin_id\": \"677086512123755123\"\n          }\n        ]\n      }\n    }\n  ]\n}'",
        "language": "shell"
      },
      {
        "label": "Go",
        "key": "go",
        "value": "// For more details about the SDK, refer to the documentation:\n// https://partner.tiktokshop.com/docv2/page/67c83e0799a75104986ae498\nfunc order202406AddExternalOrderReferencesPost() {\n    configuration := apis.NewConfiguration()\n    configuration.AddAppInfo(appKey, appSecret)\n    apiClient := apis.NewAPIClient(configuration)\n    request := apiClient.OrderV202406API.Order202406OrdersExternalOrdersPost(context.Background())\n    request = request.XTtsAccessToken(\"your access token\")\n    request = request.ContentType(\"application/json\")\n    request = request.ShopCipher(\"your shop cipher\")\n    order202406AddExternalOrderReferencesRequestBody := order_v202406.NewOrder202406AddExternalOrderReferencesRequestBody()\n    order202406AddExternalOrderReferencesRequestBodyOrders := order_v202406.NewOrder202406AddExternalOrderReferencesRequestBodyOrders()\n    order202406AddExternalOrderReferencesRequestBodyOrders.SetId(\"576461413038785752\")\n    order202406AddExternalOrderReferencesRequestBodyOrdersExternalOrder := order_v202406.NewOrder202406AddExternalOrderReferencesRequestBodyOrdersExternalOrder()\n    order202406AddExternalOrderReferencesRequestBodyOrdersExternalOrder.SetId(\"676461413038785752\")\n    order202406AddExternalOrderReferencesRequestBodyOrdersExternalOrder.SetPlatform(\"SHOPIFY\")\n    order202406AddExternalOrderReferencesRequestBodyOrdersExternalOrderLineItems := order_v202406.NewOrder202406AddExternalOrderReferencesRequestBodyOrdersExternalOrderLineItems()\n    order202406AddExternalOrderReferencesRequestBodyOrdersExternalOrderLineItems.SetId(\"577086512123755123\")\n    order202406AddExternalOrderReferencesRequestBodyOrdersExternalOrderLineItems.SetOriginId(\"677086512123755123\")\n    order202406AddExternalOrderReferencesRequestBodyOrdersExternalOrderLineItemsList := []order_v202406.Order202406AddExternalOrderReferencesRequestBodyOrdersExternalOrderLineItems{*order202406AddExternalOrderReferencesRequestBodyOrdersExternalOrderLineItems}\n    order202406AddExternalOrderReferencesRequestBodyOrdersExternalOrder.SetLineItems(order202406AddExternalOrderReferencesRequestBodyOrdersExternalOrderLineItemsList)\n    order202406AddExternalOrderReferencesRequestBodyOrders.SetExternalOrder(*order202406AddExternalOrderReferencesRequestBodyOrdersExternalOrder)\n    order202406AddExternalOrderReferencesRequestBodyOrdersList := []order_v202406.Order202406AddExternalOrderReferencesRequestBodyOrders{*order202406AddExternalOrderReferencesRequestBodyOrders}\n    order202406AddExternalOrderReferencesRequestBody.SetOrders(order202406AddExternalOrderReferencesRequestBodyOrdersList)\n    request = request.Order202406AddExternalOrderReferencesRequestBody(*order202406AddExternalOrderReferencesRequestBody)\n    resp, httpResp, err := request.Execute()\n    if err != nil || httpResp.StatusCode != 200 {\n        fmt.Printf(\"productsRequest err:%v resbody:%s\", err, httpResp.Body)\n        return\n    }\n    if resp == nil {\n        fmt.Printf(\"response is nil\")\n        return\n    }\n    if resp.GetCode()!= 0 {\n        fmt.Printf(\"response business is error, errorCode:%d errorMessage:%s\", resp.GetCode(), resp.GetMessage())\n        return\n    }\n    respDataJson, _ := json.MarshalIndent(resp.GetData(), \"\", \"  \")\n    fmt.Println(\"response data:\", string(respDataJson))\n    return\n}\n",
        "language": "go"
      },
      {
        "label": "Node.js",
        "key": "node",
        "value": "// For more details about the SDK, refer to the documentation:\n// https://partner.tiktokshop.com/docv2/page/67c83e0799a75104986ae498\nasync function order202406AddExternalOrderReferencesPost() {\n    const order202406AddExternalOrderReferencesRequestBody = new Order202406AddExternalOrderReferencesRequestBody();\n    const order202406AddExternalOrderReferencesRequestBodyOrders = new Order202406AddExternalOrderReferencesRequestBodyOrders();\n    order202406AddExternalOrderReferencesRequestBodyOrders.id = \"576461413038785752\";\n    const order202406AddExternalOrderReferencesRequestBodyOrdersExternalOrder = new Order202406AddExternalOrderReferencesRequestBodyOrdersExternalOrder();\n    order202406AddExternalOrderReferencesRequestBodyOrdersExternalOrder.id = \"676461413038785752\";\n    order202406AddExternalOrderReferencesRequestBodyOrdersExternalOrder.platform = \"SHOPIFY\";\n    const order202406AddExternalOrderReferencesRequestBodyOrdersExternalOrderLineItems = new Order202406AddExternalOrderReferencesRequestBodyOrdersExternalOrderLineItems();\n    order202406AddExternalOrderReferencesRequestBodyOrdersExternalOrderLineItems.id = \"577086512123755123\";\n    order202406AddExternalOrderReferencesRequestBodyOrdersExternalOrderLineItems.originId = \"677086512123755123\";\n    order202406AddExternalOrderReferencesRequestBodyOrdersExternalOrder.lineItems = [order202406AddExternalOrderReferencesRequestBodyOrdersExternalOrderLineItems];\n    order202406AddExternalOrderReferencesRequestBodyOrders.externalOrder = order202406AddExternalOrderReferencesRequestBodyOrdersExternalOrder;\n    order202406AddExternalOrderReferencesRequestBody.orders = [order202406AddExternalOrderReferencesRequestBodyOrders];\n    const result = await client.api.OrderV202406Api.OrdersExternalOrdersPost(\"your access token\", \"application/json\", \"your shop cipher\", order202406AddExternalOrderReferencesRequestBody);\n    console.log('response: ', JSON.stringify(result, null, 2));\n}\n",
        "language": "typescript"
      },
      {
        "label": "Java",
        "key": "java",
        "value": "// For more details about the SDK, refer to the documentation:\n// https://partner.tiktokshop.com/docv2/page/67c83e0799a75104986ae498\npublic void order202406AddExternalOrderReferencesPost() throws Exception {\n    ApiClient defaultClient = Configuration.getDefaultApiClient()\n            .setAppkey(\"your appKey\")\n            .setSecret(\"your secret\")\n            .setBasePath(\"https://open-api.tiktokglobalshop.com\");\n    OrderV202406Api apiInstance = new OrderV202406Api(defaultClient);\n    AddExternalOrderReferencesRequestBody addExternalOrderReferencesRequestBody = new AddExternalOrderReferencesRequestBody();\n    AddExternalOrderReferencesRequestBodyOrders addExternalOrderReferencesRequestBodyOrders = new tiktokshop.open.sdk_java.model.Order.V202406.AddExternalOrderReferencesRequestBodyOrders();\n    addExternalOrderReferencesRequestBodyOrders.setId(\"576461413038785752\");\n    AddExternalOrderReferencesRequestBodyOrdersExternalOrder addExternalOrderReferencesRequestBodyOrdersExternalOrder = new tiktokshop.open.sdk_java.model.Order.V202406.AddExternalOrderReferencesRequestBodyOrdersExternalOrder();\n    addExternalOrderReferencesRequestBodyOrdersExternalOrder.setId(\"676461413038785752\");\n    addExternalOrderReferencesRequestBodyOrdersExternalOrder.setPlatform(\"SHOPIFY\");\n    AddExternalOrderReferencesRequestBodyOrdersExternalOrderLineItems addExternalOrderReferencesRequestBodyOrdersExternalOrderLineItems = new tiktokshop.open.sdk_java.model.Order.V202406.AddExternalOrderReferencesRequestBodyOrdersExternalOrderLineItems();\n    addExternalOrderReferencesRequestBodyOrdersExternalOrderLineItems.setId(\"577086512123755123\");\n    addExternalOrderReferencesRequestBodyOrdersExternalOrderLineItems.setOriginId(\"677086512123755123\");\n    List<AddExternalOrderReferencesRequestBodyOrdersExternalOrderLineItems> addExternalOrderReferencesRequestBodyOrdersExternalOrderLineItemsList = new ArrayList<>(Arrays.asList(addExternalOrderReferencesRequestBodyOrdersExternalOrderLineItems));\n    addExternalOrderReferencesRequestBodyOrdersExternalOrder.setLineItems(addExternalOrderReferencesRequestBodyOrdersExternalOrderLineItemsList);\n    addExternalOrderReferencesRequestBodyOrders.setExternalOrder(addExternalOrderReferencesRequestBodyOrdersExternalOrder);\n    List<AddExternalOrderReferencesRequestBodyOrders> addExternalOrderReferencesRequestBodyOrdersList = new ArrayList<>(Arrays.asList(addExternalOrderReferencesRequestBodyOrders));\n    addExternalOrderReferencesRequestBody.setOrders(addExternalOrderReferencesRequestBodyOrdersList);\n    AddExternalOrderReferencesResponse result = apiInstance.order202406OrdersExternalOrdersPost(\"your access token\", \"application/json\", \"your shop cipher\", addExternalOrderReferencesRequestBody);\n    System.out.println(result);\n}\n",
        "language": "java"
      }
    ],
    "scenario": 1,
    "document_path": "add-external-order-references-202406",
    "scope_list": [
      {
        "package_id": 1029124,
        "package_name": "Write External Order References",
        "package_name_starling_key": "",
        "package_description": "This application will be able to write a mapping between order IDs from other platforms (e.g., DTC, OMS, ERPs) and TikTok order IDs.",
        "package_status": 200,
        "package_type": 200,
        "auth_info_starling_key": "",
        "auth_info": "This application will be able to write a mapping between order IDs from other platforms (e.g., DTC, OMS, ERPs) and TikTok order IDs.",
        "auth_type": 1,
        "launch_time": 1722397314762,
        "update_time": 1722397314763,
        "create_time": 1722397314763,
        "operator": "shenxiaochuan@bytedance.com",
        "package_description_starling_key": "",
        "scope_tags": [],
        "scope_key": "seller.order.ext_ref.write.custom",
        "data_source_list": [
          100
        ]
      },
      {
        "package_id": 1032964,
        "package_name": "Write External Order References",
        "package_name_starling_key": "",
        "package_description": "This application will be able to write a mapping between order IDs from other platforms (e.g., DTC, OMS, ERPs) and TikTok order IDs.",
        "package_status": 200,
        "package_type": 100,
        "auth_info_starling_key": "",
        "auth_info": "This application will be able to write a mapping between order IDs from other platforms (e.g., DTC, OMS, ERPs) and TikTok order IDs.",
        "auth_type": 1,
        "launch_time": 1722397156228,
        "update_time": 1722398887618,
        "create_time": 1722397156228,
        "operator": "shenxiaochuan@bytedance.com",
        "package_description_starling_key": "",
        "scope_tags": [],
        "scope_key": "seller.order.ext_ref.write",
        "data_source_list": [
          100
        ]
      }
    ],
    "request_path_param": [],
    "api_request_path_sheet": {
      "header_list": [
        "Properties",
        "Type",
        "Required",
        "Properties description"
      ],
      "value_sheet": []
    }
  }
}